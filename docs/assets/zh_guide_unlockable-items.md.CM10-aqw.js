import{_ as a,c as i,o as t,f as e,D as A,fc as s,fd as c,fe as l,ff as o,fg as n,fh as d,fi as p,fj as r,fk as h,fl as g,fm as m,fn as u,fo as b,fp as y}from"./chunks/framework.BG74BkEs.js";const J=JSON.parse('{"title":"可解锁物件","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/unlockable-items.md","filePath":"zh/guide/unlockable-items.md","lastUpdated":1698833889000}'),v={name:"zh/guide/unlockable-items.md"},k=n+" 1x",B=d+" 1x",_=p+" 1x",w=r+" 1x",C=s+" 1x",f=c+" 1x",G=h+" 1x",Q=g+" 1x",Y=m+" 1x",I=u+" 1x",W=b+" 1x",T=y+" 1x",E=l+" 1x",x=o+" 1x",D=e('<h1 id="可解锁物件" tabindex="-1">可解锁物件 <a class="header-anchor vp-link" href="#可解锁物件" aria-label="Permalink to &quot;可解锁物件&quot;">​</a></h1><p>可解锁功能允许管理物件，有持久化记录解锁或未解锁状态。该功能有多种使用场景，比如CG和影片的解锁，成就，提示或是其他游戏中玩家达成某些条件后需要激活或解锁的系统。</p><p>每个可解锁物件都有一个字符串id和布尔值构成，表示该物件是否解锁。在naninovel脚本中使用 <a href="/zh/api/#unlock" target="_blank"><code>@unlock</code></a> 和 <a href="/zh/api/#lock" target="_blank"><code>@lock</code></a> 命令跟物件ID来解锁或加锁物件，比如：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@unlock</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> SecretAchievement</span></span></code></pre></div><p>— 会解锁物件 <code>SecretAchievement</code></p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@lock</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> SecretAchievement</span></span></code></pre></div><p>— 会为该物件重新加密，变为未解锁状态</p><p>可解锁物件状态存储于 <a href="/naninovel-docs/zh/guide/state-management#全局状态" class="vp-link">全局状态</a> 和当前游戏进度无关。比如，如果你解锁了某个物件，在你开始新游戏或是加载另一个存档时，该物件也不会变为未解锁状态。</p><p>要将某个<a href="https://docs.unity3d.com/Manual/class-GameObject.html" class="vp-link" target="_blank" rel="noreferrer">游戏物体<span class="external-link-icon"> ↗</span></a> 设置为可解锁物件，使用 <code>UnlockableTrigger</code> 组件：</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+k+'" type="image/avif"><source srcset="'+B+'"><img data-imgit-loadable alt="" width="447" height="355" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABZAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAWAAAAEQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABhbWRhdAoIOBErBpAQ0AIyTRXABx0CBIAFALyBHYAR6rDinggNj1DHS5DHCzQYagZK3axgG0z83u2Q8HuPhb1q01WjA56fmcTfTA/1tLZmFncw2QUS4s/hmwXZzdFT" type="image/avif"><img src="//:0" alt="cover" width="447" height="355" decoding="sync"></picture></div><p><code>Unlockable Item Id</code> 设置物件ID，并设置解锁时的相应事件。以上图为例，使 <code>SecretAchievement</code> 游戏物体在解锁时变为激活状态，反之亦然。</p><p>在C#中你可以使用<code>UnlockableManager</code> <a href="/naninovel-docs/zh/guide/engine-services" class="vp-link">引擎服务</a> 获取可解锁物件。</p><h2 id="可解锁资源配置" tabindex="-1">可解锁资源配置 <a class="header-anchor vp-link" href="#可解锁资源配置" aria-label="Permalink to &quot;可解锁资源配置&quot;">​</a></h2><p>在配置菜单下 (<code>Naninovel -&gt; Configuration -&gt; Unlockables</code>)，可找到资源管理器，可以将任意资源设置为可解锁物件。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+_+'" type="image/avif"><source srcset="'+w+'"><img data-imgit-loadable alt="" width="720" height="400" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABOAAIAAAABAAACHgAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABQAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAam1kYXQKCDgVI5tICGgBMkIVwAQQQQSBBQDrlGd4PfLMWYlIulrtgP9i+Cci2MJh8JBxzr+gBx6Lik6hHw44B7FYKScmUJybdEaI25r5tPbBg7QKBhgVI5tKgDIKFcAAASAABjTg5g==" type="image/avif"><img src="//:0" alt="cover" width="720" height="400" decoding="sync"></picture></div><p>该资源配置被用作内建系统使用，比如<a href="/naninovel-docs/zh/guide/unlockable-items#CG画廊" class="vp-link">CG画廊</a> 。你可以将其用于你自己的自定义系统。</p><h2 id="cg画廊" tabindex="-1">CG画廊 <a class="header-anchor vp-link" href="#cg画廊" aria-label="Permalink to &quot;CG画廊&quot;">​</a></h2><p>使用CG画廊功能，可以将任意资源在游戏内设置为可解锁物件，之后可以在标题画面的 <code>ICGGalleryUI</code> UI查看。</p>',18),X=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=wkZeszk6gm0",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:C,type:"image/avif"}),A("source",{srcset:f}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAAyAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAA6bWRhdAoJGAz+GiBAQKCAMiUVwAYYAASBAQDC0Q8SxKnzLxxwOFDNNWkJc3UGsavCF2Fue+1Q",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/wkZeszk6gm0?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),F=e('<p>默认情况，所有添加到<a href="/naninovel-docs/zh/guide/unlockable-items#可解锁资源配置" class="vp-link">可解锁资源管理器</a> 带有前缀<code>CG</code> 的资源，和 <code>MainBackground</code> 元素内的<a href="/naninovel-docs/zh/guide/backgrounds" class="vp-link">背景</a> 精灵，都会被视为可解锁物件。</p><p>要添加新的资源到CG画廊，可以在已有主背景资源路径前添加 <code>CG</code> ，如下所示：</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+G+'" type="image/avif"><source srcset="'+Q+'"><img data-imgit-loadable alt="" width="720" height="359" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAB0AAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAB8bWRhdAoIOBUji0gIaAEyaBXADDACBIQQAODTlFrCfWWFpzoihOXOkLrjtJR7uXmXkR406zDW9TsP8+dH8Wak/uLEdTIEDmMdR2rtqG5+I5Ff7r6IoCj/7Bs/lzxyMzsFmfmJZ4aoRdCsxjDie1p0lqVRHCG3bwx4" type="image/avif"><img src="//:0" alt="cover" width="720" height="359" decoding="sync"></picture></div><p>— 或者在<code>Naninovel -&gt; Resources -&gt; Unlockables</code>内使用资源管理器单独添加资源，如下所示：</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+Y+'" type="image/avif"><source srcset="'+I+'"><img data-imgit-loadable alt="" width="720" height="402" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABQAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABYbWRhdAoIOBUjm0gIaAEyRBXABBBBBIAhAODTjQxRFhb8xynT88ELGSoD4Lghayy392kwHDdWX9mdzMYvFfJ/baj85U5yCiYUL1XCoiEpLzUahAZw" type="image/avif"><img src="//:0" alt="cover" width="720" height="402" decoding="sync"></picture></div><p>两种方式均可，之后就可以使用 <a href="/zh/api/#unlock" target="_blank"><code>@unlock</code></a> 和 <a href="/zh/api/#lock" target="_blank"><code>@lock</code></a> 命令控制了。</p><p>比如，要解锁上图的 <code>CG/Map</code> 物件，使用下列命令：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@unlock</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CG/Map</span></span></code></pre></div><p>如果你用了两种方式来添加可解锁物件，可解锁物件管理器内的资源将先在CG画廊显示。可以改变该设置，通过修改<code>Naninovel/Prefabs/DefaultUI/ICGGalleryUI.CGGalleryPanel</code>路径下的内置CG画廊UI预制体的 <code>CG Gallery Panel</code> 脚本的 <code>Cg Sources</code> 参数，该脚本用于检索实际相关资源。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+W+'" type="image/avif"><source srcset="'+T+'"><img data-imgit-loadable alt="" width="450" height="403" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABDAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAWAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABLbWRhdAoIOBErNpAQ0AIyNxXAAABJwFC8gQK6A03iSPfPqwAkHlq2NiOTkP/lOUL1cuy07lcXU0dnZNRgCyIzusz0Lrb3rxA=" type="image/avif"><img src="//:0" alt="cover" width="450" height="403" decoding="sync"></picture></div><p>当有可解锁物件添加成功时（无论是否解锁），标题的按钮就会变为可用状态，可点击进行浏览。</p><p>你可以使用<a href="/naninovel-docs/zh/guide/user-interface#UI自定义" class="vp-link">自定义UI</a> 修改或替换内置<code>ICGGalleryUI</code> UI。</p><h2 id="提示" tabindex="-1">提示 <a class="header-anchor vp-link" href="#提示" aria-label="Permalink to &quot;提示&quot;">​</a></h2><p>可解锁提示系统，允许通过本地<a href="/naninovel-docs/zh/guide/managed-text" class="vp-link">托管文本</a> 来设置一套本地化文本记录。这些记录可以在之后的游戏中解锁，并通过标题菜单和游戏中的文本打字机的控制面板按钮打开名为<code>ITipsUI</code> 的UI查看。</p><p>该系统可用于游戏内置的词典/百科/成就等系统。</p>',15),U=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=CRZuS1u_J4c",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:E,type:"image/avif"}),A("source",{srcset:x}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAA4AAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABAbWRhdAoJGAz+GiBAQKCAMisVwAEEAASBAADP7YL8IBtJFIjFJfW6Q0E755CDbMuUgA4K3RslCrrviVdA",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/CRZuS1u_J4c?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),R=e(`<p>在托管文本资源路径创建名为 <code>Tips.txt</code> 的<a href="/naninovel-docs/zh/guide/managed-text" class="vp-link">托管文本</a>(<code>Resources/Naninovel/Text</code>为默认路径) 每行，代表一个独立的提示。一行的内容由，ID接冒号，提示标题，类别（可选），描述构成，中间由(<code>|</code>)隔开，如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span>Tip1ID: Tip 1 Title | Tip 1 Category | Tip 1 Description</span></span>
<span class="line"><span>Tip2ID: Tip 2 Title || Tip 2 Description</span></span>
<span class="line"><span>Tip3ID: Tip 3 Title</span></span>
<span class="line"><span>Tip4ID: Tip 4 Title | Tip 4 Category |</span></span>
<span class="line"><span>...</span></span></code></pre></div><p>你可以使 <a href="https://docs.unity3d.com/Manual/StyledText.html" class="vp-link" target="_blank" rel="noreferrer">富文本标记<span class="external-link-icon"> ↗</span></a> 并在提示的描述部分从插入 (<code>\\n</code>) 。</p><p>当 <code>Tips.txt</code> 托管文本至少有一条记录时，标题菜单和控制面板的 &quot;TIPS&quot; 按钮就会显示出来，可通过它打开相应浏览界面。 When there is at least one tip record in the <code>Tips.txt</code> managed text document, &quot;TIPS&quot; button will appear in the main menu and control panels, leading to the tips browser.</p><p>使用<a href="/zh/api/#unlock" target="_blank"><code>@unlock</code></a> 和 <a href="/zh/api/#lock" target="_blank"><code>@lock</code></a> 命令来控制提示的解锁和加锁（在脚本中ID前始终要加上 <code>Tips/</code> 前缀），如下为解锁ID为 <code>Tip1ID</code> 的提示的示例：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@unlock</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Tips/Tip1ID</span></span></code></pre></div>`,6),M=[D,X,F,U,R];function Z(z,S,V,H,N,j){return t(),i("div",null,M)}const O=a(v,[["render",Z]]);export{J as __pageData,O as default};
