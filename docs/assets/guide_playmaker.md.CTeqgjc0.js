import{_ as i,c as s,o as A,f as e,D as a,dO as t,dP as n,dQ as l,dR as o,dS as r,dT as p}from"./chunks/framework.BG74BkEs.js";const M=JSON.parse('{"title":"Playmaker","description":"","frontmatter":{},"headers":[],"relativePath":"guide/playmaker.md","filePath":"guide/playmaker.md","lastUpdated":1703963049000}'),c={name:"guide/playmaker.md"},d=l+" 1x",h=o+" 1x",m=r+" 1x",g=p+" 1x",k=t+" 1x",u=n+" 1x",y=e('<h1 id="playmaker" tabindex="-1">Playmaker <a class="header-anchor vp-link" href="#playmaker" aria-label="Permalink to &quot;Playmaker&quot;">​</a></h1><p><a href="https://assetstore.unity.com/packages/tools/visual-scripting/playmaker-368" class="vp-link" target="_blank" rel="noreferrer">PlayMaker<span class="external-link-icon"> ↗</span></a> is a popular visual scripting tool for Unity specifically designed to be friendly for non-programmers.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+d+'" type="image/avif"><source srcset="'+h+'"><img data-imgit-loadable alt="" width="720" height="298" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAACJAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAACRbWRhdAoIOBTj5pAQ0AIyfRXAFFCABIEEAO5MbQZsA6OUkruOHMbAOLsk6ETUqSrJFU/wn0XoLmjzAgQj+B+8kSi3fKPaJqC7WEva3yPLauclobY8RyqYvkm7BOyQTAnqZ6feHtNONI+CV3STdcJ1Enh+4fmve/Z3U38kM+ZK0CyfLBZ1p8XeEEyQwUkQ" type="image/avif"><img src="//:0" alt="cover" width="720" height="298" decoding="sync"></picture></div><div class="info custom-block"><p class="custom-block-title">NOTE</p><p>Extensions for third-party products serve mostly as examples on how you can integrate Naninovel with other tools. They contain bare minimum functionality and may become incompatible due to changes in third-party product. Please do not consider these extensions part of Naninovel: we are not providing any support or help on using them with Naninovel beyond the scope of sample projects.</p></div><h2 id="setup" tabindex="-1">Setup <a class="header-anchor vp-link" href="#setup" aria-label="Permalink to &quot;Setup&quot;">​</a></h2><p>Install PlayMaker following instructions from the <a href="https://hutonggames.fogbugz.com/default.asp?W11" class="vp-link" target="_blank" rel="noreferrer">official manual<span class="external-link-icon"> ↗</span></a>.</p><p>Download and import <a href="https://github.com/naninovel/samples/raw/main/unity/playmaker/NaninovelPlayMaker.unitypackage" class="vp-link" target="_blank" rel="noreferrer">PlayMaker extension package<span class="external-link-icon"> ↗</span></a>.</p><p>The custom Naninovel actions should appear in the PlayMaker actions browser under &quot;Naninovel&quot; category.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+m+'" type="image/avif"><source srcset="'+g+'"><img data-imgit-loadable alt="" width="320" height="422" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABJAAIAAAABAAACGQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAQAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEAAAABUAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZG1kYXQKCDgNPo0gIaAEMj0VwAAASBAAwede0gIjbc5X9ioAI0Ftvarcg31wAX24eDXoGDCmf4UrCfz1SJBsjfAXRrF1o/x7ZrIe/6syCgUYDT6NKjIKFcAAASAAArlXcQ==" type="image/avif"><img src="//:0" alt="cover" width="320" height="422" decoding="sync"></picture></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor vp-link" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p>The following video demonstrates using PlayMaker FSM (finite state machine) to initialize Naninovel engine, preload and play a scenario script.</p>',11),v=a("div",{class:"imgit-youtube","data-imgit-container":""},[a("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=N856vi18XVU",style:{position:"absolute"}},"Watch on"),a("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[a("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),a("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[a("picture",{style:{width:"100%"}},[a("source",{srcset:k,type:"image/avif"}),a("source",{srcset:u}),a("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),a("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[a("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAA1AAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAA9bWRhdAoJGAz+GiBAQKCAMigVwAggAASBAADPrs6hx/RVvccQhNFgjeK+fMrZFvkp3aaevTHSsZKA",type:"image/avif"}),a("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),a("div",{class:"imgit-youtube-player",hidden:""},[a("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/N856vi18XVU?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),b=e(`<h3 id="events" tabindex="-1">Events <a class="header-anchor vp-link" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h3><p>Some of the essential Naninovel events can be automatically routed to PlayMaker FSMs. For this, create a global <a href="https://hutonggames.fogbugz.com/default.asp?W148" class="vp-link" target="_blank" rel="noreferrer">user event<span class="external-link-icon"> ↗</span></a> with an appropriate name and use it inside an FSM. Following are the available event names:</p><ul><li><code>Naninovel/Engine/OnInitialized</code></li><li><code>Naninovel/ScriptPlayer/OnPlay</code></li><li><code>Naninovel/ScriptPlayer/OnStop</code></li><li><code>Naninovel/StateManager/OnGameSaveStarted</code></li><li><code>Naninovel/StateManager/OnGameSaveFinished</code></li><li><code>Naninovel/StateManager/OnGameLoadStarted</code></li><li><code>Naninovel/StateManager/OnGameLoadFinished</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextStarted</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextFinished</code></li><li><code>Naninovel/LocalizationManager/OnLocaleChanged</code></li></ul><p>It&#39;s also possible to broadcast custom PlayMaker events from naninovel scripts using <code>@playmaker</code> command:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span></span></code></pre></div><p>— will invoke a global user event named &quot;EventName&quot; in all the active FSMs on scene.</p><p>The command also allows sending events to specific FSMs by using <code>fsm</code> and <code>object</code> parameters. The first parameter allows specifying FSM names, which should receive the event, eg:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> fsm:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Fsm1,Fsm2</span></span></code></pre></div><p>— will invoke an event named &quot;EventName&quot; for FSMs with name &quot;Fsm1&quot; and &quot;Fsm2&quot;.</p><p>When <code>object</code> parameter is specified, the event will only be sent to FSMs, that are applied to game objects, which has corresponding names, eg:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> object:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Obj1,Obj2</span></span></code></pre></div><p>— will invoke an event named &quot;EventName&quot; for all the FSMs, that are attached to game objects with names &quot;Obj1&quot; and &quot;Obj2&quot;.</p><p>You can as well combine <code>fsm</code> and <code>object</code> parameters to farther filter the FSMs, that should receive the event.</p><h3 id="global-variables" tabindex="-1">Global Variables <a class="header-anchor vp-link" href="#global-variables" aria-label="Permalink to &quot;Global Variables&quot;">​</a></h3><p>It&#39;s possible to access a global PlayMaker variable in Naninovel scripts with the following custom <a href="/naninovel-docs/guide/script-expressions.html#expression-functions" class="vp-link">expression functions</a> available in the extension package:</p><ul><li><code>GetPlayMakerGlobalVariable(&quot;variableName&quot;)</code> — retrieves a variable of a simple type (int, float, string, etc) with the &quot;variableName&quot; name</li><li><code>GetPlayMakerGlobalArray(&quot;variableName&quot;, arrayIndex)</code> — retrieves a value stored at &quot;arrayIndex&quot; index of an array variable with the &quot;variableName&quot; name</li></ul><p>Given you have a &quot;Score&quot; integer and &quot;FinishedRoutes&quot; bool array global PlayMaker variables, you can use them in Naninovel scripts as follow:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> My score is </span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{GetPlayMakerGlobalVariable(&quot;Score&quot;)}</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> GetPlayMakerGlobalArray(&quot;FinishedRoutes&quot;,2)</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Third route (second array index) is completed.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@else</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Not yet.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@endif</span></span></code></pre></div><p>To assign a PlayMaker&#39;s global variable value from Naninovel script, use <code>@pset</code> command as following:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Assign &quot;10&quot; to PlayMaker&#39;s integer global variable named &quot;Score&quot;.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@pset</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> name:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Score</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> value:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Assign &quot;Banana&quot; at 10th index of &quot;Groceries&quot; PlayMaker&#39;s global array.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@pset</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> name:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Groceries</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> index:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">10</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> value:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Banana</span></span></code></pre></div><h2 id="ide-extension" tabindex="-1">IDE Extension <a class="header-anchor vp-link" href="#ide-extension" aria-label="Permalink to &quot;IDE Extension&quot;">​</a></h2><p>To add IDE support for playmaker-specific commands distributed with the extension package (eg, <code>@playmaker</code>), see the <a href="/naninovel-docs/guide/custom-commands#ide-metadata" class="vp-link">guide on generating metadata for custom commands</a>.</p>`,22),B=[y,v,b];function f(C,w,E,_,F,q){return A(),s("div",null,B)}const G=i(c,[["render",f]]);export{M as __pageData,G as default};
