import{_ as a,c as t,o as i,f as e,D as A,a as s,fs as c,ft as o,fu as l,fv as n,fw as d,fx as r,h4 as p,h5 as h,fG as g,fH as m,fI as u,fJ as b}from"./chunks/framework.BG74BkEs.js";const L=JSON.parse('{"title":"Пользовательский интерфейс","description":"","frontmatter":{},"headers":[],"relativePath":"ru/guide/user-interface.md","filePath":"ru/guide/user-interface.md","lastUpdated":1698833889000}'),I={name:"ru/guide/user-interface.md"},k=d+" 1x",y=r+" 1x",v=c+" 1x",U=o+" 1x",B=p+" 1x",f=h+" 1x",_=l+" 1x",w=n+" 1x",Q=g+" 1x",C=m+" 1x",E=u+" 1x",G=b+" 1x",Y=e('<h1 id="пользовательскии-интерфеис" tabindex="-1">Пользовательский интерфейс <a class="header-anchor vp-link" href="#пользовательскии-интерфеис" aria-label="Permalink to &quot;Пользовательский интерфейс&quot;">​</a></h1><p>Naninovel поставляется с несколькими встроенными UI: главное меню, настройки игры, меню сохранения-загрузки, панель бэклога, галерея CG, советы и многие другие.</p><p>Каждый из встроенных UI можно отключить или настроить; дополнительные сведения см. в руководстве по <a href="/naninovel-docs/ru/guide/user-interface#кастомизация-UI" class="vp-link">кастомизации UI</a>.</p><h2 id="адаптивная-верстка-ui" tabindex="-1">Адаптивная вёрстка UI <a class="header-anchor vp-link" href="#адаптивная-верстка-ui" aria-label="Permalink to &quot;Адаптивная вёрстка UI&quot;">​</a></h2><p>Все встроенные интерфейсы реализованы с адаптивной вёрсткой. Это позволяет UI оставаться пригодным для использования на всех платформах, независимо от разрешения экрана.</p>',5),x=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"423"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-b6bddf8a0c6f2ba68dcdc1bc65db0c09.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-b6bddf8a0c6f2ba68dcdc1bc65db0c09.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABkAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABsbWRhdAoGGBUjo0AQMloVwAQQAQSEAADYbLzyRnQcYIjHeCQkh8tthmanANN4ZhWe3dPpq8xme0pFP4kib2buF19tyyBgghOUPJkJorsEEBn7LDOeEutV532Py8niM2dUwEUahLPBv0A=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"423",decoding:"sync"})])],-1),F=A("h2",{id:"переключение-ui",tabindex:"-1"},[s("Переключение UI "),A("a",{class:"header-anchor vp-link",href:"#переключение-ui","aria-label":'Permalink to "Переключение UI"'},"​")],-1),W=A("p",null,"Функция переключения пользовательского интерфейса позволяет пользователю скрывать/показывать UI целиком.",-1),V=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"403"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-e267c4ab3654efbfaf611011502de79f.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-e267c4ab3654efbfaf611011502de79f.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABaAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABibWRhdAoGGBUjm0AQMlAVwAggAASBAAC4kawlVY86niok2RNpjz4+s3i8I7oQqzJDp+ABmdgWFteJJovXeFHN7hsZMdpid0t7z5ATWqDC87enS4T6QnEJQuNBidHg8A==",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"403",decoding:"sync"})])],-1),M=e('<p>Активируйте ввод <code>ToggleUI</code> (клавиша <code>Space</code> по умолчанию для автономного модуля ввода) или используйте кнопку <code>HIDE</code> на панели управления, чтобы скрыть/показать UI.</p><p>Когда пользовательский интерфейс скрыт, ввод <code>Continue</code> или щелчок мыши (касание экрана) также вернёт UI.</p><h2 id="кастомизация-ui" tabindex="-1">Кастомизация UI <a class="header-anchor vp-link" href="#кастомизация-ui" aria-label="Permalink to &quot;Кастомизация UI&quot;">​</a></h2><p>Функция настройки UI позволяет добавлять UI, изменить или полностью заменить любой из встроенных элементов UI, таких как меню заголовка, меню настроек, бэклог принтера и т.д.</p><p>Заметьте, что текстовые принтеры и обработчики выборов реализованы через акторов интерфейса и настраиваются по-другому; см. соответствующую документацию по (<a href="/naninovel-docs/ru/guide/text-printers" class="vp-link">текстовым принтерам</a>, <a href="/naninovel-docs/ru/guide/choices" class="vp-link">обработчикам выборов</a>) для получения дополнительной информации.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Прежде чем пытаться создавать пользовательские UI или изменять существующие, сначала убедитесь, что вы знакомы с <a href="https://docs.unity3d.com/Packages/com.unity.ugui@latest" class="vp-link" target="_blank" rel="noreferrer">системой UI Unity<span class="external-link-icon"> ↗</span></a> (uGUI). Хотя ниже представлены видеоуроки и примеры проектов по настройке пользовательского интерфейса, пожалуйста, имейте в виду, что мы не предоставляем никаких дополнительных рекомендаций или поддержку встроенных инструментов Unity; обратитесь к странице <a href="/naninovel-docs/ru/support/#unity-support" class="vp-link">поддержки</a> для получения дополнительной информации.</p></div><p>Для добавления пользовательского интерфейса или изменения (отключения) встроенного, используйте менеджер ресурсов UI, доступный через меню редактора <code>Naninovel -&gt; Resources -&gt; UI</code>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+k+'" type="image/avif"><source srcset="'+y+'"><img data-imgit-loadable alt="" width="720" height="529" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABPAAIAAAABAAACHwAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAGgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABoAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAa21kYXQKCDgVI8tICGgBMkMVwAQQQQSBBADGj8DicT4xsfuvbprHgMmBZKffZtRFrY+Bde2R1mRzoKt+BrUGX4UQG9qVufnOcfiPC8tgXrhEx5Y/CgYYFSPLSoAyChXAAAEgAAY04OY=" type="image/avif"><img src="//:0" alt="cover" width="720" height="529" decoding="sync"></picture></div><p>Когда движок инициализируется, он создает экземпляры всех префабов UI, назначенных в диспетчере ресурсов.</p><p>Чтобы показать или скрыть любой из UI, перечисленных в диспетчере ресурсов, используйте команды <a href="/ru/api/#showui" target="_blank"><code>@showUI</code></a> и <a href="/ru/api/#hideui" target="_blank"><code>@hideUI</code></a> соответственно.</p><h3 id="добавление-пользовательских-ui" tabindex="-1">Добавление пользовательских UI <a class="header-anchor vp-link" href="#добавление-пользовательских-ui" aria-label="Permalink to &quot;Добавление пользовательских UI&quot;">​</a></h3><p>Чтобы добавить новый UI, создайте префаб через контекстное меню ассета <code>Create -&gt; Naninovel -&gt; Custom UI</code> и добавьте его в список ресурсов UI. Затем он будет выведен вместе с другими префабами UI при инициализации движка.</p><p>В следующем видеоуроке показано, как добавить пользовательский интерфейс календаря со специальными анимациями раскрытия и скрытия. Календарь будет отображать дату на основе <a href="/naninovel-docs/ru/guide/custom-variables" class="vp-link">пользовательской переменной</a>, которая может быть изменена с помощью сценариев Naninovel и сохранена вместе с игрой. Календарь будет автоматически обновляться при изменении переменной. Все это достигается без каких-либо сценариев C#.</p>',13),N=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=wrAm-cwPXy4",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:v,type:"image/avif"}),A("source",{srcset:U}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABQAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABYbWRhdAoJGBUjm0QICBQQMkMVwBdcQgSABADicT3SQxE7stfmEn3df8I1z2CBcaikvdc2Y+k7FCpDaRgyyQTKqhyD/fCov6ixQurkwm4vLi/5njEo",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/wrAm-cwPXy4?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),X=e('<div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>Проект Unity, показанный в приведенном выше видеоуроке, доступен <a href="https://github.com/Naninovel/CustomUIExample" class="vp-link" target="_blank" rel="noreferrer">на GitHub<span class="external-link-icon"> ↗</span></a>. Вы можете <a href="https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository" class="vp-link" target="_blank" rel="noreferrer">клонировать репозиторий<span class="external-link-icon"> ↗</span></a> с помощью Git-клиента или <a href="https://github.com/Naninovel/CustomUIExample/archive/master.zip" class="vp-link" target="_blank" rel="noreferrer">загрузить его в виде zip-архива<span class="external-link-icon"> ↗</span></a>. Имейте в виду, что пакет Naninovel не распространяется вместе с проектом, следовательно, ошибки компиляции будут возникать после его первого открытия; импортируйте Naninovel из хранилища ассетов, чтобы исправить эти ошибки.</p></div><div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>Другой, более продвинутый пример добавления UI инвентаря с версткой сетки, разбиением на страницы и перетаскиваемым окном можно найти в проекте <a href="https://github.com/Naninovel/Inventory" class="vp-link" target="_blank" rel="noreferrer">примера инвентаря на GitHub<span class="external-link-icon"> ↗</span></a>.</p><p>В частности, скрипты, связанные с UI, хранятся в директоряих <a href="https://github.com/Naninovel/Inventory/tree/master/Assets/NaninovelInventory/Runtime/UI" class="vp-link" target="_blank" rel="noreferrer">Runtime/UI<span class="external-link-icon"> ↗</span></a>, а префабы в <a href="https://github.com/Naninovel/Inventory/tree/master/Assets/NaninovelInventory/Prefabs" class="vp-link" target="_blank" rel="noreferrer">Prefabs<span class="external-link-icon"> ↗</span></a>.</p></div><p>Когда вы создаете новый пользовательский префаб UI через контекстное меню, jy будет иметь компонент <code>Custom UI</code>, прикрепленный к корневому объекту. Этот компонент (или, скорее, тот факт, что компонент реализует интерфейс <code>IManagedUI</code>) необходим для того, чтобы префаб был принят движком в качестве UI.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+B+'" type="image/avif"><source srcset="'+f+'"><img data-imgit-loadable alt="" width="499" height="466" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA0AAIAAAABAAACBAAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAFgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAABYAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAT21kYXQKCDgRL1aQENACMigVwAQQQQSBBAC8gQnS6AngLL9yDN760KcJTyvEwKyNyzf2hxclHDXgCgUYES9WlTIKFcAAASAAA8eEOg==" type="image/avif"><img src="//:0" alt="cover" width="499" height="466" decoding="sync"></picture></div><p>Свойство <code>Disable Interaction</code> позволяет навсегда отключить взаимодействие с UI, независимо от его видимости. Требует компонент <code>Canvas Group</code> для того же игрового объекта.</p><p>Если включен параметр <code>Visible On Awake</code>, UI будет виден при его создании (сразу после инициализации движка), и наоборот.</p><p>Когда включена функция <code>Control Opacity</code> и компонент <code>Canvas Group</code> присоединен к тому же игровому объекту, свойство <code>Alpha</code> компонента <code>Canvas Group</code> будет изменено синхронно с текущим состоянием видимости элемента UI. Затем <code>Fade Duration</code> будет управлять временем (длительностью в секундах) анимации затухания непрозрачности. Если вы хотите реализовать свой собственный эффект, для управления состоянием видимости элемента UI (например, анимация слайдов вместо затухания непрозрачности), отключите свойство <code>Control Opacity</code> и используйте события Unity <code>On Show</code> и <code>On Hide</code> для реакции на изменения видимости.</p><p>Если вы хотите поддерживать навигацию по UI геймпадом или клавиатурой, назначьте игровой объект с взаимодействующим компонентом (например, <code>Button</code>) свойству <code>Focus Object</code>. Затем этот объект будет автоматически сфокусирован, когда UI станет видимым, что позволит перемещаться по другим взаимодействующим объектам с помощью геймпада и/или клавиатуры. См. <a href="https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/script-SelectableNavigation.html" class="vp-link" target="_blank" rel="noreferrer">руководство по навигации UI Unity<span class="external-link-icon"> ↗</span></a> для получения дополнительной информации о том, как настроить поведение навигации.</p><p>Когда назначается<code> Focus Object</code>, свойство <code>Focus Mode</code> позволяет выбрать, когда фокусировать объект: режим <code>Visibility</code> фокусирует его сразу после того, как UI становится видимым, а <code>Navigation</code> откладывает фокусировку до тех пор, пока игрок не активирует навигационную клавишу на геймпаде (левый джойстик или D-pad) или клавиатуре (клавиши со стрелками).</p><p>События Unity <code>On Show</code> и <code>On Hide</code> позволяют привязывать пользовательские обработчики реагировать на изменения в интерфейсе видимость. Например, вы можете подключить триггеры <code>Animator</code> для запуска пользовательских анимаций, когда UI становится видимым, и наоборот.</p><p>Если включена функция <code>Hide On Load</code>, UI будет автоматически скрыт, когда движок начнет операцию загрузки. Обычно это происходит при загрузке другого сценария Naninovel или выходе из главного меню.</p><p>Включение функции <code>Save Visibility State</code> сделает состояние видимости UI постоянным, так что когда игрок загружает сохраненную игру, UI будет находиться в том же состоянии (видимом или скрытом), что и при сохранении игры.</p><p><code>Block Input When Visible</code> позволяет отключить <a href="/naninovel-docs/ru/guide/input-processing" class="vp-link">обработку вводных данных</a>, когда UI становится видимым. Это полезно для предотвращения использования игроком различных горячих клавиш (скрытие UI, продолжение чтения и т.д.) во время взаимодействия с UI. <code>Allowed Samplers</code> позволяют добавлять исключения к заблокированным входам; например, вы можете добавить имя ввода <code>ToggleUI</code> в список, позволяя игроку переключать UI, при этом предотвращая активацию любых других вводов.</p><p>Включение <code>Modal UI</code> заставляет все другие UI игнорировать взаимодействие, пока данный UI виден. Это похоже на <code>Block Input When Visible</code>, но влияет на взаимодействие на основе событий (щелчки мыши, прикосновения, навигация по UI) вместо прямой обработки ввода.</p><p>Несколько других компонентов также будут добавлены по умолчанию при создании UI:</p><ul><li><code>Canvas Group</code> позволяет скрывать UI, изменяя непрозрачность (контролируется с помощью <code>Fade Duration</code>) и позволяет UI игнорировать взаимодействие с пользователем, когда это необходимо.</li><li><code>Canvas Scaler</code> автоматически масштабирует вёрстку в соответствии с текущим разрешением дисплея.</li><li><code>Graphic Raycaster</code> позволяет игроку взаимодействовать с кнопками и другими взаимодействующими элементами внутри холста UI.</li></ul><p>Вы можете изменить или удалить любой из вышеперечисленных компонентов по своему усмотрению.</p><h3 id="отключение-встроенных-ui" tabindex="-1">Отключение встроенных UI <a class="header-anchor vp-link" href="#отключение-встроенных-ui" aria-label="Permalink to &quot;Отключение встроенных UI&quot;">​</a></h3><p>Чтобы отключить встроенный элемент UI, удалите соответствующую запись из списка ресурсов UI, и префаб не будет использован при инициализации движка.</p><h3 id="модификация-встроенных-ui" tabindex="-1">Модификация встроенных UI <a class="header-anchor vp-link" href="#модификация-встроенных-ui" aria-label="Permalink to &quot;Модификация встроенных UI&quot;">​</a></h3><p>Если вы хотите изменить существующий встроенный (базовый) префаб UI, вы можете найти его в папке пакета <code>Naninovel/Prefabs/DefaultUI</code>.</p><p>Если это возможно, <strong>пожалуйста, воздержитесь от непосредственного редактирования встроенных префабов</strong>, чтобы предотвратить проблемы при обновлении пакета. Взамен этого, лучше создать новый префаб из шаблона в контекстном меню ассета <code>Create -&gt; Naninovel -&gt; Default UI -&gt; ...</code> или вручную дублировать префаб, который вы хотите изменить (Ctrl/Cmd+D), и переместите его из папки пакета. Затем назначьте созданный/измененный префаб существующей записи (поле (<code>Object</code>) в диспетчере ресурсов UI.</p><p>В следующем видеоуроке вы узнаете, как переопределить встроенное главное меню. Он также покажет, как использовать скрипт главного меню для добавления фона и специального эффекта при входе в главное меню; для этого не используется сценарий C#.</p>',23),Z=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=hqhfhXzQkdk",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:_,type:"image/avif"}),A("source",{srcset:w}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABNAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABVbWRhdAoJGBUjm0QICBQQMkAVwAAASEEQ3kSJZJMnHKp2oAq7QqUlOZ9PwKKxFcs6u48sMAZHjLjLIInDCPLpDFVVmQzMZdssQZViPN1MlUoo",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/hqhfhXzQkdk?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),R=e(`<div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>Проект Unity, показанный в приведенном выше видеоуроке, доступен <a href="https://github.com/Naninovel/CustomUIExample" class="vp-link" target="_blank" rel="noreferrer">на GitHub<span class="external-link-icon"> ↗</span></a>. Вы можете <a href="https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository" class="vp-link" target="_blank" rel="noreferrer">клонировать репозиторий<span class="external-link-icon"> ↗</span></a> с помощью Git-клиента или <a href="https://github.com/Naninovel/CustomUIExample/archive/master.zip" class="vp-link" target="_blank" rel="noreferrer">загрузить его в виде zip-архива<span class="external-link-icon"> ↗</span></a>. Имейте в виду, что пакет Naninovel не распространяется вместе с проектом, следовательно, ошибки компиляции будут возникать после его первого открытия; импортируйте Naninovel из хранилища ассетов, чтобы исправить эти ошибки.</p></div><p>При создании нового префаба с нуля обязательно прикрепите компонент, реализующий интерфейс UI, который вы собираетесь переопределить. Этот компонент должен быть присоединен к корневому объекту префаба.</p><p>All the UI interfaces are stored under <code>Naninovel.UI</code> namespace:</p><p>Все элементы UI хранятся в пространстве имён <code>Naninovel.UI</code>:</p><table><thead><tr><th>Интерфейс</th><th>Соответствующий UI</th></tr></thead><tbody><tr><td>IBacklogUI</td><td>Бэклог принтера.</td></tr><tr><td>ILoadingUI</td><td>Панель, показываемая при загрузке игры.</td></tr><tr><td>IMovieUI</td><td>UI, используемый для воспроизведения видеороликов.</td></tr><tr><td>ISaveLoadUI</td><td>Панель загрузки и сохранения.</td></tr><tr><td>ISceneTransitionUI</td><td>Обрабатывает переходы сцены(командами <a href="/ru/api/#starttrans" target="_blank"><code>@startTrans</code></a> и <a href="/ru/api/#finishtrans" target="_blank"><code>@finishTrans</code></a>).</td></tr><tr><td>ISettingsUI</td><td>Панель игровых настроек.</td></tr><tr><td>ITitleUI</td><td>Главное меню игры.</td></tr><tr><td>IExternalScriptsUI</td><td>UI браузера внешних сценариев (функция модов коммьюнити).</td></tr><tr><td>IVariableInputUI</td><td>Форма ввода для назначения пользовательским переменных произвольного текста(используется командой <a href="/ru/api/#input" target="_blank"><code>@input</code></a>).</td></tr><tr><td>IConfirmationUI</td><td>Панель UI, используемая для подтверждения важных команд (напр., при выходе в главное меню или удалении слота сохранения).</td></tr><tr><td>ICGGalleryUI</td><td>Браузер разблокируемых элементов <a href="/naninovel-docs/ru/guide/unlockable-items#галерея-CG" class="vp-link">галереи CG</a>.</td></tr><tr><td>ITipsUI</td><td>Браузер разблокируемых <a href="/naninovel-docs/ru/guide/unlockable-items#подсказки" class="vp-link">подсказок</a>.</td></tr><tr><td>IRollbackUI</td><td>Индикатор функции отката состояния.</td></tr><tr><td>IContinueInputUI</td><td>Полноэкранный невидимый слой UI, расположенный в нижней части стека UI и используемый для активации триггера <code>continue input</code> при нажатии или прикосновении.</td></tr></tbody></table><p>Чтобы UI поддерживал видимость (видимый при пробуждении, время затухания) и параметры взаимодействия (отключение взаимодействие), также прикрепите компонент <code>Canvas Group</code> к тому же объекту.</p><p>Если вы знакомы с работой в C# и хотите переопределить базовую логику UI, <a href="https://docs.unity3d.com/Manual/CreatingAndUsingScripts" class="vp-link" target="_blank" rel="noreferrer">создайте новый компонент<span class="external-link-icon"> ↗</span></a>, реализуйте интерфейс <code>IManagedUI</code> (вы можете свободно наследовать компонент от <code>CustomUI</code> или <code>ScriptableUIBehaviour</code> для выполнения всех требований к интерфейсу) и прикрепите созданный пользовательский компонент. В папке <code>Naninovel/Runtime/UI</code> вы можете найти примеры реализаций встроенных UI. Вот пример минимальной реализации пользовательского компонента UI:</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UniRx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCustomUI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ScriptableUIBehaviour</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Naninovel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IManagedUI</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UniTask</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InitializeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UniTask.CompletedTask;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="выполнение-скрипта-на-событии-unity" tabindex="-1">Выполнение скрипта на событии Unity <a class="header-anchor vp-link" href="#выполнение-скрипта-на-событии-unity" aria-label="Permalink to &quot;Выполнение скрипта на событии Unity&quot;">​</a></h2><p>При создании UI вы можете выполнить некоторые команды или начать воспроизведение определенного сценария Naninovel в ответ на некоторые события (например, [нажатие кнопки]). (<a href="https://docs.unity3d.com/Manual/script-Button.html" class="vp-link" target="_blank" rel="noreferrer">https://docs.unity3d.com/Manual/script-Button.html<span class="external-link-icon"> ↗</span></a>)).</p><p>Добавьте компонент <code>Play Script</code> к игровому объекту и либо выберите существующий сценарий Naninovel, либо запишите команды прямо в поле текстовой области; затем маршрутизируйте <a href="https://docs.unity3d.com/Manual/UnityEvents.html" class="vp-link" target="_blank" rel="noreferrer">событие Unity<span class="external-link-icon"> ↗</span></a> какого-либо другого компонента для вызова метода <code>Play()</code> в компоненте <code>Play Script</code>. Сценарий будет выполнен, когда событие будет запущено в режиме воспроизведения. Приведенный ниже пример скрывает UI при нажатии кнопки.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+Q+'" type="image/avif"><source srcset="'+C+'"><img data-imgit-loadable alt="" width="496" height="521" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABEAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAYAAAAGQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABMbWRhdAoIOBEvhpAQ0AIyOBXAAABIAQBCeCEv6LicK6SiUJg6L1NaI2pZdagVUp6L9sFkKkhiViUZvM4F/brCBXYxpy6CxN91" type="image/avif"><img src="//:0" alt="cover" width="496" height="521" decoding="sync"></picture></div><p>Также можно ссылаться на аргументы события Unity в тексте скрипта с выражением <code>{arg}</code>; поддерживаемые типы аргументов: string, integer, float и boolean. Ниже приведен пример, демонстрирующий выполнение дрожания камеры и воспроизведение звукового эффекта, когда логическое событие Unity является положительным, и воспроизведение фонового размышления, когда оно отрицательно.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+E+'" type="image/avif"><source srcset="'+G+'"><img data-imgit-loadable alt="" width="486" height="455" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABCAAIAAAABAAACEgAAABYAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAFgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAFGlzcGUAAAAAAAAAGAAAABYAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAYG1kYXQKCDgRL1aQENACMjYVwAggQQSAAQCrV0TGgQpVI8LYSd0+cbuLEyPvaVs97N478buqdVQA86GUmXJc+yQcRQV1r3AKCBgRL1aYCBAVMgoVwAABIAADx4Q6" type="image/avif"><img src="//:0" alt="cover" width="486" height="455" decoding="sync"></picture></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Команды условного блока (if, else, elseif, endif) в тексте скрипта не поддерживаются.</p></div><p>Когда существующий сценарий Naninovel выбирается с помощью выпадающего списка, область текста скрипта будет проигнорирована, и выбранный сценарий Naninovel будет воспроизводиться <strong>вместо</strong> выполняемого в настоящее время; в случае, если вы хотите дополнительно выполнить некоторые команды, не перебивая воспроизведение текущего сценария, используйте область текста скрипта.</p>',16),S=[Y,x,F,W,V,M,N,X,Z,R];function T(D,P,H,j,z,O){return i(),t("div",null,S)}const q=a(I,[["render",T]]);export{L as __pageData,q as default};
