import{_ as s,c as e,o as i,f as a,D as A,av as n,aw as t,ax as l,ay as p,ga as c,gb as o,gc as d,gd as r,aH as h,aI as g}from"./chunks/framework.BG74BkEs.js";const R=JSON.parse('{"title":"背景","description":"","frontmatter":{},"headers":[],"relativePath":"ja/guide/backgrounds.md","filePath":"ja/guide/backgrounds.md","lastUpdated":1698833889000}'),k={name:"ja/guide/backgrounds.md"},m=l+" 1x",u=p+" 1x",B=c+" 1x",y=o+" 1x",b=d+" 1x",C=r+" 1x",v=n+" 1x",_=t+" 1x",E=h+" 1x",f=g+" 1x",D=a('<h1 id="背景" tabindex="-1">背景 <a class="header-anchor vp-link" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h1><p><a href="/naninovel-docs/ja/guide/characters" class="vp-link">キャラクター</a> とは異なり、背景はシーンの <em>back</em> レイヤーを表すために使用されるアクターです。ロケーション、シーン、ランドスケープ、その他常にキャラクターの <em>背後に</em> 表示される必要があるものです。</p><p>背景アクターは、名前、外観、可視性、および形状（位置、回転、スケール）で定義されます。 外観、可視性、形状は、時間をかけて変化させることもできます。</p><p>背景の動作は、コンテキストメニュー <code>Naninovel -&gt; Configuration -&gt; Backgrounds</code> から設定できます。使用可能なオプションについては、 <a href="/naninovel-docs/ja/guide/configuration#backgrounds" class="vp-link">コンフィグガイド</a>を参照してください。背景のリソースマネージャーは、コンテキストメニュー <code>Naninovel -&gt; Resources -&gt; Backgrounds</code> からアクセスできます。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+m+'" type="image/avif"><source srcset="'+u+`"><img data-imgit-loadable alt="" width="720" height="417" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABKAAIAAAABAAACGgAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABUAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZm1kYXQKCDgVI6NICGgBMj4VwAggggSIQADrlE7afICQtApILRfYnIvWieyonup0BZqQcvARUT1Rfyd5EarD31jDrIm2WCNXKWnWyWfw8AoGGBUjo0qAMgoVwAABIAAGNODm" type="image/avif"><img src="//:0" alt="cover" width="720" height="417" decoding="sync"></picture></div><p>大量の背景がありエディターメニューから割り当てるのが大変な場合は、 <code>Resources/Naninovel/Backgrounds</code> フォルダーに、対応するアクターIDのフォルダでグループ分けしてドロップすることもできます。たとえば、 &quot;MainBackground&quot; IDを持つ背景アクターの外観を追加するには、テクスチャ（スプライト）を <code>Resources/Naninovel/Backgrounds/MainBackground</code> フォルダーに保存すると、自動的にスクリプトで使用できるようになります。</p><p>必要に応じて、外観リソースをサブフォルダで整理できます。 その場合、naninovelスクリプトで参照するにはスラッシュ (<code>/</code>) を使用します。 たとえば、 <code>Resources/Naninovel/Backgrounds/MainBackground/Events/CG251</code> に保存された外観テクスチャは、<code>Events/CG251</code> でスクリプトから参照できます。</p><p><a href="/naninovel-docs/ja/guide/resource-providers#addressable" class="vp-link">addressable asset system</a> を使用して手動でリソースを公開することもできます。アセットを公開するには、使用するパスと同じアドレスを &quot;Resources/&quot; の部分を除いて、上記の方法で割り当てます。たとえば、 &quot;Beach&quot; の外観を &quot;MainBackground&quot; で公開するには、次のアドレスにクリップアセットを割り当てます: <code>Naninovel/Backgrounds/MainBackground/Beach</code>。 addressable 機能はデフォルトではエディターで使用できないことに注意してください。リソースプロバイダーのコンフィグメニューで <code>Enable Addressable In Editor</code> プロパティを有効にすることで許可できます。</p><p>naninovel スクリプトでは、背景は基本的に <a href="/ja/api/#back" target="_blank"><code>@back</code></a> コマンドで操作します:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; メイン背景の外観に \`River\` を設定。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> River</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 上記に加えてトランジションエフェクト \`RadialBlur\` を使用。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> River.RadialBlur</span></span></code></pre></div><p>従来のビジュアルノベルゲームの仕組みに合わせ、背景の扱いはキャラクターとは少し異なります。ほとんどの場合、シーンに背景アクターが一つ存在し、都度変化します。スクリプトで同じアクターIDを繰り返す手間を省くために、背景の外観とトランジションの種類（オプション）のみを無名パラメーターとして記述することができます。これは <code>MainBackground</code> アクターを使用するものとみなされます。それ以外の場合、背景アクターのIDを <code>id</code> パラメータで明示的に指定できます。</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; \`Night\` と \`Day\` の外観（ビデオクリップ）を持つバックグラウンドアクター \`CityVideo\` があるとします。</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; \`Day\` のクリップを動画背景として再生。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">CityVideo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 波及エフェクトを使用して \`Night\` クリップに切り替える。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Night.Ripple</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">CityVideo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 動画背景を隠す。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@hide</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CityVideo</span></span></code></pre></div><p>メインの背景アクターレコードは、デフォルトで背景リソースマネージャーに作成され、名前を変更したり削除したりすることはできません。ただし、メイン背景のパラメーター（実装、ピボット、PPUなど）は自由に変更できます。</p><h2 id="ポーズ" tabindex="-1">ポーズ <a class="header-anchor vp-link" href="#ポーズ" aria-label="Permalink to &quot;ポーズ&quot;">​</a></h2><p>全ての背景には <code>Poses</code> プロパティがあり、ステート (ポーズ) の名前を指定できます。</p><p>ポーズ名を <a href="/ja/api/#back" target="_blank"><code>@back</code></a> コマンドの外観として使用すると、コマンドパラメーターで個別に指定する代わりに、ポーズステートで指定されたすべてのパラメーターを一度に適用できます。</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; \`Day\` ポーズがメインの背景として定義されているとして、</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; ポーズステートで指定されたすべてのパラメータを適用します。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 上記に加えて、\`City\` ID の背景アクターを3秒かけて \`DropFade\` トランジションで表示します。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">City</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> transition:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">DropFade</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> time:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">3</span></span></code></pre></div><p>ポーズを外観として使用する場合でも、個々のパラメータは上書きできます。例：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; \`Day\` ポーズがメインの背景として定義されているとして、</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; ポーズステートで指定されたすべてのパラメータを色味を除いて適用します。</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 色味はコマンドで上書きします。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> tint:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">#ff45cb</span></span></code></pre></div><h2 id="スプライト背景" tabindex="-1">スプライト背景 <a class="header-anchor vp-link" href="#スプライト背景" aria-label="Permalink to &quot;スプライト背景&quot;">​</a></h2><p>背景アクターのスプライト実装は、最も一般的でシンプルです。背景の外観は単一の<a href="https://docs.unity3d.com/Manual/Sprites" class="vp-link" target="_blank" rel="noreferrer">スプライト<span class="external-link-icon"> ↗</span></a>アセットで表します。スプライトのソースとして、 <code>.jpg</code> または <code>.png</code> 画像が使用できます。</p><h2 id="動画背景" tabindex="-1">動画背景 <a class="header-anchor vp-link" href="#動画背景" aria-label="Permalink to &quot;動画背景&quot;">​</a></h2><p>動画の背景は、<a href="https://docs.unity3d.com/Manual/class-VideoClip" class="vp-link" target="_blank" rel="noreferrer">ビデオクリップ<span class="external-link-icon"> ↗</span></a> アセットを使用して外観を表します。</p><p>動画背景はエディターGUIからのみ操作できます。</p><p>各プラットフォームでサポートされている動画形式については <a href="https://docs.unity3d.com/Manual/VideoSources-FileCompatibility.html" class="vp-link" target="_blank" rel="noreferrer">動画ソースについてのUnityドキュメント<span class="external-link-icon"> ↗</span></a> を参照してください。</p><p>参考までに、WebGLデモで使用されている背景動画クリップの詳細なビデオパラメータを以下に示します。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span>コンテナ : MPEG-4</span></span>
<span class="line"><span>コンテナプロフィール : Base Media</span></span>
<span class="line"><span>コンテナコーデックID : isom (isom/iso2/avc1/mp41)</span></span>
<span class="line"><span>フォーマット : AVC</span></span>
<span class="line"><span>フォーマット/情報 : Advanced Video Codec</span></span>
<span class="line"><span>フォーマットプロフィール : High@L4</span></span>
<span class="line"><span>フォーマット設定, CABAC : Yes</span></span>
<span class="line"><span>フォーマット設定, RefFrames : 4 frames</span></span>
<span class="line"><span>コーデックID : avc1</span></span>
<span class="line"><span>コーデックID/情報 : Advanced Video Coding</span></span>
<span class="line"><span>ビットレート : 3 196 kb/s</span></span>
<span class="line"><span>横幅 : 1 920 pixels</span></span>
<span class="line"><span>高さ : 1 080 pixels</span></span>
<span class="line"><span>ディスプレイアスペクト比 : 16:9</span></span>
<span class="line"><span>フレームレートモード : Constant</span></span>
<span class="line"><span>フレームレート : 25.000 FPS</span></span>
<span class="line"><span>カラースペース : YUV</span></span>
<span class="line"><span>クロマサブサンプリング : 4:2:0</span></span>
<span class="line"><span>ビット深度 : 8 bits</span></span>
<span class="line"><span>スキャンの種類 : Progressive</span></span>
<span class="line"><span>ライティングライブラリ : x264 core 148 r2795 aaa9aa8</span></span>
<span class="line"><span>エンコーディング設定 : cabac=1 / ref=3 / deblock=1:0:0 / analyse=0x3:0x113 / me=hex / subme=7 / psy=1 / psy_rd=1.00:0.00 / mixed_ref=1 / me_range=16 / chroma_me=1 / trellis=1 / 8x8dct=1 / cqm=0 / deadzone=21,11 / fast_pskip=1 / chroma_qp_offset=-2 / threads=12 / lookahead_threads=2 / sliced_threads=0 / nr=0 / decimate=1 / interlaced=0 / bluray_compat=0 / constrained_intra=0 / bframes=3 / b_pyramid=2 / b_adapt=1 / b_bias=0 / direct=1 / weightb=1 / open_gop=0 / weightp=2 / keyint=250 / keyint_min=25 / scenecut=40 / intra_refresh=0 / rc_lookahead=40 / rc=crf / mbtree=1 / crf=23.0 / qcomp=0.60 / qpmin=0 / qpmax=69 / qpstep=4 / ip_ratio=1.40 / aq=1:1.00</span></span></code></pre></div><p>そしてこちらがこのビデオクリップのUnityインポート設定です。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+B+'" type="image/avif"><source srcset="'+y+`"><img data-imgit-loadable alt="" width="447" height="377" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABEAAIAAAABAAACFAAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAWAAAAEwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAFgAAABMAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAX21kYXQKCDgRKyaQENACMjgVwAggggSEBAC8gQnzGkC/a6ti1jrKwXcOr/ZZZAwBCYI+4QpU9dh7WqpwIYM72BXa/nIWdit2zQoFGBErJpUyChXAAAEgAAPHhDo=" type="image/avif"><img src="//:0" alt="cover" width="447" height="377" decoding="sync"></picture></div><p>対象のプラットフォームによっては、ビデオクリップのインポート設定でトランスコーディングを有効にする必要がある場合があります。</p><div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>シームレスなループが上手くいかないようなら、動画の開始フレームと終了フレームが完全に同じで、互換性のあるエンコーディング設定になっていることを確認してください。<a href="https://github.com/Naninovel/Video" class="vp-link" target="_blank" rel="noreferrer">動画をループするサンプルプロジェクト<span class="external-link-icon"> ↗</span></a> を参考にしてください。</p></div><p>WebGLでは、ビデオプレーヤーはストリーミングモードでのみ機能するため、WebGLプレーヤーのビルド時にすべてのビデオリソースは <code>Assets/StreamingAssets/Backgrounds</code> フォルダーにコピーされます。 <strong>StreamingAssets</strong> フォルダーもビルド出力ディレクトリに表示されます。ビルドを公開するときに必ず保存し、お使いのWebサーバーがこのフォルダーからのデータの読み取りを許可しているかどうか確認してください。</p><h2 id="レイヤー背景" tabindex="-1">レイヤー背景 <a class="header-anchor vp-link" href="#レイヤー背景" aria-label="Permalink to &quot;レイヤー背景&quot;">​</a></h2><p>レイヤー化された実装により、複数のスプライト（レイヤー）から背景を作成し、実行時にnaninovelスクリプトで個別に切り替えることができます。</p><p>レイヤー背景のプレハブを作るには、コンテキストメニューの <code>Create -&gt; Naninovel -&gt; Background -&gt; Layered</code> アセットを使用してください。<a href="https://docs.unity3d.com/Manual/EditingInPrefabMode.html" class="vp-link" target="_blank" rel="noreferrer">プレハブ編集モード<span class="external-link-icon"> ↗</span></a> に入ってレイヤーを作成します。いくつかのレイヤーとグループがデフォルトで作成されます。そのまま使用するか、削除して独自のものを追加できます。</p><p>レイヤー背景は <a href="/naninovel-docs/ja/guide/characters#キャラクター差分" class="vp-link">キャラクター差分</a> とよく似ています。naninovelスクリプトで設定および制御する方法の詳細については、このドキュメントを参照してください。</p><p><a href="/ja/api/#back" target="_blank"><code>@back</code></a> コマンドの名前のないパラメーターは、外観とトランジションの種類を想定しています（<a href="/ja/api/#char" target="_blank"><code>@char</code></a> コマンドのようにIDと外観ではないことに注意してください）。そのため、次のようにレイヤー構成式を指定します:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 背景アクター &quot;LayeredForest&quot; に対して</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Group&gt;Layer,Other/Group+Layer,-RootLayer.TransitionType</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">LayeredForest</span></span></code></pre></div><h2 id="一般背景" tabindex="-1">一般背景 <a class="header-anchor vp-link" href="#一般背景" aria-label="Permalink to &quot;一般背景&quot;">​</a></h2><p>一般背景は、最も柔軟な背景アクターの実装です。これは、ルートオブジェクトに紐付けられた <code>BackgroundActorBehaviour</code> コンポーネントを追加済みのプレハブをベースにしています。外観の変更と他のすべての背景パラメータは、<a href="https://docs.unity3d.com/Manual/UnityEvents.html" class="vp-link" target="_blank" rel="noreferrer">Unityイベント<span class="external-link-icon"> ↗</span></a> としてルーティングされ、下層のオブジェクトの動作を任意に実装できます。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+b+'" type="image/avif"><source srcset="'+C+'"><img data-imgit-loadable alt="" width="478" height="338" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA1AAIAAAABAAACBQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAXAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAFwAAABAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUG1kYXQKCDgQ7e0gIaAEMikVwAggggSBBADFYc8iXslN50fAo9svIiZ2NlxZQsIA2aUBcJbMLEIaqAoFGBDt7SoyChXAAAEgAAJrDuE=" type="image/avif"><img src="//:0" alt="cover" width="478" height="338" decoding="sync"></picture></div><p>テンプレートから一般背景プレハブを作成するには、コンテキストメニューから <code>Create -&gt; Naninovel -&gt; Background -&gt; Generic</code> を使用してください。</p><p>一般背景は一般キャラクターとよく似ています。実際の利用例として、アニメーション3Dモデルを一般キャラクターとして設定するチュートリアル動画をご覧ください。</p>',43),w=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=HPxhR0I1u2Q",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:v,type:"image/avif"}),A("source",{srcset:_}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABPAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABXbWRhdAoJGBUjm0QICBQQMkIVwAAASFAQtwW+s3Qs6qk4XRIYbcCLR8VkERSZYm5MnFVYFToD+yOqUfz4OtqjwzonBUfQOr5oxVXOqiqXoBlbNts=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/HPxhR0I1u2Q?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),G=a('<h2 id="シーン背景" tabindex="-1">シーン背景 <a class="header-anchor vp-link" href="#シーン背景" aria-label="Permalink to &quot;シーン背景&quot;">​</a></h2><p>シーン背景の実装を利用して <a href="https://docs.unity3d.com/Manual/CreatingScenes" class="vp-link" target="_blank" rel="noreferrer">Unityシーン<span class="external-link-icon"> ↗</span></a> を背景にできます。</p><p>シーン背景はエディターGUIからのみ操作できます。シーンのアセットはプロジェクトフォルダーの <code>Assets/Scenes</code> に保存されている必要があります。</p><p>最初に、 <code>Assets/Scenes</code> フォルダー内に新しいシーンを作成（または既存のシーンを移動）し、少なくとも1つの<a href="https://docs.unity3d.com/ScriptReference/Camera.html" class="vp-link" target="_blank" rel="noreferrer">カメラ<span class="external-link-icon"> ↗</span></a> があることを確認します。 シーン背景をロードすると、Naninovelはシーンの最初のカメラにレンダリングテクスチャを割り当てます。次に、レンダリングテクスチャが背景スプライトに割り当てられ、Naninovelシーンスペース内のシーンの背景を表します。このようにして、シーン背景は他の背景やキャラクターアクターと共存でき、すべての背景トランジションエフェクトやさまざまな表示アスペクト比に対応しています。</p><p>同時に読み込まれる可能性のある他のシーンのオブジェクトと重ならないように（たとえば、単一のnaninovelスクリプトから参照する場合）、シーンオブジェクトはワールドスペース内に配置してください。さらに、シーン背景オブジェクトがグローバルスペースの起点 (<code>x0 y0 z0</code>) の近くに配置されている場合は、Naninovelのメインカメラでレンダリングされる可能性があります。これを防ぐには、すべてのシーンオブジェクトをグローバル起点から離すか、<code>Configuration -&gt; Engine -&gt; Override Objects Layer</code> で <a href="https://docs.unity3d.com/Manual/Layers.html" class="vp-link" target="_blank" rel="noreferrer">レイヤー<span class="external-link-icon"> ↗</span></a> を使用して Naninovel 関連のオブジェクトを分離します。</p><p>シーンのセットアップが完了したら、 <code>Naninovel -&gt; Configuration -&gt; Backgrounds</code> メニューから新しい背景アクターを作成し、 <code>SceneBackground</code> 実装を選択して、シーンアセットをアクターリソースに追加します。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+E+'" type="image/avif"><source srcset="'+f+'"><img data-imgit-loadable alt="" width="720" height="348" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABaAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABibWRhdAoIOBUjg0gIaAEyThXABBBBBIAQAODTflfqTW5UWfzEsXqNdEvgCKNJLY/WBH/FwBE3I3WxeQGtWWIaE2wHE4bSkeM0/2CKIX9t8SZbWWUEW9Ee7511SuxuQA==" type="image/avif"><img src="//:0" alt="cover" width="720" height="348" decoding="sync"></picture></div><p>シーン背景アクターにリソースを割り当てる場合、対応するシーンアセットが <a href="https://docs.unity3d.com/Manual/BuildSettings.html" class="vp-link" target="_blank" rel="noreferrer">ビルド設定<span class="external-link-icon"> ↗</span></a> に自動的に追加されます。シーンアセットがビルドに追加されないエラーが発生した場合は、手動で追加してみてください。</p><p>これで <a href="/ja/api/#back" target="_blank"><code>@back</code></a> コマンドを使って作成したシーン背景アクターを管理できます。例:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> SceneName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">ActorId</span></span></code></pre></div>',10),F=[D,w,G];function Q(I,Y,x,W,X,M){return i(),e("div",null,F)}const Z=s(k,[["render",Q]]);export{R as __pageData,Z as default};
