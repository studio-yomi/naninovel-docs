import{_ as e,c as t,o as i,f as a,D as A,a as s,fs as c,ft as l,fu as o,fv as n,fw as d,fx as r,h4 as p,h5 as h,fG as g,fH as m,fI as u,fJ as b}from"./chunks/framework.BG74BkEs.js";const L=JSON.parse('{"title":"用户界面UI","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/user-interface.md","filePath":"zh/guide/user-interface.md","lastUpdated":1698833889000}'),I={name:"zh/guide/user-interface.md"},k=d+" 1x",y=r+" 1x",v=c+" 1x",U=l+" 1x",B=p+" 1x",f=h+" 1x",_=o+" 1x",w=n+" 1x",Q=g+" 1x",C=m+" 1x",E=u+" 1x",G=b+" 1x",Y=a('<h1 id="用户界面ui" tabindex="-1">用户界面UI <a class="header-anchor vp-link" href="#用户界面ui" aria-label="Permalink to &quot;用户界面UI&quot;">​</a></h1><p>naninovel由许多内置UI构成：标题菜单，游戏设置，保存加载菜单，回看面板，CG回顾，提示面板等。</p><p>每个内置UI都可以关闭或是自定义修改；参考<a href="/naninovel-docs/zh/guide/user-interface#UI自定义" class="vp-link">UI自定义</a> 。</p><h2 id="自适应ui布局" tabindex="-1">自适应UI布局 <a class="header-anchor vp-link" href="#自适应ui布局" aria-label="Permalink to &quot;自适应UI布局&quot;">​</a></h2><p>所有内置UI都做了自适应。这使得UI能在各种平台和各种分辨率下都能够保持可用状态。</p>',5),x=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"423"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-b6bddf8a0c6f2ba68dcdc1bc65db0c09.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-b6bddf8a0c6f2ba68dcdc1bc65db0c09.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABkAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABsbWRhdAoGGBUjo0AQMloVwAQQAQSEAADYbLzyRnQcYIjHeCQkh8tthmanANN4ZhWe3dPpq8xme0pFP4kib2buF19tyyBgghOUPJkJorsEEBn7LDOeEutV532Py8niM2dUwEUahLPBv0A=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"423",decoding:"sync"})])],-1),F=A("h2",{id:"ui切换",tabindex:"-1"},[s("UI切换 "),A("a",{class:"header-anchor vp-link",href:"#ui切换","aria-label":'Permalink to "UI切换"'},"​")],-1),W=A("p",null,"UI切换特性，能让用户整体隐藏/显示游戏内UI。",-1),V=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"403"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-e267c4ab3654efbfaf611011502de79f.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-e267c4ab3654efbfaf611011502de79f.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABaAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABibWRhdAoGGBUjm0AQMlAVwAggAASBAAC4kawlVY86niok2RNpjz4+s3i8I7oQqzJDp+ABmdgWFteJJovXeFHN7hsZMdpid0t7z5ATWqDC87enS4T6QnEJQuNBidHg8A==",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"403",decoding:"sync"})])],-1),M=a('<p>激活<code>ToggleUI</code>输入（个人电脑默认<code>Space</code>键）或使用控制面板下的<code>HIDE</code>按钮来隐藏/显示游戏内UI。</p><p>当UI隐藏时，<code>Continue</code>输入或是单击（触击）屏幕会重新显示出UI。</p><h2 id="ui自定义" tabindex="-1">UI自定义 <a class="header-anchor vp-link" href="#ui自定义" aria-label="Permalink to &quot;UI自定义&quot;">​</a></h2><p>UI自定义特性允许用户添加自建UI，或使其替代任何内置UI元素，如标题菜单，设置菜单，回看面板等。</p><p>注意，文本打字机和选择处理器，是不同的元素交互，非UI范围内的定制。参考说明<a href="/naninovel-docs/zh/guide/text-printers" class="vp-link">文本打字机</a>和 <a href="/naninovel-docs/zh/guide/choices" class="vp-link">选择处理器</a>。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>在尝试自建UI或修改前，确保你已经熟悉<a href="https://docs.unity3d.com/Packages/com.unity.ugui@latest" class="vp-link" target="_blank" rel="noreferrer">UGUI<span class="external-link-icon"> ↗</span></a>。即使下面有示例项目和视频教程，但我们不会提供任何关于UGUI的问题支持。详情参考<a href="/naninovel-docs/zh/support/#unity-支持" class="vp-link">技术支持</a>页面。</p></div><p>要添加自定义UI或是修改（关闭）内置UI，使用<code>Naninovel -&gt; Resources -&gt; UI</code>菜单的UI资源管理的。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+k+'" type="image/avif"><source srcset="'+y+'"><img data-imgit-loadable alt="" width="720" height="529" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABPAAIAAAABAAACHwAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAGgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABoAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAa21kYXQKCDgVI8tICGgBMkMVwAQQQQSBBADGj8DicT4xsfuvbprHgMmBZKffZtRFrY+Bde2R1mRzoKt+BrUGX4UQG9qVufnOcfiPC8tgXrhEx5Y/CgYYFSPLSoAyChXAAAEgAAY04OY=" type="image/avif"><img src="//:0" alt="cover" width="720" height="529" decoding="sync"></picture></div><p>当引起初始化的时候，将会自动将UI预制体注册至该资源管理器。</p><p>要显示/隐藏已经配置的UI，分别使用<a href="/zh/api/#showui" target="_blank"><code>@showUI</code></a>和<a href="/zh/api/#hideui" target="_blank"><code>@hideUI</code></a>命令。</p><h3 id="添加自定义ui" tabindex="-1">添加自定义UI <a class="header-anchor vp-link" href="#添加自定义ui" aria-label="Permalink to &quot;添加自定义UI&quot;">​</a></h3><p>要添加新的自定义UI，通过菜单<code>Create -&gt; Naninovel -&gt; Custom UI</code>来添加，并将其添加到资源列表内。这样它就会随引擎初始化时进行初始化。</p><p>以下视频教程，展示了如何添加用户自定义的日历UI，并使用特殊的出现/隐藏的动画。该日历会根据<a href="/naninovel-docs/zh/guide/custom-variables" class="vp-link">自定义变量</a> （可通过Naninovel来控制并随游戏保存）来显示。并且日历会随数据变化而同步更新。这些功能实现都不需要C#代码来实现。</p>',13),X=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=wrAm-cwPXy4",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:v,type:"image/avif"}),A("source",{srcset:U}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABQAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABYbWRhdAoJGBUjm0QICBQQMkMVwBdcQgSABADicT3SQxE7stfmEn3df8I1z2CBcaikvdc2Y+k7FCpDaRgyyQTKqhyD/fCov6ixQurkwm4vLi/5njEo",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/wrAm-cwPXy4?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),N=a('<div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>上述视频用的Unity项目文件在<a href="https://github.com/Naninovel/CustomUIExample" class="vp-link" target="_blank" rel="noreferrer">GitHub获取<span class="external-link-icon"> ↗</span></a> 。你可以使用git客户端<a href="https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository" class="vp-link" target="_blank" rel="noreferrer">克隆存储库<span class="external-link-icon"> ↗</span></a> 或是 <a href="https://github.com/Naninovel/CustomUIExample/archive/master.zip" class="vp-link" target="_blank" rel="noreferrer">下载为zip存档<span class="external-link-icon"> ↗</span></a> 。注意，其中不包含Naninovel资源包，导入资源以解决报错。</p></div><div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>其他高级示例，如添加使用网格组件，页码，拖拽等功能的的自定义背包参考<a href="https://github.com/Naninovel/Inventory" class="vp-link" target="_blank" rel="noreferrer">GitHub背包项目示例<span class="external-link-icon"> ↗</span></a>。</p><p>另外，UI相关代码和预制体都在<a href="https://github.com/Naninovel/Inventory/tree/master/Assets/NaninovelInventory/Runtime/UI" class="vp-link" target="_blank" rel="noreferrer">运行时/UI<span class="external-link-icon"> ↗</span></a> 和 <a href="https://github.com/Naninovel/Inventory/tree/master/Assets/NaninovelInventory/Prefabs" class="vp-link" target="_blank" rel="noreferrer">预制体<span class="external-link-icon"> ↗</span></a></p></div><p>在通过菜单创建自定义UI时，会自动添加<code>Custom UI</code>组件，该组件继承<code>IManagedUI</code>接口，以保证能被引擎识别该预制体为UI。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+B+'" type="image/avif"><source srcset="'+f+'"><img data-imgit-loadable alt="" width="499" height="466" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA0AAIAAAABAAACBAAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAFgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAABYAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAT21kYXQKCDgRL1aQENACMigVwAQQQQSBBAC8gQnS6AngLL9yDN760KcJTyvEwKyNyzf2hxclHDXgCgUYES9WlTIKFcAAASAAA8eEOg==" type="image/avif"><img src="//:0" alt="cover" width="499" height="466" decoding="sync"></picture></div><p><code>Disable Interaction</code> 用于永久关闭UI交互，无论该UI是非在游戏中可见。需要<code>Canvas Group</code>在同一个游戏物体上。</p><p><code>Visible On Awake</code>打开时，UI会在引擎初始化完成后就显示出来为可见状态，关闭则相反。</p><p>当<code>Control Opacity</code>打开时，并且<code>Canvas Group</code>组件在想同游戏物体，<code>Canvas Group</code>上的<code>Alpha</code>属性会同步当前UI的可见度修改。 <code>Fade Duration</code>用于控制透明度渐隐持续时间。如果你想使用其他的可见状态效果，（比如滑动动画），关闭<code>Control Opacity</code>，使用<code>On Show</code> 和 <code>On Hide</code>事件来完成可见度修改。</p><p>如果你想支持游戏手柄或是键盘控制UI，将可交互的组件（如按钮）绑定到<code>Focus Object</code>属性。之后该物体就能够自动通过各种按键来控制。具体设置使用步骤可参考<a href="https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/script-SelectableNavigation.html" class="vp-link" target="_blank" rel="noreferrer">UI导航控制引导<span class="external-link-icon"> ↗</span></a> 。</p><p><code>Focus Object</code> 被绑定后，<code>Focus Mode</code>将允许聚焦于该物体时被选择：<code>Visibility</code>将在UI可见时就聚焦到该组件，<code>Navigation</code>会在玩家使用按键输入（手柄左摇杆，D-pad或是键盘方向键）后聚焦。</p><p>用户可以通过<code>On Show</code> 和 <code>On Hide</code>事件来对UI的可见度变化进行控制。比如，你可以使用<code>Animator</code>触发来控制UI的显示隐藏。</p><p><code>Hide On Load</code>开启时，UI会在引擎开始加载操作时自动隐藏。这个动作通常发生在加载另一个Naninovel脚本或是退出标题画面时。</p><p><code>Save Visibility State</code>开启时，会对UI可见度状态做持久化保存，在下次加载游戏时，UI会保持和之前退出时一样的状态。</p><p><code>Block Input When Visible</code>允许在UI可见时关闭<a href="/naninovel-docs/zh/guide/input-processing" class="vp-link">输入</a>。 这有助于防止玩家在与UI交互时使用各种快捷键（隐藏UI，继续阅读等）。<code>Allowed Samplers</code> 允许使用的快捷键。比如，你可以将<code>ToggleUI</code> 输入添加到此，能让玩家使用该功能的快捷键，而其他所有快捷键都将无效化。</p><p>启用<code>Modal UI</code>会使所有其他UI在可见时都忽略交互。这类似于<code>Block Input When Visible</code>，但是会影响基于事件的交互（鼠标单击，触摸，UI导航），而不影响直接输入处理。</p><p>创建自定义UI时，默认情况下还将添加其他几个组件：</p><ul><li><code>Canvas Group</code> 允许通过更改不透明度（由Fade Duration控制）来隐藏UI，并允许UI在必要时忽略用户交互。</li><li><code>Canvas Scaler</code> 自动缩放布局以适合当前的显示分辨率。</li><li><code>Graphic Raycaster</code> 允许播放器与UI画布内的按钮和其他可交互元素交互。</li></ul><p>您可以随意修改或删除上述任何组件。</p><h3 id="关闭内置ui" tabindex="-1">关闭内置UI <a class="header-anchor vp-link" href="#关闭内置ui" aria-label="Permalink to &quot;关闭内置UI&quot;">​</a></h3><p>要关闭内置UI，一处UI资源管理菜单内的相应条目，这样预制体就不会在引擎初始化时加载。</p><h3 id="修改内置ui" tabindex="-1">修改内置UI <a class="header-anchor vp-link" href="#修改内置ui" aria-label="Permalink to &quot;修改内置UI&quot;">​</a></h3><p>如果要修改现有的内置（默认）UI预制体，你可以在<code>Naninovel/Prefabs/DefaultUI</code>目录下找到。</p><p>如果可能的话，<strong>请不要直接编辑内置的预制件</strong>，以防止更新包装时出现问题。 请通过菜单<code>Create -&gt; Naninovel -&gt; Default UI -&gt; ...</code>创建，或是在该文件夹下，复制(Ctrl/Cmd+D)后从该文件夹移到其他位置修改，之后再将修改/创建的预制体添加到资源管理器的已有条目下(<code>Object</code> 字段)。</p><p>在下面的视频教程中，您可以学习如何覆盖内置标题（主）菜单。以及进入标题菜单时如何使用标题脚本添加背景和特殊效果。不需要使用C＃脚本来实现。</p>',23),Z=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=hqhfhXzQkdk",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:_,type:"image/avif"}),A("source",{srcset:w}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABNAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABVbWRhdAoJGBUjm0QICBQQMkAVwAAASEEQ3kSJZJMnHKp2oAq7QqUlOZ9PwKKxFcs6u48sMAZHjLjLIInDCPLpDFVVmQzMZdssQZViPN1MlUoo",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/hqhfhXzQkdk?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),R=a(`<div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>上述视频用的Unity项目文件在<a href="https://github.com/Naninovel/CustomUIExample" class="vp-link" target="_blank" rel="noreferrer">GitHub获取<span class="external-link-icon"> ↗</span></a> 。你可以使用git客户端<a href="https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository" class="vp-link" target="_blank" rel="noreferrer">克隆存储库<span class="external-link-icon"> ↗</span></a> 或是 <a href="https://github.com/Naninovel/CustomUIExample/archive/master.zip" class="vp-link" target="_blank" rel="noreferrer">下载为zip存档<span class="external-link-icon"> ↗</span></a> 。注意，其中不包含Naninovel资源包，导入资源以解决报错。</p></div><p>从头开始创建新的预制体时，确保你要覆写的UI上的相应组件都已关联好。这些组件都应该被关联至预制体的根物体上。</p><p>所有UI接口都位于 <code>Naninovel.UI</code>命名空间下：</p><table><thead><tr><th>接口</th><th>对应UI</th></tr></thead><tbody><tr><td>IBacklogUI</td><td>打字机回看面板。</td></tr><tr><td>ILoadingUI</td><td>加载游戏时显示的面板。</td></tr><tr><td>IMovieUI</td><td>用于托管电影的UI。</td></tr><tr><td>ISaveLoadUI</td><td>用于保存和加载游戏的面板。</td></tr><tr><td>ISceneTransitionUI</td><td>处理场景过渡 ( <a href="/zh/api/#starttrans" target="_blank"><code>@startTrans</code></a> 和 <a href="/zh/api/#finishtrans" target="_blank"><code>@finishTrans</code></a> 命令)。</td></tr><tr><td>ISettingsUI</td><td>用于更改游戏设置的面板。</td></tr><tr><td>ITitleUI</td><td>游戏的标题（主）菜单。</td></tr><tr><td>IExternalScriptsUI</td><td>外部脚本浏览器UI (社区修改功能)。</td></tr><tr><td>IVariableInputUI</td><td>用于输入将任意文本分配给自定义状态变量 (<a href="/zh/api/#input" target="_blank"><code>@input</code></a> 命令调用).</td></tr><tr><td>IConfirmationUI</td><td>用于确认重要命令的UI面板 (例如，退出标题菜单或删除保存的游戏时)。</td></tr><tr><td>ICGGalleryUI</td><td>解锁 <a href="/naninovel-docs/zh/guide/unlockable-items#CG画廊" class="vp-link">CG 画廊</a> 窗口。</td></tr><tr><td>ITipsUI</td><td>解锁 <a href="/naninovel-docs/zh/guide/unlockable-items#提示" class="vp-link">提示</a> 窗口。</td></tr><tr><td>IRollbackUI</td><td>状态回滚功能的指示器。</td></tr><tr><td>IContinueInputUI</td><td>全屏不可见的UI层，位于UI层的底部，在点击或触击时激活<code>continue input</code>的触发。</td></tr></tbody></table><p>为了使UI支持可见性（awake唤醒时可见，渐隐时间）和交互选项（禁用交互），还应将<code>Canvas Group</code>组件附加到同一对象。</p><p>如果你熟悉C#变成，并且想自己覆写UI的默认逻辑，<a href="https://docs.unity3d.com/Manual/CreatingAndUsingScripts" class="vp-link" target="_blank" rel="noreferrer">创建新组件<span class="external-link-icon"> ↗</span></a> ，继承<code>IManagedUI</code>接口（可随意继承<code>CustomUI</code>和<code>ScriptableUIBehaviour</code>来保证满足其他接口的需要），并将其关联至你都自建UI。检查<code>Naninovel/Runtime/UI</code>文件夹下内置UI的实现来定制你的UI。这是最小化自定义UI组件的示例：</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UniRx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCustomUI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ScriptableUIBehaviour</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Naninovel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IManagedUI</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UniTask</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InitializeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UniTask.CompletedTask;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="在unity事件上执行脚本" tabindex="-1">在Unity事件上执行脚本 <a class="header-anchor vp-link" href="#在unity事件上执行脚本" aria-label="Permalink to &quot;在Unity事件上执行脚本&quot;">​</a></h2><p>创建自定义UI时，你可能想执行一些命令或执行特定的naninovel脚本以响应某些事件(比如，<a href="https://docs.unity3d.com/Manual/script-Button.html" class="vp-link" target="_blank" rel="noreferrer">按钮点击<span class="external-link-icon"> ↗</span></a>)。</p><p>将Play Script组件添加到游戏对象，然后选择现有的naninovel脚本或在文本区域中直接编写命令；然后路由其他组件的<a href="https://docs.unity3d.com/Manual/UnityEvents.html" class="vp-link" target="_blank" rel="noreferrer">Unity事件<span class="external-link-icon"> ↗</span></a> 以调用该<code>Play Script</code>组件上<code>Play()</code>的方法。在运行时，事件触发时，脚本就会执行。下面的示例演示了如何在单击按钮时隐藏自定义UI。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+Q+'" type="image/avif"><source srcset="'+C+'"><img data-imgit-loadable alt="" width="496" height="521" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABEAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAYAAAAGQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABMbWRhdAoIOBEvhpAQ0AIyOBXAAABIAQBCeCEv6LicK6SiUJg6L1NaI2pZdagVUp6L9sFkKkhiViUZvM4F/brCBXYxpy6CxN91" type="image/avif"><img src="//:0" alt="cover" width="496" height="521" decoding="sync"></picture></div><p>也可以在脚本文本中使用{arg}表达式引用Unity事件参数。支持的参数类型为：字符串，整数，浮点型和布尔型。下面的示例演示在布尔型Unity事件为正时执行相机抖动并播放声音效果，在负布尔值时为播放背景音乐。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+E+'" type="image/avif"><source srcset="'+G+'"><img data-imgit-loadable alt="" width="486" height="455" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABCAAIAAAABAAACEgAAABYAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAFgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAFGlzcGUAAAAAAAAAGAAAABYAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAYG1kYXQKCDgRL1aQENACMjYVwAggQQSAAQCrV0TGgQpVI8LYSd0+cbuLEyPvaVs97N478buqdVQA86GUmXJc+yQcRQV1r3AKCBgRL1aYCBAVMgoVwAABIAADx4Q6" type="image/avif"><img src="//:0" alt="cover" width="486" height="455" decoding="sync"></picture></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>条件判断 (if, else, elseif, endif) 在此位置不被支持.</p></div><p>当通过下拉列表选择现有的naninovel脚本时，脚本文本区域将被忽略，所选的naninovel脚本将被执行，<strong>而不是</strong>当前执行的脚本。如果您希望在不中断当前执行的脚本的情况下附加执行某些命令，请使用脚本文本区域。</p>',15),S=[Y,x,F,W,V,M,X,N,Z,R];function T(D,z,H,P,j,O){return i(),t("div",null,S)}const q=e(I,[["render",T]]);export{L as __pageData,q as default};
