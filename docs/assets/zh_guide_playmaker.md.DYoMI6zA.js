import{_ as e,c as i,o as s,f as a,D as A,dO as t,dP as l,dQ as n,dR as o,dS as r,dT as c}from"./chunks/framework.BG74BkEs.js";const G=JSON.parse('{"title":"Playmaker","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/playmaker.md","filePath":"zh/guide/playmaker.md","lastUpdated":1698833889000}'),p={name:"zh/guide/playmaker.md"},d=n+" 1x",h=o+" 1x",g=r+" 1x",m=c+" 1x",k=t+" 1x",y=l+" 1x",u=a('<h1 id="playmaker" tabindex="-1">Playmaker <a class="header-anchor vp-link" href="#playmaker" aria-label="Permalink to &quot;Playmaker&quot;">​</a></h1><p><a href="https://assetstore.unity.com/packages/tools/visual-scripting/playmaker-368" class="vp-link" target="_blank" rel="noreferrer">PlayMaker<span class="external-link-icon"> ↗</span></a> 是用于unity很受欢迎的可视化编程扩展，旨在用于便于无代码基础的人使用。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+d+'" type="image/avif"><source srcset="'+h+'"><img data-imgit-loadable alt="" width="720" height="298" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAACJAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAACRbWRhdAoIOBTj5pAQ0AIyfRXAFFCABIEEAO5MbQZsA6OUkruOHMbAOLsk6ETUqSrJFU/wn0XoLmjzAgQj+B+8kSi3fKPaJqC7WEva3yPLauclobY8RyqYvkm7BOyQTAnqZ6feHtNONI+CV3STdcJ1Enh+4fmve/Z3U38kM+ZK0CyfLBZ1p8XeEEyQwUkQ" type="image/avif"><img src="//:0" alt="cover" width="720" height="298" decoding="sync"></picture></div><p>请注意，与默认情况下所有Naninovel的C＃API均可用的Bolt相比，PlayMaker要求为每个操作创建一个特殊的C＃类。意味着只有少部分引擎API在playmaker下可用。如果Naninovel的API发生更改，可用的自定义操作也可能会中断。</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor vp-link" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><p>安装playmaker参考<a href="https://hutonggames.fogbugz.com/default.asp?W11" class="vp-link" target="_blank" rel="noreferrer">官方文档<span class="external-link-icon"> ↗</span></a> 。</p><p>下载并导入<a href="https://github.com/Naninovel/PlayMaker/raw/master/NaninovelPlayMaker.unitypackage" class="vp-link" target="_blank" rel="noreferrer">PlayMaker引擎扩展包<span class="external-link-icon"> ↗</span></a> 。</p><p>自定义Naninovel操作应出现在PlayMaker操作浏览器的“ Naninovel”类别下。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+g+'" type="image/avif"><source srcset="'+m+'"><img data-imgit-loadable alt="" width="320" height="422" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABJAAIAAAABAAACGQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAQAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEAAAABUAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZG1kYXQKCDgNPo0gIaAEMj0VwAAASBAAwede0gIjbc5X9ioAI0Ftvarcg31wAX24eDXoGDCmf4UrCfz1SJBsjfAXRrF1o/x7ZrIe/6syCgUYDT6NKjIKFcAAASAAArlXcQ==" type="image/avif"><img src="//:0" alt="cover" width="320" height="422" decoding="sync"></picture></div><h2 id="使用" tabindex="-1">使用 <a class="header-anchor vp-link" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h2><p>以下视频演示了如何使用PlayMaker FSM（有限状态机）初始化Naninovel引擎，预加载并运行脚本。</p>',11),v=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=N856vi18XVU",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:k,type:"image/avif"}),A("source",{srcset:y}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAA1AAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAA9bWRhdAoJGAz+GiBAQKCAMigVwAggAASBAADPrs6hx/RVvccQhNFgjeK+fMrZFvkp3aaevTHSsZKA",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/N856vi18XVU?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),b=a(`<h3 id="事件" tabindex="-1">事件 <a class="header-anchor vp-link" href="#事件" aria-label="Permalink to &quot;事件&quot;">​</a></h3><p>一些重要的Naninovel事件可以自动发送到PlayMaker FSM。为此，请创建一个具有适当名称的全局<a href="https://hutonggames.fogbugz.com/default.asp?W148" class="vp-link" target="_blank" rel="noreferrer">用户事件<span class="external-link-icon"> ↗</span></a> ，并在FSM中使用它。以下是可用的事件名称：</p><ul><li><code>Naninovel/Engine/OnInitialized</code></li><li><code>Naninovel/ScriptPlayer/OnPlay</code></li><li><code>Naninovel/ScriptPlayer/OnStop</code></li><li><code>Naninovel/StateManager/OnGameSaveStarted</code></li><li><code>Naninovel/StateManager/OnGameSaveFinished</code></li><li><code>Naninovel/StateManager/OnGameLoadStarted</code></li><li><code>Naninovel/StateManager/OnGameLoadFinished</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextStarted</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextFinished</code></li><li><code>Naninovel/LocalizationManager/OnLocaleChanged</code></li></ul><p>也可以使用以下 <code>@playmaker</code> 命令从naninovel脚本中广播自定义PlayMaker事件：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span></span></code></pre></div><p>— 将在场景中所有活动的FSM中调用一个名为“ EventName”的全局用户事件。</p><p>该命令还允许使用 <code>fsm</code> 和 <code>object</code> 参数将事件发送到特定的FSM 。第一个参数允许指定FSM名称，该名称应接收事件，例如：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> fsm:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Fsm1,Fsm2</span></span></code></pre></div><p>— 将为名称为“ Fsm1”和“ Fsm2”的FSM调用名为“ EventName”的事件。</p><p>当 <code>object</code> 指定参数时，事件将仅发送到应用于游戏对象的FSM，FSM具有相应的名称，例如：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> object:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Obj1,Obj2</span></span></code></pre></div><p>— 将为所有绑定到名称分别为“ Obj1”和“ Obj2”的游戏对象的FSM调用一个名为“ EventName”的事件。</p><p>您还可以结合使用 <code>fsm</code> 和 <code>object</code> 参数来进一步过滤应接收事件的FSM。</p><h3 id="全局变量" tabindex="-1">全局变量 <a class="header-anchor vp-link" href="#全局变量" aria-label="Permalink to &quot;全局变量&quot;">​</a></h3><p>可以使用扩展包中提供的以下自定义<a href="/naninovel-docs/zh/guide/script-expressions.html#表达式函数" class="vp-link">表达式函数</a> 来访问Naninovel脚本中的全局PlayMaker变量：</p><ul><li><code>GetPlayMakerGlobalVariable(&quot;variableName&quot;)</code> —检索名称为“ variableName”简单类型的变量（int，float，string等）</li><li><code>GetPlayMakerGlobalArray(&quot;variableName&quot;, arrayIndex)</code> —检索存储在名称为“ variableName”的数组变量的“arrayIndex”索引处的值</li></ul><p>假设有一个&quot;Score&quot;整数和 &quot;FinishedRoutes&quot; 布尔数组全局PlayMaker变量，则可以在Naninovel脚本中使用它们，如下所示：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> My score is </span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{GetPlayMakerGlobalVariable(&quot;Score&quot;)}</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> GetPlayMakerGlobalArray(&quot;FinishedRoutes&quot;,2)</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Third route (second array index) is completed.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@else</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Not yet.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@endif</span></span></code></pre></div>`,18),B=[u,v,b];function _(C,f,E,F,M,w){return s(),i("div",null,B)}const P=e(p,[["render",_]]);export{G as __pageData,P as default};
