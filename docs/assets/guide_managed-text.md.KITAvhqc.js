import{_ as A,c as e,o as a,f as t,dq as s,dr as i,ds as n,dt as l,du as o,dv as h,dw as d,dx as c}from"./chunks/framework.BG74BkEs.js";const D=JSON.parse('{"title":"Managed Text","description":"","frontmatter":{},"headers":[],"relativePath":"guide/managed-text.md","filePath":"guide/managed-text.md","lastUpdated":1703963049000}'),p={name:"guide/managed-text.md"},r=s+" 1x",g=i+" 1x",k=n+" 1x",m=l+" 1x",u=o+" 1x",y=h+" 1x",b=d+" 1x",E=c+" 1x",x=t('<h1 id="managed-text" tabindex="-1">Managed Text <a class="header-anchor vp-link" href="#managed-text" aria-label="Permalink to &quot;Managed Text&quot;">​</a></h1><p>Managed text feature allows to manage (replace) various text elements used throughout Naninovel like the in-game UI and characters&#39; display names using localizable documents.</p><p>To generate the managed text documents, use managed text tool accessible via <code>Naninovel -&gt; Tools -&gt; Managed Text</code> editor context menu.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+r+'" type="image/avif"><source srcset="'+g+'"><img data-imgit-loadable alt="Managed Text Tool" width="499" height="163" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABLAAIAAAABAAACGwAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAACAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAAAgAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZm1kYXQKCDgQr9pAQ0AIMj8VwBBAgQSFRQDNsBQAeWv27kK91GKWfY0mPSeQXoG5DLyCaT/V6g8gKDxItqyWXJb4hvxzw0tTUop5JUcQVMIKBRgQr9pUMgoVwAABIAACaw7h" type="image/avif"><img src="//:0" alt="cover" width="499" height="163" decoding="sync"></picture></div><p>Using &quot;Select&quot; button, select path to store the managed text documents (should be <code>Resources/Naninovel/Text</code> by default) and press &quot;Generate&quot; button to create the documents.</p><p>You can also create a custom managed text document using <code>Create -&gt; Naninovel -&gt; Managed Text</code> asset context menu.</p><p>Each line in managed text document is an expression in the following format: <em>Path</em>: <em>Value</em>, where <em>Path</em> is the path to the text variable and <em>Value</em> is the value of that variable. For example, here is the default contents of the &quot;DefaultUI&quot; document, which contains records for the built-in UI:</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+k+'" type="image/avif"><source srcset="'+m+'"><img data-imgit-loadable alt="Managed Text Document" width="362" height="163" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABFAAIAAAABAAACFQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAASAAAACAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEgAAAAgAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAYG1kYXQKCDgQo9pAQ0AIMjkVwAMMAASEBQDwXKhSOkb8XyE+u62X9yEvzGK0CywpNegYOP1WbLsKinWaYKf346z8K+z/kbInKGIKBRgQo9pUMgoVwAABIAACaw7h" type="image/avif"><img src="//:0" alt="cover" width="362" height="163" decoding="sync"></picture></div><p>You can edit the values and the changes will be applied on the next run.</p><p>Enabling <code>Delete Unused</code> property will remove records in the managed text documents that are not directly referenced neither via <code>ManagedTextProvider</code> components, nor via <code>ManagedText</code> attributes in the source code (more on that below).</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To insert line break in managed text value, use <code>&lt;br&gt;</code> tag, which is supported by TMPro text out of the box.</p></div><h2 id="managed-text-provider" tabindex="-1">Managed Text Provider <a class="header-anchor vp-link" href="#managed-text-provider" aria-label="Permalink to &quot;Managed Text Provider&quot;">​</a></h2><p>It&#39;s possible to bind an arbitrary Unity game object to managed text record without any scripting via <code>ManagedTextProvider</code> component; add the component to a game object, specify category (name of the document which will contain the record), key (name of the record inside the document) and use <code>OnValueChanged</code> event to bind the value to a game object property.</p><p>Below is an example of binding a managed text record stored in &quot;MyCustomDocument&quot; document with key &quot;MyCustomText&quot; to a Unity&#39;s &quot;Text&quot; component.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+u+'" type="image/avif"><source srcset="'+y+'"><img data-imgit-loadable alt="" width="497" height="226" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA3AAIAAAABAAACBwAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAACwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAAAsAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUm1kYXQKCDgQ700gIaAEMisVwAwwAASEEQDowt9Ng7LYQo44TU9C2gAHhgxfPxwAludEQHplZRZRvfcYCgUYEO9NKjIKFcAAASAAAmsO4Q==" type="image/avif"><img src="//:0" alt="cover" width="497" height="226" decoding="sync"></picture></div><p>When <code>ManagedTextProvider</code> component is used in a custom UI, text printer or choice handler, corresponding records will automatically be generated when using managed text tool (given the resources are assigned in the configuration menu); for other cases you&#39;ll have to add the records manually.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+b+'" type="image/avif"><source srcset="'+E+`"><img data-imgit-loadable alt="" width="388" height="83" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA3AAIAAAABAAACBwAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAATAAAABAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEwAAAAQAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUm1kYXQKCDgQZbSAhoAQMisVwAAASIBQ+QYyvqep0BDY4DRioJ7/yG/tVbujPBnBNVJX5IhT6hcXmefyCgUYEGW0qDIKFcAAASAAAmsO4Q==" type="image/avif"><img src="//:0" alt="cover" width="388" height="83" decoding="sync"></picture></div><h2 id="managed-text-variables" tabindex="-1">Managed Text Variables <a class="header-anchor vp-link" href="#managed-text-variables" aria-label="Permalink to &quot;Managed Text Variables&quot;">​</a></h2><p>It&#39;s also possible to bind managed text records with variables in the source code. For this, add <code>ManagedText</code> attribute to a static string field and declaring class. Field&#39;s value will be overwritten with the value specified in the managed text document on engine initialization.</p><p>Below is an example on using a managed text variable to localize a text label in a C# script.</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Naninovel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UnityEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Inheriting from Unity&#39;s text component, so we can use it as one.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ManagedText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomLabel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Value of the &quot;CustomLabel.LabelText&quot; managed text record will be assigned</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // to the below variable on engine init and updated on locale changes.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ManagedText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;foo&quot; is the document name for the record.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LabelText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;bar&quot; is the default value.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Awake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Awake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LabelText; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Assign current record value to the label.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> l10n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Engine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ILocalizationManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Update the label when user changes the locale at runtime.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        l10n.OnLocaleChanged </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LabelText;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="script-text" tabindex="-1">Script Text <a class="header-anchor vp-link" href="#script-text" aria-label="Permalink to &quot;Script Text&quot;">​</a></h2><p>It&#39;s possible to get managed text values directly from naninovel scripts. This could be handy, when it&#39;s required to use some text in the script expressions and the text should be localizable.</p><p>Create a managed text document named &quot;Script&quot; and add records using keys with <code>T_</code> or <code>t_</code> prefix. It&#39;s now possible to reference the values in script expressions; eg given the following records in the &quot;Script&quot; managed text document:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span>T_Greeting1: Hey!</span></span>
<span class="line"><span>T_Greeting2: Hello!</span></span>
<span class="line"><span>T_Greeting3: Hi!</span></span></code></pre></div><p>— you can reference the values with:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@print</span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;"> {Random(T_Greeting1,T_Greeting2,T_Greeting3)}</span></span></code></pre></div><p>&quot;Script&quot; managed text document can be localized in the same way as the other documents; when user selects another locale, the text will automatically be referenced from the corresponding localized document.</p><h2 id="localization" tabindex="-1">Localization <a class="header-anchor vp-link" href="#localization" aria-label="Permalink to &quot;Localization&quot;">​</a></h2><p>Managed text localization process resemble the one for naninovel scripts:</p><ol><li>Generate (create, edit) the required managed text documents in a <code>Resources/Naninovel/Text</code> folder.</li><li>Run the localization utility in a locale folder (<code>Resources/Naninovel/Localization/{Locale}</code>, where <code>{Locale}</code> is the tag of the target locale).</li><li>The localization documents for the source managed text documents will appear in the corresponding locale folder. Use them to add or edit the translation.</li></ol><p>To update the managed text documents and their corresponding localization counterparts, first run the generate managed text utility in a <code>Resources/Naninovel/Text</code> folder, and then the localization utility in a <code>Resources/Naninovel/Localization/{Locale}</code> folder. Both utilities will attempt to preserve any existing modifications (managed text records and their translations) by default, so you won&#39;t have to re-write everything from scratch on each update.</p><p>See <a href="/naninovel-docs/guide/localization" class="vp-link">Localization</a> for more info on how to use the localization utility.</p><div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>You can find an example localization setup (including managed text) in the <a href="https://github.com/naninovel/samples/tree/main/unity/demo" class="vp-link" target="_blank" rel="noreferrer">demo<span class="external-link-icon"> ↗</span></a> and <a href="https://github.com/naninovel/samples/tree/main/unity/spreadsheet" class="vp-link" target="_blank" rel="noreferrer">spreadsheet<span class="external-link-icon"> ↗</span></a> sample projects. Use them as a reference in case having issues setting up localization in your own project.</p></div>`,34),v=[x];function B(w,f,C,F,G,Q){return a(),e("div",null,v)}const Y=A(p,[["render",B]]);export{D as __pageData,Y as default};
