import{_ as i,c as a,o as e,D as A,a as s,f as t,gO as n,gP as l,db as o,dc as h,dd as p,de as d}from"./chunks/framework.BG74BkEs.js";const x=JSON.parse('{"title":"インベントリ","description":"","frontmatter":{},"headers":[],"relativePath":"ja/guide/inventory.md","filePath":"ja/guide/inventory.md","lastUpdated":1698833889000}'),r={name:"ja/guide/inventory.md"},c=n+" 1x",k=l+" 1x",g=o+" 1x",B=h+" 1x",m=p+" 1x",y=d+" 1x",u=A("h1",{id:"インベントリ",tabindex:"-1"},[s("インベントリ "),A("a",{class:"header-anchor vp-link",href:"#インベントリ","aria-label":'Permalink to "インベントリ"'},"​")],-1),C=A("p",null,[s("インベントリシステムはビジュアルノベルスタイルのゲームでは少し範囲外ですが、Naninovelで活用する方法について多くの問合せがありました。"),A("a",{href:"https://github.com/Naninovel/Inventory",class:"vp-link",target:"_blank",rel:"noreferrer"},[s("GitHubプロジェクト"),A("span",{class:"external-link-icon"}," ↗")]),s(" には、インベントリをエンジンや拡張機能として作成し統合する例があります。Naninovel上で簡単にセットアップできます。")],-1),E=A("p",null,"サンプルプロジェクトは、グリッドレイアウト、ページネーション、ドラッグドロップウィンドウといったカスタムインベントリUIを作成する方法、カスタムエンジンサービスと関連するコンフィグメニューを追加する方法、入力バインディングを追加する方法、ステートのアウトソーシングを使用する方法、カスタムシナリオコマンドと式関数を作成する方法を示しています。",-1),v=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"406"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-86c577f007daf4ec5d79c0e91db7bc10.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-86c577f007daf4ec5d79c0e91db7bc10.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABcAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABkbWRhdAoGGBUjm0AQMlIVwBhggQSBAQDeRHB/EsvXqmvMkGDO91niAAM8do9OHN29h/3lLt2GjmxpLzs5nJRTMl8i05r5IaimFeLu7iEGNu1SWkyRAnrY4dGZXqEXZMG5",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"406",decoding:"sync"})])],-1),b=t('<p><a href="https://help.github.com/ja/github/creating-cloning-and-archiving-repositories/cloning-a-repository" class="vp-link" target="_blank" rel="noreferrer">Git clientでリポジトリをクローン<span class="external-link-icon"> ↗</span></a> するか <a href="https://github.com/Naninovel/Demo/archive/master.zip" class="vp-link" target="_blank" rel="noreferrer">zipファイルをダウンロード<span class="external-link-icon"> ↗</span></a> することができます。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>プロジェクトに Naninovel パッケージは含まれないため、初めて開く際はコンパイルエラーが発生します。問題を解決するには、アセットストアから Naninovel をインポートします。</p></div><h2 id="インストール" tabindex="-1">インストール <a class="header-anchor vp-link" href="#インストール" aria-label="Permalink to &quot;インストール&quot;">​</a></h2><p>既存のUnityプロジェクトの上にインベントリ拡張機能を設定するには、<a href="https://docs.unity3d.com/Manual/upm-ui.html" class="vp-link" target="_blank" rel="noreferrer">UPM<span class="external-link-icon"> ↗</span></a> を使用して、次のgit URL経由でパッケージをインストールします: <code>https://github.com/Naninovel/Inventory.git?path=Assets/NaninovelInventory</code> または<a href="https://github.com/Naninovel/Inventory/raw/master/NaninovelInventory.unitypackage" class="vp-link" target="_blank" rel="noreferrer">NaninovelInventory.unitypackage<span class="external-link-icon"> ↗</span></a> を手動でダウンロードしてインポートします。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+c+'" type="image/avif"><source srcset="'+k+'"><img data-imgit-loadable alt="" width="696" height="416" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABPAAIAAAABAAACHwAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAiAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAIgAAABQAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAa21kYXQKCDgVIZtICGgBMkMVwAggQwSBBQDrlAO45SXWCYvOg51WUdBQaNQ8Q0EFVQg0YCELXKxPITwyDNbBtJYVquHqaKoXQfgde+RswOnsQxCACgYYFSGbSoAyChXAAAEgAAY04OY=" type="image/avif"><img src="//:0" alt="cover" width="696" height="416" decoding="sync"></picture></div><h2 id="使い方" tabindex="-1">使い方 <a class="header-anchor vp-link" href="#使い方" aria-label="Permalink to &quot;使い方&quot;">​</a></h2><p>テンプレートから既製のインベントリUIを作成するには、アセットコンテキストメニューの <code>Create -&gt; Naninovel -&gt; Inventory -&gt; Inventory UI</code> を使用します。次にエディターメニューの <code>Naninovel -&gt; Resources -&gt; UI</code> から、プレハブをNaninovel UIリソースに追加します。追加すると、<a href="/ja/api/#showui" target="_blank"><code>@showUI</code></a> と <a href="/ja/api/#hideui" target="_blank"><code>@hideUI</code></a> コマンドで、他のすべてのUIと同様にUIを表示/非表示にすることができます。</p><p>インベントリUIコンポーネントには <code>Capacity</code> プロパティがあり、インベントリのスロット数を変更できます。スロットグリッドは、 <code>Content/InventoryGrid</code> ゲームオブジェクトで設定します（スロット番号とレイアウト、ページごとのスロットなど）。ウィンドウのドラッグドロップ動作は、<code>Content</code>ゲームオブジェクトに紐づいた <code>Drag Drop</code> コンポーネントで設定（無効化）できます。</p><p>インベントリアイテムプレハブは、アセットコンテキストメニューの <code>Create -&gt; Naninovel -&gt; Inventory -&gt; Inventory Item</code> で作成できます。アイテムのプレハブは、エディターメニュー <code>Naninovel -&gt; Resources -&gt; Inventory</code> からインベントリリソースとして割り当てる必要があります。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+g+'" type="image/avif"><source srcset="'+B+'"><img data-imgit-loadable alt="" width="720" height="293" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABGAAIAAAABAAACFgAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAAA8AAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAYW1kYXQKCDgU4+aQENACMjoVwAQQEQSEBADuTd1+lhW6s3joLWGuE6+dkzesh45yvjMsJDuCGskFHpu0CvLI9oA2Mb1vV12GYb/HCgUYFOPmlTIKFcAAASAABjTg5g==" type="image/avif"><img src="//:0" alt="cover" width="720" height="293" decoding="sync"></picture></div><p>大量のアイテムがありエディターメニューから割り当てるのが大変な場合は、<code>Resources/Naninovel/Inventory</code> フォルダーにドロップするだけで自動的にスクリプトで使用できるようになります。必要に応じて、さらにサブフォルダで整理することもできます。この場合、naninovelスクリプトで参照する場合はスラッシュ (<code>/</code>) を使用します。たとえば、<code>Resources/Naninovel/Inventory/Armor/FullPlate.prefab</code> として保存されたアイテムは、<code>Armor/FullPlate</code> としてスクリプトから参照できます。</p><p><a href="/naninovel-docs/ja/guide/resource-providers#addressable" class="vp-link">addressable asset system</a> を使用して手動でリソースを公開することもできます。アセットを公開するには、使用するパスと同じアドレスを &quot;Resources/&quot; の部分を除いて、上記の方法で割り当てます。例えば、アイテム &quot;FullPlate.prefab&quot; を公開するには、次のアドレスにプレハブアセットを割り当てます: <code>Naninovel/Inventory/FullPlate</code>。addressable 機能はデフォルトではエディターで使用できないことに注意してください。リソースプロバイダーのコンフィグメニューで <code>Enable Addressable In Editor</code> プロパティを有効にすることで許可できます。</p><p>各アイテムには、同じタイプのアイテムを1つのインベントリスロットにスタックできる数を制限する <code>Stack Count Limit</code> プロパティと、アイテムが使用されたとき（<code>@useItem</code> コマンドまたはユーザーがインベントリ内のアイテムをクリックしたとき）に呼び出される <code>On Item Used</code> Unityイベントがあります。以下の例は、<code>Play Script</code> コンポーネントを使用してイベントを設定し、一度使用したアイテムを削除し、グリッチの特殊効果を生成してテキストメッセージを出力する方法です。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+m+'" type="image/avif"><source srcset="'+y+`"><img data-imgit-loadable alt="" width="497" height="324" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAAyAAIAAAABAAACAgAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAABAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAATW1kYXQKCDgQ7+0gIaAEMiYVwAQQQQSAAADFYdC9gpUx+o1E8obpcpofiMVag7BiSErnCPgngAoFGBDv7SoyChXAAAEgAAJrDuE=" type="image/avif"><img src="//:0" alt="cover" width="497" height="324" decoding="sync"></picture></div><p><code>@addItem</code> コマンドでアイテムをインベントリに追加し、<code>@removeItem</code>(または<code>@removeItemAt</code>、<code>@removeAllItems</code>）でアイテムを削除できます。アイテムIDは、アイテムのプレハブ名と同じです。 インベントリスロットIDはグリッドスロットインデックスと同じです（たとえば、最初のスロットは0、2番目は1）。</p><p>カスタム <a href="/naninovel-docs/ja/guide/script-expressions#関数式" class="vp-link">関数式</a> <code>ItemExist()</code> と <code>ItemCount()</code> でアイテムが在庫に存在するかどうか、および既存のアイテムの数を確認でき、便利です。</p><p>以下は、サンプルプロジェクトのスクリプトです:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#51A612;--shiki-dark:#9BC37C;"># Start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Select an action.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[skipInput]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Pick up sword&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">!ItemExist(&quot;Sword&quot;)</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> do:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@addItem</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Sword, </span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Adventure&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Pick up armor&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">!ItemExist(&quot;Armor&quot;)</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> do:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@addItem</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Armor, </span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Adventure&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Adventure awaits, venture forth!&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@stop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#51A612;--shiki-dark:#9BC37C;"># Adventure</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> ItemExist(&quot;Sword&quot;)</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@set</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> monstersSlayed=&quot;</span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{ItemExist(&quot;Armor&quot;) ? Random(3,5) : 2}</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@addItem</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Food</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> amount:</span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{monstersSlayed}</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">	You&#39;ve encountered and slayed </span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{monstersSlayed}</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> monsters with your sword.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> !</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;">ItemExist</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">(&quot;Armor&quot;)</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> You could&#39;ve been more productive with an armor, though.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[endif][i][showUI</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Inventory</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> wait:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Check your inventory for the loot!</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Start</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@else</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">	But you don&#39;t have a weapon! You&#39;ve been beaten by the monsters.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> ItemExist(&quot;Armor&quot;)</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> At least it didn&#39;t hurt that much, thanks to the armor.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[endif]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Let&#39;s prepare better next time.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Start</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@endif</span></span></code></pre></div>`,18),D=[u,C,E,v,b];function I(F,w,G,Q,Y,_){return e(),a("div",null,D)}const W=i(r,[["render",I]]);export{x as __pageData,W as default};
