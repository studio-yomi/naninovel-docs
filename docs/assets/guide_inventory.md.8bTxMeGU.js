import{_ as s,c as i,o as t,f as e,D as A,d9 as a,da as n,db as o,dc as l,dd as r,de as d}from"./chunks/framework.BG74BkEs.js";const x=JSON.parse('{"title":"Inventory","description":"","frontmatter":{},"headers":[],"relativePath":"guide/inventory.md","filePath":"guide/inventory.md","lastUpdated":1710659144000}'),h={name:"guide/inventory.md"},p=a+" 1x",c=n+" 1x",g=o+" 1x",k=l+" 1x",m=r+" 1x",u=d+" 1x",y=e('<h1 id="inventory" tabindex="-1">Inventory <a class="header-anchor vp-link" href="#inventory" aria-label="Permalink to &quot;Inventory&quot;">​</a></h1><p>While an inventory system is out of scope for visual novels, we had a lot of requests and questions on how to integrate one with Naninovel. The <a href="https://github.com/naninovel/samples/tree/main/unity/inventory" class="vp-link" target="_blank" rel="noreferrer">GitHub project<span class="external-link-icon"> ↗</span></a> serves as an example for creating and integrating an inventory extension, which you can set up on top of Naninovel installation without modifying the engine source code.</p><div class="info custom-block"><p class="custom-block-title">NOTE</p><p>The inventory is not a standalone product and/or part of Naninovel. Use it to learn how to extend and customize the engine, but don&#39;t expect it to be production-ready solution for inventory systems. If you&#39;re looking for one, <a href="https://assetstore.unity.com/?q=inventory" class="vp-link" target="_blank" rel="noreferrer">check the Asset Store<span class="external-link-icon"> ↗</span></a> or create a custom one from scratch.</p></div><p>Example project shows how to make custom inventory UI with grid layout, pagination and drag-drop window, add custom engine service and related configuration menu, add input bindings, use state outsourcing, author custom scenario commands and expression functions.</p>',4),B=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"406"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-86c577f007daf4ec5d79c0e91db7bc10.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-86c577f007daf4ec5d79c0e91db7bc10.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABcAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABkbWRhdAoGGBUjm0AQMlIVwBhggQSBAQDeRHB/EsvXqmvMkGDO91niAAM8do9OHN29h/3lLt2GjmxpLzs5nJRTMl8i05r5IaimFeLu7iEGNu1SWkyRAnrY4dGZXqEXZMG5",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"406",decoding:"sync"})])],-1),v=e('<p>You can <a href="https://help.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository" class="vp-link" target="_blank" rel="noreferrer">clone the project repository with a Git client<span class="external-link-icon"> ↗</span></a> or <a href="https://github.com/naninovel/samples/archive/main.zip" class="vp-link" target="_blank" rel="noreferrer">download it as a zip archive<span class="external-link-icon"> ↗</span></a>.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Naninovel package is not distributed with the project, hence compilation errors will be produced after opening it for the first time; importing the package will resolve the issues.</p></div><h2 id="installation" tabindex="-1">Installation <a class="header-anchor vp-link" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><p>To set up inventory extension on top of an existing Unity project download and import <a href="https://github.com/naninovel/samples/raw/main/unity/inventory/NaninovelInventory.unitypackage" class="vp-link" target="_blank" rel="noreferrer">NaninovelInventory.unitypackage<span class="external-link-icon"> ↗</span></a>.</p><p>After importing the package, add <code>Elringus.NaninovelInventory.Runtime</code> and <code>Elringus.NaninovelInventory.Editor</code> records to the <code>Type Assemblies</code> list property found in the engine configuration menu and restart Unity editor (otherwise the custom implementation types under the assemblies won&#39;t be accessible by Naninovel).</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+p+'" type="image/avif"><source srcset="'+c+'"><img data-imgit-loadable alt="" width="720" height="300" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABQAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABYbWRhdAoIOBTj5pAQ0AIyRBXAAwxEBIAFAO5N6aFC3zXMJYGr79oqFt8uVsgWWWz6WT6LslaxKKQ073TuVUsDvWZmW71rAWfmt7MBj4MLNRCCGCg4" type="image/avif"><img src="//:0" alt="cover" width="720" height="300" decoding="sync"></picture></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor vp-link" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><p>To create a pre-made inventory UI from template, use <code>Create -&gt; Naninovel -&gt; Inventory -&gt; Inventory UI</code> asset context menu. Then add the prefab to the Naninovel UI resources via <code>Naninovel -&gt; Resources -&gt; UI</code> editor menu. Once added, the UI can be shown/hidden like all the other UIs with <a href="/api/#showui" target="_blank"><code>@showUI</code></a> and <a href="/api/#hideui" target="_blank"><code>@hideUI</code></a> commands.</p><p>The Inventory UI component has <code>Capacity</code> property, where you can change number of slots in the inventory. Slot grid is configured (slot number and layout, slots per page, etc) via <code>Content/InventoryGrid</code> game object. Window drag-drop behavior can be configured (disabled) via <code>Drag Drop</code> component attached to <code>Content</code> game object.</p><p>Inventory item prefabs can be created with <code>Create -&gt; Naninovel -&gt; Inventory -&gt; Inventory Item</code> asset context menu. The item prefabs will then need to be assigned as inventory resources via <code>Naninovel -&gt; Resources -&gt; Inventory</code> editor menu.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+g+'" type="image/avif"><source srcset="'+k+'"><img data-imgit-loadable alt="" width="720" height="293" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABGAAIAAAABAAACFgAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAAA8AAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAYW1kYXQKCDgU4+aQENACMjoVwAQQEQSEBADuTd1+lhW6s3joLWGuE6+dkzesh45yvjMsJDuCGskFHpu0CvLI9oA2Mb1vV12GYb/HCgUYFOPmlTIKFcAAASAABjTg5g==" type="image/avif"><img src="//:0" alt="cover" width="720" height="293" decoding="sync"></picture></div><p>In case you have a lot of items and it&#39;s inconvenient to assign them via editor menu, it&#39;s possible to just drop them at <code>Resources/Naninovel/Inventory</code> folder and they&#39;ll automatically be exposed to the engine. You can additionally organize them with sub-folders, if you wish; in this case use forward slashes (<code>/</code>) when referencing them in naninovel scripts. Eg, item stored as <code>Resources/Naninovel/Inventory/Armor/FullPlate.prefab</code> can be referenced in scripts as <code>Armor/FullPlate</code>.</p><p>It&#39;s also possible to use <a href="/naninovel-docs/guide/resource-providers#addressable" class="vp-link">addressable asset system</a> to manually expose the resources. To expose an asset, assign address equal to the path you&#39;d use to expose it via the method described above, except omit the &quot;Resources/&quot; part. Eg, to expose a &quot;FullPlate.prefab&quot; item, assign the prefab asset following address: <code>Naninovel/Inventory/FullPlate</code>. Be aware, that addressable provider is not used in editor by default; you can allow it by enabling <code>Enable Addressable In Editor</code> property in resource provider configuration menu.</p><p>Each item has a <code>Stack Count Limit</code> property to limit how much items of this type can be stacked in a single inventory slot and a <code>On Item Used</code> Unity event, which is invoked when the item is used (either via <code>@useItem</code> command or when user clicks on the item in the inventory). Below is an example on how you can setup the event with <code>Play Script</code> component to remove the item once it used, spawn a glitch special effect and print a text message.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+m+'" type="image/avif"><source srcset="'+u+`"><img data-imgit-loadable alt="" width="497" height="324" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAAyAAIAAAABAAACAgAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAABAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAATW1kYXQKCDgQ7+0gIaAEMiYVwAQQQQSAAADFYdC9gpUx+o1E8obpcpofiMVag7BiSErnCPgngAoFGBDv7SoyChXAAAEgAAJrDuE=" type="image/avif"><img src="//:0" alt="cover" width="497" height="324" decoding="sync"></picture></div><p>You can add items to the inventory with <code>@addItem</code> command and remove with <code>@removeItem</code> (or <code>@removeItemAt</code>, <code>@removeAllItems</code>). Item IDs are equal to the item prefab names. Inventory slot IDs are equal to the grid slot indexes (eg, first slot is 0, second is 1, etc).</p><p><code>ItemExist()</code> and <code>ItemCount()</code> custom <a href="/naninovel-docs/guide/script-expressions#expression-functions" class="vp-link">expression functions</a> to check wither an items exist in inventory and number of existing items are also available for convenience.</p><p>Below is a script from the example project:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#51A612;--shiki-dark:#9BC37C;"># Start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Select an action.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[skipInput]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Pick up sword&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">!ItemExist(&quot;Sword&quot;)</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> do:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@addItem</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Sword, </span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Adventure&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Pick up armor&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">!ItemExist(&quot;Armor&quot;)</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> do:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@addItem</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Armor, </span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Adventure&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Adventure awaits, venture forth!&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@stop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#51A612;--shiki-dark:#9BC37C;"># Adventure</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> ItemExist(&quot;Sword&quot;)</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@set</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> monstersSlayed=</span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{ItemExist(&quot;Armor&quot;) ? Random(3,5) : 2}</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@addItem</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Food</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> amount:</span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{monstersSlayed}</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">	You&#39;ve encountered and slayed </span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{monstersSlayed}</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> monsters with your sword.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> !</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;">ItemExist</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">(&quot;Armor&quot;)</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> You could&#39;ve been more productive with an armor, though.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[endif][i][showUI</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Inventory</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> wait:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Check your inventory for the loot!</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Start</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@else</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">	But you don&#39;t have a weapon! You&#39;ve been beaten by the monsters.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> ItemExist(&quot;Armor&quot;)</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> At least it didn&#39;t hurt that much, thanks to the armor.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[endif]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Let&#39;s prepare better next time.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Start</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@endif</span></span></code></pre></div>`,19),b=[y,B,v];function E(C,w,f,I,D,F){return t(),i("div",null,b)}const G=s(h,[["render",E]]);export{x as __pageData,G as default};
