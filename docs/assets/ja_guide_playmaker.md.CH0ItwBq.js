import{_ as e,c as i,o as t,f as a,D as A,dO as s,dP as l,dQ as n,dR as o,dS as r,dT as c}from"./chunks/framework.BG74BkEs.js";const G=JSON.parse('{"title":"Playmaker","description":"","frontmatter":{},"headers":[],"relativePath":"ja/guide/playmaker.md","filePath":"ja/guide/playmaker.md","lastUpdated":1698833889000}'),p={name:"ja/guide/playmaker.md"},d=n+" 1x",h=o+" 1x",g=r+" 1x",m=c+" 1x",k=s+" 1x",u=l+" 1x",y=a('<h1 id="playmaker" tabindex="-1">Playmaker <a class="header-anchor vp-link" href="#playmaker" aria-label="Permalink to &quot;Playmaker&quot;">​</a></h1><p><a href="https://assetstore.unity.com/packages/tools/visual-scripting/playmaker-368" class="vp-link" target="_blank" rel="noreferrer">PlayMaker<span class="external-link-icon"> ↗</span></a> は、非プログラマー向けに設計された、人気のあるUnity用のビジュアルスクリプトツールです。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+d+'" type="image/avif"><source srcset="'+h+'"><img data-imgit-loadable alt="" width="720" height="298" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAACJAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAACRbWRhdAoIOBTj5pAQ0AIyfRXAFFCABIEEAO5MbQZsA6OUkruOHMbAOLsk6ETUqSrJFU/wn0XoLmjzAgQj+B+8kSi3fKPaJqC7WEva3yPLauclobY8RyqYvkm7BOyQTAnqZ6feHtNONI+CV3STdcJ1Enh+4fmve/Z3U38kM+ZK0CyfLBZ1p8XeEEyQwUkQ" type="image/avif"><img src="//:0" alt="cover" width="720" height="298" decoding="sync"></picture></div><p>Naninovel のすべての C# API がデフォルトで使用できる Bolt とは対照的に、PlayMaker ではアクションごとに特別な C# クラスを作成する必要があります。つまり、PlayMakerを使用する場合、エンジンAPIの限られたサブセットしか使用できません。Naninovel の API が変更されたとき、使用可能なカスタムアクションも壊れる可能性があります。</p><h2 id="設定" tabindex="-1">設定 <a class="header-anchor vp-link" href="#設定" aria-label="Permalink to &quot;設定&quot;">​</a></h2><p><a href="https://hutonggames.fogbugz.com/default.asp?W11" class="vp-link" target="_blank" rel="noreferrer">公式マニュアル<span class="external-link-icon"> ↗</span></a> の指示に従ってPlayMakerをインストールします。</p><p><a href="https://github.com/Naninovel/PlayMaker/raw/master/NaninovelPlayMaker.unitypackage" class="vp-link" target="_blank" rel="noreferrer">PlayMaker拡張パッケージ<span class="external-link-icon"> ↗</span></a> をダウンロードしてインポートします。</p><p>PlayMakerアクションブラウザの &quot;Naninovel&quot; カテゴリに、カスタム Naninovel アクションが表示されます。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+g+'" type="image/avif"><source srcset="'+m+'"><img data-imgit-loadable alt="" width="320" height="422" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABJAAIAAAABAAACGQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAQAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEAAAABUAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZG1kYXQKCDgNPo0gIaAEMj0VwAAASBAAwede0gIjbc5X9ioAI0Ftvarcg31wAX24eDXoGDCmf4UrCfz1SJBsjfAXRrF1o/x7ZrIe/6syCgUYDT6NKjIKFcAAASAAArlXcQ==" type="image/avif"><img src="//:0" alt="cover" width="320" height="422" decoding="sync"></picture></div><h2 id="使い方" tabindex="-1">使い方 <a class="header-anchor vp-link" href="#使い方" aria-label="Permalink to &quot;使い方&quot;">​</a></h2><p>次の動画は、PlayMaker FSM（有限状態マシン）を使用して Naninovel エンジンを初期化し、シナリオスクリプトをプリロードして再生する方法を紹介しています。</p>',11),v=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=N856vi18XVU",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:k,type:"image/avif"}),A("source",{srcset:u}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAA1AAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAA9bWRhdAoJGAz+GiBAQKCAMigVwAggAASBAADPrs6hx/RVvccQhNFgjeK+fMrZFvkp3aaevTHSsZKA",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/N856vi18XVU?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),b=a(`<h3 id="イベント" tabindex="-1">イベント <a class="header-anchor vp-link" href="#イベント" aria-label="Permalink to &quot;イベント&quot;">​</a></h3><p>重要なNaninovelイベントのいくつかは、自動的に PlayMaker FSM にルーティングされます。そのためには、適切な名前でグローバル <a href="https://hutonggames.fogbugz.com/default.asp?W148" class="vp-link" target="_blank" rel="noreferrer">ユーザーイベント<span class="external-link-icon"> ↗</span></a> を作成し、FSM内で使用します。使用可能なイベント名は次のとおりです:</p><ul><li><code>Naninovel/Engine/OnInitialized</code></li><li><code>Naninovel/ScriptPlayer/OnPlay</code></li><li><code>Naninovel/ScriptPlayer/OnStop</code></li><li><code>Naninovel/StateManager/OnGameSaveStarted</code></li><li><code>Naninovel/StateManager/OnGameSaveFinished</code></li><li><code>Naninovel/StateManager/OnGameLoadStarted</code></li><li><code>Naninovel/StateManager/OnGameLoadFinished</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextStarted</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextFinished</code></li><li><code>Naninovel/LocalizationManager/OnLocaleChanged</code></li></ul><p><code>@playmaker</code> コマンドを使用して、naninovelスクリプトからカスタムPlayMakerイベントをブロードキャストすることもできます:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span></span></code></pre></div><p>— シーン上のアクティブなすべてのFSMから、グローバルユーザーイベント &quot;EventName&quot; を呼び出します。</p><p>このコマンドでは、<code>fsm</code> および <code>object</code> パラメーターを使用して、特定のFSMにイベントを送信することもできます。最初のパラメーターは、イベントを受信するFSM名を指定します。例:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> fsm:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Fsm1,Fsm2</span></span></code></pre></div><p>— 上記は &quot;Fsm1&quot; と &quot;Fsm2&quot; という名前のFSMから、 &quot;EventName&quot; という名前のイベントを呼び出します。</p><p><code>object</code> パラメータが指定されている場合、イベントはFSMにのみ送信され、対応する名前を持つゲームオブジェクトに適用されます。例:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> object:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Obj1,Obj2</span></span></code></pre></div><p>— &quot;Obj1&quot; と &quot;Obj2&quot; という名前のゲームオブジェクトに接続されているすべてのFSMから、イベント &quot;EventName&quot; を呼び出します</p><p>また <code>fsm</code> パラメータと <code>object</code> パラメータを組み合わせて、イベントを受け取るFSMをさらにフィルタリングすることもできます。</p><h3 id="グローバル変数" tabindex="-1">グローバル変数 <a class="header-anchor vp-link" href="#グローバル変数" aria-label="Permalink to &quot;グローバル変数&quot;">​</a></h3><p>Naninovelスクリプトから PlayMaker のグローバル変数にアクセスできます。拡張パッケージのカスタム <a href="/naninovel-docs/ja/guide/script-expressions.html#関数式" class="vp-link">関数式</a> を使います:</p><ul><li><code>GetPlayMakerGlobalVariable(&quot;variableName&quot;)</code> — &quot;variableName&quot;という名前の単純型（int、float、stringなど）の変数を取得します</li><li><code>GetPlayMakerGlobalArray(&quot;variableName&quot;, arrayIndex)</code> — &quot;variableName&quot;という名前の配列変数のインデックス &quot;arrayIndex&quot; に格納されている値を取得します</li></ul><p>整数 &quot;Score&quot; と、bool配列のグローバルPlayMaker変数 &quot;FinishedRoutes&quot; がある場合、次のように Naninovel スクリプトで使用できます:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> My score is </span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{GetPlayMakerGlobalVariable(&quot;Score&quot;)}</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> GetPlayMakerGlobalArray(&quot;FinishedRoutes&quot;,2)</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Third route (second array index) is completed.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@else</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Not yet.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@endif</span></span></code></pre></div>`,18),B=[y,v,b];function _(C,f,E,F,M,w){return t(),i("div",null,B)}const q=e(p,[["render",_]]);export{G as __pageData,q as default};
