import{_ as A,c as s,o as a,f as i,dq as e,dr as t,ds as n,dt as l,du as p,dv as h,dw as d,dx as c}from"./chunks/framework.BG74BkEs.js";const Y=JSON.parse('{"title":"テキスト管理","description":"","frontmatter":{},"headers":[],"relativePath":"ja/guide/managed-text.md","filePath":"ja/guide/managed-text.md","lastUpdated":1698833889000}'),o={name:"ja/guide/managed-text.md"},g=e+" 1x",k=t+" 1x",r=n+" 1x",m=l+" 1x",E=p+" 1x",u=h+" 1x",y=d+" 1x",B=c+" 1x",C=i('<h1 id="テキスト管理" tabindex="-1">テキスト管理 <a class="header-anchor vp-link" href="#テキスト管理" aria-label="Permalink to &quot;テキスト管理&quot;">​</a></h1><p>テキスト管理機能により、ゲーム内UIやキャラクターの表示名など、Naninovel全体で使用されるさまざまなテキスト要素を管理（置換）できます。このドキュメントはローカライズが可能です。</p><p>テキスト管理ドキュメントを生成するには、<code>Naninovel -&gt; Tools -&gt; Managed Text</code> エディターのコンテキストメニューから、テキスト管理ツールを使用します。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+g+'" type="image/avif"><source srcset="'+k+'"><img data-imgit-loadable alt="Managed Text Tool" width="499" height="163" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABLAAIAAAABAAACGwAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAACAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAAAgAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZm1kYXQKCDgQr9pAQ0AIMj8VwBBAgQSFRQDNsBQAeWv27kK91GKWfY0mPSeQXoG5DLyCaT/V6g8gKDxItqyWXJb4hvxzw0tTUop5JUcQVMIKBRgQr9pUMgoVwAABIAACaw7h" type="image/avif"><img src="//:0" alt="cover" width="499" height="163" decoding="sync"></picture></div><p>&quot;Select&quot; ボタンで、テキスト管理ドキュメント（デフォルトでは <code>Resources/Naninovel/Text</code> です）を保存するパスを選択し、 &quot;Generate&quot; ボタンを押してドキュメントを作成します。</p><p>アセットのコンテキストメニュー <code>Create -&gt; Naninovel -&gt; Managed Text</code> からも、テキスト管理ドキュメントを作成できます。</p><p>テキスト管理ドキュメントの各行は、次の形式になっています: <em>Path</em>: <em>Value</em>, ここで <em>Path</em> はテキスト変数へのパスで、<em>Value</em> はその変数の値です。たとえば、組み込みのUIのレコードを含む &quot;DefaultUI&quot; ドキュメントのデフォルトの内容は次のとおりです。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+r+'" type="image/avif"><source srcset="'+m+'"><img data-imgit-loadable alt="Managed Text Document" width="362" height="163" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABFAAIAAAABAAACFQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAASAAAACAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEgAAAAgAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAYG1kYXQKCDgQo9pAQ0AIMjkVwAMMAASEBQDwXKhSOkb8XyE+u62X9yEvzGK0CywpNegYOP1WbLsKinWaYKf346z8K+z/kbInKGIKBRgQo9pUMgoVwAABIAACaw7h" type="image/avif"><img src="//:0" alt="cover" width="362" height="163" decoding="sync"></picture></div><p>値を編集すると、次の実行時に変更が適用されます。</p><p><code>Delete Unused</code> プロパティを有効にすると、<code>ManagedTextProvider</code> コンポーネントからもソースコードの <code>ManagedText</code> 属性からも直接参照されていないテキスト管理ドキュメントのレコードは、削除されます（詳細は以下を参照）。</p><h2 id="テキスト管理プロバイダー" tabindex="-1">テキスト管理プロバイダー <a class="header-anchor vp-link" href="#テキスト管理プロバイダー" aria-label="Permalink to &quot;テキスト管理プロバイダー&quot;">​</a></h2><p><code>ManagedTextProvider</code> コンポーネントからスクリプトを作成することなく、任意のUnityゲームオブジェクトをテキスト管理レコードにバインドすることが可能です。コンポーネントをゲームオブジェクトに追加し、カテゴリ（レコードを含むドキュメントの名前）とキー（ドキュメント内のレコードの名前）を指定し、 <code>OnValueChanged</code> イベントを使用して値をゲームオブジェクトのプロパティにバインドします。</p><p>以下は、 &quot;MyCustomText&quot; キーを使用して &quot;MyCustomDocument&quot; ドキュメントに格納されている管理されたテキストレコードをUntiyの &quot;Text&quot; コンポーネントにバインドする例です。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+E+'" type="image/avif"><source srcset="'+u+'"><img data-imgit-loadable alt="" width="497" height="226" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA3AAIAAAABAAACBwAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAACwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAAAsAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUm1kYXQKCDgQ700gIaAEMisVwAwwAASEEQDowt9Ng7LYQo44TU9C2gAHhgxfPxwAludEQHplZRZRvfcYCgUYEO9NKjIKFcAAASAAAmsO4Q==" type="image/avif"><img src="//:0" alt="cover" width="497" height="226" decoding="sync"></picture></div><p><code>ManagedTextProvider</code> コンポーネントがカスタムUI、テキストプリンター、または選択肢ハンドラーで使用される場合、テキスト管理ツールを使用すると、対応するレコードが自動的に生成されます（構成メニューでリソースが割り当てられている場合）。その他の場合は、レコードを手動で追加する必要があります。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+y+'" type="image/avif"><source srcset="'+B+`"><img data-imgit-loadable alt="" width="388" height="83" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA3AAIAAAABAAACBwAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAATAAAABAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEwAAAAQAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUm1kYXQKCDgQZbSAhoAQMisVwAAASIBQ+QYyvqep0BDY4DRioJ7/yG/tVbujPBnBNVJX5IhT6hcXmefyCgUYEGW0qDIKFcAAASAAAmsO4Q==" type="image/avif"><img src="//:0" alt="cover" width="388" height="83" decoding="sync"></picture></div><h2 id="テキスト管理変数" tabindex="-1">テキスト管理変数 <a class="header-anchor vp-link" href="#テキスト管理変数" aria-label="Permalink to &quot;テキスト管理変数&quot;">​</a></h2><p>テキスト管理レコードをソースコードの変数にバインドすることもできます。 そのためには、C＃スクリプトの静的文字列フィールドに <code>ManagedText</code> 属性を追加します。値は、エンジンの初期化時に、テキスト管理ドキュメントで指定された値で上書きされます。</p><p>以下は、テキスト管理変数を使用して C# スクリプトでラベルをローカライズする例です。</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Naninovel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UnityEngine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Unityのテキストコンポーネントからクラスを継承し、それを1つのコンポーネントとして使用できるようにします。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomLabel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Text</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 管理テキストレコード &quot;CustomLabel.LabelText&quot; の値が</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // エンジンの初期化時に以下の変数に割り当てられ、ロケールの変更時に更新します。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ManagedText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyCustomUI&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;MyCustomUI&quot; は、レコードを保持する管理テキストドキュメントの名前です。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LabelText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Default Value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;Default Value&quot; はレコードのデフォルト値です。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Awake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Awake</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LabelText; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 管理テキストレコードの現在の値をラベルに割り当てます。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ユーザーが実行時にロケールを変更したときにラベルを更新します。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Engine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ILocalizationManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;().OnLocaleChanged </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LabelText;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="スクリプトテキスト" tabindex="-1">スクリプトテキスト <a class="header-anchor vp-link" href="#スクリプトテキスト" aria-label="Permalink to &quot;スクリプトテキスト&quot;">​</a></h2><p>naninovelスクリプトから直接、テキスト管理の値を取得することが可能です。これは、スクリプト式でテキストを使用する必要があり、テキストをローカライズできるようにする必要がある場合に便利です。</p><p>&quot;Script&quot; という名前のテキスト管理ドキュメントを作成し、<code>T_</code>または<code> t_</code>プレフィックスが付いたキーを使用してレコードを追加します。これでスクリプト式の値を参照できるようになりました。たとえば、 &quot;Script&quot; というテキスト管理ドキュメントに次のレコードがあるとします:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span>T_Greeting1: Hey!</span></span>
<span class="line"><span>T_Greeting2: Hello!</span></span>
<span class="line"><span>T_Greeting3: Hi!</span></span></code></pre></div><p>— 次のようにして値を参照できます:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@print</span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;"> {Random(T_Greeting1,T_Greeting2,T_Greeting3)}</span></span></code></pre></div><p>もちろんテキスト管理ドキュメント &quot;Script&quot; は、他のドキュメントと同じようにローカライズできます。したがって、ユーザーが別のロケールを選択すると、対応するローカライズ化ドキュメントからテキストが自動的に参照されます。</p><h2 id="ローカリゼーション" tabindex="-1">ローカリゼーション <a class="header-anchor vp-link" href="#ローカリゼーション" aria-label="Permalink to &quot;ローカリゼーション&quot;">​</a></h2><p>テキスト管理のローカリゼーション手順は、naninovel スクリプトのローカリゼーション手順と似ています:</p><ol><li><code>Resources/Naninovel/Text</code> フォルダーに必要なテキスト管理ドキュメントを生成（作成、編集）します。</li><li>ロケールフォルダーでローカリゼーションユーティリティを実行します(<code>Resources/Naninovel/Localization/{Locale}</code>, ここで <code>{Locale}</code> はターゲットロケールのタグです）。</li><li>元のテキスト管理ドキュメントのローカリゼーションドキュメントが、対応するロケールフォルダーに表示されます。それに翻訳を追加または編集します。</li></ol><p>テキスト管理ドキュメントと、それに対応するローカリゼーションファイルなどを更新するには、最初に <code>Resources/Naninovel/Text</code> フォルダーで、生成された管理されたテキストユーティリティを実行します。次に <code>Resources/Naninovel/Localization/{Locale}</code> フォルダーでローカリゼーションユーティリティを実行します。どちらのユーティリティも既存の変更（管理されたテキストレコードとその翻訳）をデフォルトで保持しようとするため、更新する度に最初から書き直す必要はありません。</p><p>ローカリゼーションユーティリティの使い方の詳細は、<a href="/naninovel-docs/ja/guide/localization" class="vp-link">ローカライズ</a> をご覧ください。</p><div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>テキスト管理を含むローカリゼーション設定の例は、<a href="/naninovel-docs/ja/guide/getting-started#デモプロジェクト" class="vp-link">デモプロジェクト</a> にあります。ご自身のプロジェクトでローカリゼーションの設定に問題が発生した場合の参考としてご利用ください。</p></div>`,33),b=[C];function v(G,F,w,Q,x,_){return a(),s("div",null,b)}const I=A(o,[["render",v]]);export{Y as __pageData,I as default};
