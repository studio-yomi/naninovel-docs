import{_ as e,c as i,o as t,f as a,D as A,dO as s,dP as l,dQ as n,dR as o,dS as r,dT as c}from"./chunks/framework.BG74BkEs.js";const G=JSON.parse('{"title":"Playmaker","description":"","frontmatter":{},"headers":[],"relativePath":"ru/guide/playmaker.md","filePath":"ru/guide/playmaker.md","lastUpdated":1698833889000}'),p={name:"ru/guide/playmaker.md"},d=n+" 1x",h=o+" 1x",g=r+" 1x",m=c+" 1x",k=s+" 1x",u=l+" 1x",y=a('<h1 id="playmaker" tabindex="-1">Playmaker <a class="header-anchor vp-link" href="#playmaker" aria-label="Permalink to &quot;Playmaker&quot;">​</a></h1><p><a href="https://assetstore.unity.com/packages/tools/visual-scripting/playmaker-368" class="vp-link" target="_blank" rel="noreferrer">PlayMaker<span class="external-link-icon"> ↗</span></a> – популярный визуальный сценарный инструмент Unity, специально разработанный для удобства работы пользователей, не являющихся программистами.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+d+'" type="image/avif"><source srcset="'+h+'"><img data-imgit-loadable alt="" width="720" height="298" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAACJAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAACRbWRhdAoIOBTj5pAQ0AIyfRXAFFCABIEEAO5MbQZsA6OUkruOHMbAOLsk6ETUqSrJFU/wn0XoLmjzAgQj+B+8kSi3fKPaJqC7WEva3yPLauclobY8RyqYvkm7BOyQTAnqZ6feHtNONI+CV3STdcJ1Enh+4fmve/Z3U38kM+ZK0CyfLBZ1p8XeEEyQwUkQ" type="image/avif"><img src="//:0" alt="cover" width="720" height="298" decoding="sync"></picture></div><p>Имейте в виду, что в отличие от Bolt, где все C# API Naninovel доступны по умолчанию, PlayMaker требует создания специального класса C# для каждого действия. Это означает, что только ограниченное подмножество API движка доступно из коробки при использовании PlayMaker. Доступные пользовательские действия также могут нарушиться в случае изменения API Naninovel.</p><h2 id="установка" tabindex="-1">Установка <a class="header-anchor vp-link" href="#установка" aria-label="Permalink to &quot;Установка&quot;">​</a></h2><p>Установите PlayMaker, следуя инструкциям из <a href="https://hutonggames.fogbugz.com/default.asp?W11" class="vp-link" target="_blank" rel="noreferrer">официального руководства<span class="external-link-icon"> ↗</span></a>.</p><p>Скачайте и импортируйте <a href="https://github.com/Naninovel/PlayMaker/raw/master/NaninovelPlayMaker.unitypackage" class="vp-link" target="_blank" rel="noreferrer">пакет расширения PlayMaker<span class="external-link-icon"> ↗</span></a>.</p><p>Пользовательские действия Naninovel должны появиться в браузере действий PlayMaker в категории &quot;Naninovel&quot;.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+g+'" type="image/avif"><source srcset="'+m+'"><img data-imgit-loadable alt="" width="320" height="422" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABJAAIAAAABAAACGQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAQAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAEAAAABUAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZG1kYXQKCDgNPo0gIaAEMj0VwAAASBAAwede0gIjbc5X9ioAI0Ftvarcg31wAX24eDXoGDCmf4UrCfz1SJBsjfAXRrF1o/x7ZrIe/6syCgUYDT6NKjIKFcAAASAAArlXcQ==" type="image/avif"><img src="//:0" alt="cover" width="320" height="422" decoding="sync"></picture></div><h2 id="использование" tabindex="-1">Использование <a class="header-anchor vp-link" href="#использование" aria-label="Permalink to &quot;Использование&quot;">​</a></h2><p>В следующем видео демонстрируется использование FSM PlayMaker (finite state machine) для инициализации движка Naninovel, предварительной загрузки и воспроизведения сценария.</p>',11),v=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=N856vi18XVU",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:k,type:"image/avif"}),A("source",{srcset:u}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAA1AAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAA9bWRhdAoJGAz+GiBAQKCAMigVwAggAASBAADPrs6hx/RVvccQhNFgjeK+fMrZFvkp3aaevTHSsZKA",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/N856vi18XVU?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),b=a(`<h3 id="события" tabindex="-1">События <a class="header-anchor vp-link" href="#события" aria-label="Permalink to &quot;События&quot;">​</a></h3><p>Некоторые из основных событий Naninovel могут быть автоматически перенаправлены в FSM PlayMaker. Для этого создайте глобальное <a href="https://hutonggames.fogbugz.com/default.asp?W148" class="vp-link" target="_blank" rel="noreferrer">пользовательское событие<span class="external-link-icon"> ↗</span></a> с соответствующим именем и используйте его внутри FSM. Ниже приведены доступные имена событий:</p><ul><li><code>Naninovel/Engine/OnInitialized</code></li><li><code>Naninovel/ScriptPlayer/OnPlay</code></li><li><code>Naninovel/ScriptPlayer/OnStop</code></li><li><code>Naninovel/StateManager/OnGameSaveStarted</code></li><li><code>Naninovel/StateManager/OnGameSaveFinished</code></li><li><code>Naninovel/StateManager/OnGameLoadStarted</code></li><li><code>Naninovel/StateManager/OnGameLoadFinished</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextStarted</code></li><li><code>Naninovel/TextPrinterManager/OnPrintTextFinished</code></li><li><code>Naninovel/LocalizationManager/OnLocaleChanged</code></li></ul><p>Кроме того, можно транслировать пользовательские события PlayMaker из сценариев Naninovel с помощью команды <code>@playmaker</code>:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span></span></code></pre></div><p>— вызовет глобальное пользовательское событие с именем &quot;EventName&quot; во всех активных FSM в сцене.</p><p>Команда также позволяет отправлять события в определенные FSM с помощью параметров <code>fsm</code> и <code>object</code>. Первый параметр позволяет указать имена FSM, которые должны принимать событие, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> fsm:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Fsm1,Fsm2</span></span></code></pre></div><p>— вызовет событие с именем &quot;EventName&quot; для FSM с именами &quot;Fsm1&quot; и &quot;Fsm2&quot;.</p><p>Когда параметр <code>object</code> задан, событие будет отправлено только в те FSM, которые применяются к игровым объектам, имеющим соответствующие имена, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@playmaker</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> EventName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> object:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Obj1,Obj2</span></span></code></pre></div><p>— вызовет событие с именем &quot;EventName&quot; для всех FSM, которые прикреплены к игровым объектам с именами &quot;Obj1&quot; и &quot;Obj2&quot;.</p><p>Вы также можете объединить параметры <code>fsm</code> и <code>object</code> для дальнейшей фильтрации FSM, которые должны получить событие.</p><h3 id="глобальные-переменные" tabindex="-1">Глобальные переменные <a class="header-anchor vp-link" href="#глобальные-переменные" aria-label="Permalink to &quot;Глобальные переменные&quot;">​</a></h3><p>В сценариях Naninovel можно получить доступ к глобальной переменной PlayMaker со следующими пользовательскими <a href="/naninovel-docs/ru/guide/script-expressions.html#expression-functions" class="vp-link">выражениями функций</a>, доступными в пакете расширений:</p><ul><li><code>GetPlayMakerGlobalVariable(&quot;variableName&quot;)</code> — возвращает переменную простого типа (int, float, строка, и т.д.) c именем &quot;variableName&quot;</li><li><code>GetPlayMakerGlobalArray(&quot;variableName&quot;, arrayIndex)</code> — возвращает значение, хранящееся в индексе &quot;arrayIndex&quot; массива переменной с именем &quot;variableName&quot;</li></ul><p>К примеру, у вас есть целое число &quot;Score&quot; и глобальные переменные PlayMaker булева массива &quot;FinishedRoutes&quot; – вы можете использовать их в сценариях Naninovel следующим образом:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> My score is </span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{GetPlayMakerGlobalVariable(&quot;Score&quot;)}</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> GetPlayMakerGlobalArray(&quot;FinishedRoutes&quot;,2)</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Third route (second array index) is completed.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@else</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">    Not yet.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@endif</span></span></code></pre></div>`,18),B=[y,v,b];function _(C,f,E,F,M,w){return t(),i("div",null,B)}const q=e(p,[["render",_]]);export{G as __pageData,q as default};
