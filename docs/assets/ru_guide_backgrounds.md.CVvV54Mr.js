import{_ as s,c as e,o as i,f as a,D as A,av as n,aw as t,ax as l,ay as p,ga as c,gb as o,gc as r,gd as d,aH as h,aI as g}from"./chunks/framework.BG74BkEs.js";const N=JSON.parse('{"title":"Фоны","description":"","frontmatter":{},"headers":[],"relativePath":"ru/guide/backgrounds.md","filePath":"ru/guide/backgrounds.md","lastUpdated":1698833889000}'),k={name:"ru/guide/backgrounds.md"},m=l+" 1x",u=p+" 1x",B=c+" 1x",y=o+" 1x",b=r+" 1x",C=d+" 1x",v=n+" 1x",_=t+" 1x",E=h+" 1x",f=g+" 1x",D=a('<h1 id="фоны" tabindex="-1">Фоны <a class="header-anchor vp-link" href="#фоны" aria-label="Permalink to &quot;Фоны&quot;">​</a></h1><p>В отличие от <a href="/naninovel-docs/ru/guide/characters" class="vp-link">персонажей</a>, фоны – это акторы, используемые для представления <em>заднего</em> плана сцены: локаций, декораций, пейзажей – всего, что всегда должно появляться <em>позади</em> персонажей.</p><p>Фоновый актор определяется с помощью имени, внешности, видимости и трансформации (такой как положение, поворот, масштаб). Он может изменять внешность, видимость и трансформироваться с течением времени.</p><p>Поведение фонов можно настроить с помощью контекстного меню <code>Naninovel -&gt; Configuration -&gt; Backgrounds</code>; доступные параметры см. в разделе <a href="/naninovel-docs/ru/guide/configuration#фоны" class="vp-link">Руководство по конфигурации</a>. Доступ к менеджеру ресурсов фонов можно получить с помощью контекстного меню <code>Naninovel -&gt; Resources -&gt; Backgrounds</code>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+m+'" type="image/avif"><source srcset="'+u+`"><img data-imgit-loadable alt="" width="720" height="417" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABKAAIAAAABAAACGgAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABUAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZm1kYXQKCDgVI6NICGgBMj4VwAggggSIQADrlE7afICQtApILRfYnIvWieyonup0BZqQcvARUT1Rfyd5EarD31jDrIm2WCNXKWnWyWfw8AoGGBUjo0qAMgoVwAABIAAGNODm" type="image/avif"><img src="//:0" alt="cover" width="720" height="417" decoding="sync"></picture></div><p>Если у вас много фонов, и их неудобно назначать через меню редактора, можно просто поместить их в папку <code>Resources/Naninovel/Backgrounds</code>, рассортировав их по папкам, соответствующим идентификаторам акторов. Например, чтобы добавить внешность для фонового актора с ID &quot;MainBackground&quot;, сохраните текстуры (спрайты) в папке <code>Resources/Naninovel/Backgrounds/MainBackground</code>, и они автоматически будут доступны в сценариях.</p><p>Вы можете дополнительно организовать ресурсы внешностей с помощью подпапок, если хотите; в этом случае используйте прямой слеш (<code>/</code>) при ссылке на них в сценариях Naninovel. Например, текстура внешности по адресу <code>Resources/Naninovel/Backgrounds/MainBackground/Events/CG251</code> может быть объявлена как <code>Events/CG251</code>.</p><p>Также можно использовать <a href="/naninovel-docs/ru/guide/resource-providers#адресация" class="vp-link">систему адресируемых ассетов</a>, чтобы вручную распределить ресурсы. Чтобы предоставить доступ к ассету, назначьте адрес, равный пути, который вы использовали бы для его объявления с помощью метода, описанного выше, за исключением опущенной части &quot;Resources/&quot;. Например, для объявления внешности &quot;Beach&quot; для фона &quot;MainBackground&quot; назначьте ассету следующий адрес: <code>Naninovel/Backgrounds/MainBackground/Beach</code>. Имейте в виду, что адресируемый провайдер по умолчанию не используется в редакторе; вы можете разрешить его, включив свойство <code>Enable Addressable In Editor</code> в меню конфигурации провайдера ресурсов.</p><p>В сценариях Naninovel фоны в основном контролируются с помощью команды <a href="/ru/api/#back" target="_blank"><code>@back</code></a>:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Установить \`River\` как внешность основного фона</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> River</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; То же, что выше, но с использованием эффекта перехода \`RadialBlur\`</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> River.RadialBlur</span></span></code></pre></div><p>Фоны обрабатываются немного иначе, нежели персонажи, чтобы лучше приспособиться к традиционному течению сценария визуальных новелл. Большую часть времени вы, вероятно, будете иметь одного фонового актора в сцене, который будет постоянно менять внешности. Чтобы избавиться от лишнего повторения одного и того же ID актора в сценариях, можно предоставить только внешность фона и тип перехода (необязательно) в качестве безымянного параметра, что автоматически преобразует актора &quot;MainBackground&quot;. Если это не так, ID фонового актора может быть конкретно указан с помощью параметра <code>id</code>:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Дан фоновый актор \`CityVideo\` с внешностями \`Night\` и \`Day\` (видеоклипы)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Вывести в качестве дневного фона проигрываемый видеоклип</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">CityVideo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Перейти к ночному фону с эффектом \`Ripple\`</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Night.Ripple</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">CityVideo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Скрыть фон</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@hide</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CityVideo</span></span></code></pre></div><p>Запись актора &quot;MainBackground&quot; создается по умолчанию в диспетчере фоновых ресурсов и не может быть переименована или удалена; однако параметры основных фонов (реализация, pivot, PPU и т. д.) могут быть свободно изменены.</p><h2 id="позы" tabindex="-1">Позы <a class="header-anchor vp-link" href="#позы" aria-label="Permalink to &quot;Позы&quot;">​</a></h2><p>Каждый фон имеет свойство <code>Poses</code>, позволяющее задавать различные именованные состояния (&quot;позы&quot;).</p><p>Название позы может быть использовано в качестве внешности в команде <a href="/ru/api/#back" target="_blank"><code>@back</code></a> для применения всех параметров, указанных в позе сразу, вместо того, чтобы указывать их по отдельности с помощью команд параметров.</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Данная поза \`Day\` определена для основного фона,</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; применяет все параметры, указанные в состоянии позы.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; То же самое, что выше, но для фонового актора с ID \`City\`</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; и с помощью перехода \`DropFade\` за 3 секунды.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">City</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> transition:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">DropFade</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> time:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">3</span></span></code></pre></div><p>Обратите внимание, что когда поза используется в качестве внешности, вы все еще можете переопределить отдельные параметры, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Данная поза \`Day\` определена для основного фона,</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; применяет все параметры, указанные в состоянии позы,</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; за исключением оттенка, который переопределён отдельной командой.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> tint:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">#ff45cb</span></span></code></pre></div><h2 id="спраитовые-фоны" tabindex="-1">Спрайтовые фоны <a class="header-anchor vp-link" href="#спраитовые-фоны" aria-label="Permalink to &quot;Спрайтовые фоны&quot;">​</a></h2><p>Спрайтовая реализация акторов фона является наиболее распространенной и простой; она использует один <a href="https://docs.unity3d.com/Manual/Sprites" class="vp-link" target="_blank" rel="noreferrer">спрайтовый<span class="external-link-icon"> ↗</span></a> ассет для представления внешности фона. Источником спрайта может быть изображение в формате <code>.jpg</code> или <code>.png</code>.</p><h2 id="видео-фоны" tabindex="-1">Видео-фоны <a class="header-anchor vp-link" href="#видео-фоны" aria-label="Permalink to &quot;Видео-фоны&quot;">​</a></h2><p>Видео-фоны используют ассеты <a href="https://docs.unity3d.com/Manual/class-VideoClip" class="vp-link" target="_blank" rel="noreferrer">видеоклипов<span class="external-link-icon"> ↗</span></a> ассет для представления внешности фона.</p><p>Видео-фоны могут управляться только графическим интерфейсом редактора.</p><p>Поддерживаемые видеоформаты для каждой платформы см. в разделе <a href="https://docs.unity3d.com/Manual/VideoSources-FileCompatibility.html" class="vp-link" target="_blank" rel="noreferrer">документации Unity для видеоресурсов<span class="external-link-icon"> ↗</span></a>.</p><p>Для справки, вот подробные параметры видео фонового видеоклипа, который используется в нашей демо-версии WebGL:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span>Container : MPEG-4</span></span>
<span class="line"><span>Container profile : Base Media</span></span>
<span class="line"><span>Container codec ID : isom (isom/iso2/avc1/mp41)</span></span>
<span class="line"><span>Format : AVC</span></span>
<span class="line"><span>Format/Info : Advanced Video Codec</span></span>
<span class="line"><span>Format profile : High@L4</span></span>
<span class="line"><span>Format settings, CABAC : Yes</span></span>
<span class="line"><span>Format settings, RefFrames : 4 frames</span></span>
<span class="line"><span>Codec ID : avc1</span></span>
<span class="line"><span>Codec ID/Info : Advanced Video Coding</span></span>
<span class="line"><span>Bit rate : 3 196 kb/s</span></span>
<span class="line"><span>Width : 1 920 pixels</span></span>
<span class="line"><span>Height : 1 080 pixels</span></span>
<span class="line"><span>Display aspect ratio : 16:9</span></span>
<span class="line"><span>Frame rate mode : Constant</span></span>
<span class="line"><span>Frame rate : 25.000 FPS</span></span>
<span class="line"><span>Color space : YUV</span></span>
<span class="line"><span>Chroma subsampling : 4:2:0</span></span>
<span class="line"><span>Bit depth : 8 bits</span></span>
<span class="line"><span>Scan type : Progressive</span></span>
<span class="line"><span>Writing library : x264 core 148 r2795 aaa9aa8</span></span>
<span class="line"><span>Encoding settings : cabac=1 / ref=3 / deblock=1:0:0 / analyse=0x3:0x113 / me=hex / subme=7 / psy=1 / psy_rd=1.00:0.00 / mixed_ref=1 / me_range=16 / chroma_me=1 / trellis=1 / 8x8dct=1 / cqm=0 / deadzone=21,11 / fast_pskip=1 / chroma_qp_offset=-2 / threads=12 / lookahead_threads=2 / sliced_threads=0 / nr=0 / decimate=1 / interlaced=0 / bluray_compat=0 / constrained_intra=0 / bframes=3 / b_pyramid=2 / b_adapt=1 / b_bias=0 / direct=1 / weightb=1 / open_gop=0 / weightp=2 / keyint=250 / keyint_min=25 / scenecut=40 / intra_refresh=0 / rc_lookahead=40 / rc=crf / mbtree=1 / crf=23.0 / qcomp=0.60 / qpmin=0 / qpmax=69 / qpstep=4 / ip_ratio=1.40 / aq=1:1.00</span></span></code></pre></div><p>А вот настройки импорта Unity для этого видеоклипа:</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+B+'" type="image/avif"><source srcset="'+y+`"><img data-imgit-loadable alt="" width="447" height="377" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABEAAIAAAABAAACFAAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAWAAAAEwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAFgAAABMAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAX21kYXQKCDgRKyaQENACMjgVwAggggSEBAC8gQnzGkC/a6ti1jrKwXcOr/ZZZAwBCYI+4QpU9dh7WqpwIYM72BXa/nIWdit2zQoFGBErJpUyChXAAAEgAAPHhDo=" type="image/avif"><img src="//:0" alt="cover" width="447" height="377" decoding="sync"></picture></div><p>В зависимости от целевой платформы может потребоваться включение перекодирования в настройках импорта видеоклипов.</p><div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>В случае возникновения проблем с достижением плавного лупа убедитесь, что видео имеет одинаковые кадры в начале и конце, а также совместимую настройку кодирования; проверьте наш <a href="https://github.com/Naninovel/Video" class="vp-link" target="_blank" rel="noreferrer">проект с примером зацикленного видео<span class="external-link-icon"> ↗</span></a> для справки.</p></div><p>Имейте в виду, что на WebGL видеоплеер может работать только в потоковом режиме, поэтому все видеоресурсы будут скопированы в папку <code>Assets/StreamingAssets/Backgrounds</code> при создании проигрывателя WebGL. Папка <strong>StreamingAssets</strong> также появится в выходном каталоге сборки; убедитесь, что вы сохранили ее при публикации сборки, и убедитесь, что ваш веб-сервер позволяет считывать данные из этой папки.</p><h2 id="послоиные-фоны" tabindex="-1">Послойные фоны <a class="header-anchor vp-link" href="#послоиные-фоны" aria-label="Permalink to &quot;Послойные фоны&quot;">​</a></h2><p>Послойная реализация позволяет создавать фоны из нескольких спрайтов (слоев), а затем переключать их по отдельности с помощью сценариев Naninovel во время выполнения.</p><p>Чтобы создать префаб послойного фона, используйте контекстное меню ассетов <code>Create -&gt; Naninovel -&gt; Background -&gt; Layered</code>. Войдите в <a href="https://docs.unity3d.com/Manual/EditingInPrefabMode.html" class="vp-link" target="_blank" rel="noreferrer">режим редактирования префаба<span class="external-link-icon"> ↗</span></a> для составления слоев. По умолчанию будет создано несколько слоев и групп. Вы можете использовать их или удалить и добавить свои собственные.</p><p>Послойные фоны схожи с <a href="/naninovel-docs/ru/guide/characters#послойные-персонажи" class="vp-link">послойными персонажами</a>; обратитесь к документации для получения дополнительной информации о том, как настроить и управлять ими с помощью сценариев Naninovel.</p><p>Не забывайте, что безымянный параметр в команде <a href="/ru/api/#back" target="_blank"><code>@back</code></a> ожидает внешность и тип перехода (а не ID и внешность, как в команде <a href="/ru/api/#char" target="_blank"><code>@char</code></a>), поэтому указывайте выражения в композиции слоёв следующим образом:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Дан фоновый актор &quot;LayeredForest&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Group&gt;Layer,Other/Group+Layer,-RootLayer.TransitionType</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">LayeredForest</span></span></code></pre></div><h2 id="универсальные-фоны" tabindex="-1">Универсальные фоны <a class="header-anchor vp-link" href="#универсальные-фоны" aria-label="Permalink to &quot;Универсальные фоны&quot;">​</a></h2><p>Универсальный фон – это наиболее гибкая реализация фонового актора. Он основан на префабе с компонентом <code>BackgroundActorBehaviour</code>, прикрепленным к корневому объекту. Изменения внешности и все остальные фоновые параметры маршрутизируются как <a href="https://docs.unity3d.com/Manual/UnityEvents.html" class="vp-link" target="_blank" rel="noreferrer">события Unity<span class="external-link-icon"> ↗</span></a>, что позволяет реализовать поведение управляемого объекта любым удобным вам способом.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+b+'" type="image/avif"><source srcset="'+C+'"><img data-imgit-loadable alt="" width="478" height="338" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA1AAIAAAABAAACBQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAXAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAFwAAABAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUG1kYXQKCDgQ7e0gIaAEMikVwAggggSBBADFYc8iXslN50fAo9svIiZ2NlxZQsIA2aUBcJbMLEIaqAoFGBDt7SoyChXAAAEgAAJrDuE=" type="image/avif"><img src="//:0" alt="cover" width="478" height="338" decoding="sync"></picture></div><p>Чтобы создать префаб универсального фона по шаблону, используйте контекстное меню ассета <code>Create -&gt; Naninovel -&gt; Background -&gt; Generic</code>.</p><p>Универсальные фоны очень похожи на универсальных персонажей; ознакомьтесь с учебным видео по настройке анимированной 3D-модели в качестве универсального персонажа для одного из возможных примеров использования.</p>',43),w=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=HPxhR0I1u2Q",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:v,type:"image/avif"}),A("source",{srcset:_}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABPAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABXbWRhdAoJGBUjm0QICBQQMkIVwAAASFAQtwW+s3Qs6qk4XRIYbcCLR8VkERSZYm5MnFVYFToD+yOqUfz4OtqjwzonBUfQOr5oxVXOqiqXoBlbNts=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/HPxhR0I1u2Q?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),F=a('<h2 id="фоны-сцен" tabindex="-1">Фоны сцен <a class="header-anchor vp-link" href="#фоны-сцен" aria-label="Permalink to &quot;Фоны сцен&quot;">​</a></h2><p>Вы можете использовать <a href="https://docs.unity3d.com/Manual/CreatingScenes" class="vp-link" target="_blank" rel="noreferrer">сцену Unity<span class="external-link-icon"> ↗</span></a> в качестве заднего плана с реализацией фона сцены.</p><p>Фоны сцен могут управляться только графическим интерфейсом редактора; ресурсы сцен должны храниться в папке проекта <code>Assets/Scenes</code>.</p><p>Первым делом создайте новую (или переместите существующую) сцену в папку <code>Assets/Scenes</code> и убедитесь, что в ней есть хотя бы одна <a href="https://docs.unity3d.com/ScriptReference/Camera.html" class="vp-link" target="_blank" rel="noreferrer">камера<span class="external-link-icon"> ↗</span></a>. После загрузки фона сцены Naninovel назначит текстуру рендеринга первой найденной камере в сцене. Затем текстура рендеринга будет назначена фоновому спрайту, представляющему фон внутри пространства сцены Naninovel. Таким образом, фон сцены сможет сосуществовать с другими акторами фонов и персонажей, поддерживать все эффекты перехода фонов и будет масштабируем для обработки различных соотношений сторон дисплея.</p><p>Убедитесь, что объекты сцены расположены в пространстве так, чтобы они не перекрывались объектами из других сцен, которые потенциально могут быть загружены одновременно (например, будучи объявлены в одном сценарии Naninovel). Кроме того, имейте в виду, что в случае, если фоновый объект сцены расположен вблизи начала координат глобального пространства (<code>x0 y0 z0</code>), он может быть визуализирован основной камерой Naninovel; чтобы предотвратить это, сместите все объекты сцены относительно глобального источника, либо используйте <code>Configuration -&gt; Engine -&gt; Override Objects Layer</code> для изоляции связанных с Naninovel объектов с помощью <a href="https://docs.unity3d.com/Manual/Layers.html" class="vp-link" target="_blank" rel="noreferrer">слоёв<span class="external-link-icon"> ↗</span></a>.</p><p>После завершения настройки сцены создайте новый фоновый актор через меню <code>Naninovel -&gt; Configuration -&gt; Backgrounds</code>, выберите реализацию <code>SceneBackground</code> и добавьте ассет сцены к ресурсам актора.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+E+'" type="image/avif"><source srcset="'+f+'"><img data-imgit-loadable alt="" width="720" height="348" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABaAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABibWRhdAoIOBUjg0gIaAEyThXABBBBBIAQAODTflfqTW5UWfzEsXqNdEvgCKNJLY/WBH/FwBE3I3WxeQGtWWIaE2wHE4bSkeM0/2CKIX9t8SZbWWUEW9Ee7511SuxuQA==" type="image/avif"><img src="//:0" alt="cover" width="720" height="348" decoding="sync"></picture></div><p>При назначении ресурсов для актора фона сцены соответствующие ассеты должны автоматически добавляться в <a href="https://docs.unity3d.com/Manual/BuildSettings.html" class="vp-link" target="_blank" rel="noreferrer">настройки сборки<span class="external-link-icon"> ↗</span></a>; если вы получаете сообщение об ошибке, что ресурс сцены не был добавлен в сборку, попробуйте добавить его вручную.</p><p>Теперь вы можете использовать команду <a href="/ru/api/#back" target="_blank"><code>@back</code></a> для управления созданным фоновым актором сцены, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> SceneName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">ActorId</span></span></code></pre></div>',10),G=[D,w,F];function Q(I,Y,x,W,X,M){return i(),e("div",null,G)}const q=s(k,[["render",Q]]);export{N as __pageData,q as default};
