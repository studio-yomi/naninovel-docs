import{_ as s,c as e,o as i,f as a,D as A,av as n,aw as t,ax as l,ay as p,ga as c,gb as o,gc as r,gd as d,aH as h,aI as g}from"./chunks/framework.BG74BkEs.js";const R=JSON.parse('{"title":"背景","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/backgrounds.md","filePath":"zh/guide/backgrounds.md","lastUpdated":1698833889000}'),k={name:"zh/guide/backgrounds.md"},m=l+" 1x",u=p+" 1x",B=c+" 1x",y=o+" 1x",b=r+" 1x",C=d+" 1x",v=n+" 1x",_=t+" 1x",E=h+" 1x",f=g+" 1x",D=a('<h1 id="背景" tabindex="-1">背景 <a class="header-anchor vp-link" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h1><p>和<a href="/naninovel-docs/zh/guide/characters" class="vp-link">角色</a> 相反，背景是用来表示场景<em>置后层</em>的元素：位置，风景或应始终出现在角色<em>后面</em>的任何东西。</p><p>背景元素使用名称，外观，可见性和变换（位置，旋转，比例）定义。它们可以随着时间改变其外观，可见性和各种形态改变。</p><p>通过 <code>Naninovel -&gt; Configuration -&gt; Backgrounds</code> 菜单来配置背景行为表现，相关配置信息参考<a href="/naninovel-docs/zh/guide/configuration#背景" class="vp-link">属性配置</a>。 可以使用<code>Naninovel -&gt; Resources -&gt; Backgrounds</code>菜单访问背景的资源配置管理器。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+m+'" type="image/avif"><source srcset="'+u+`"><img data-imgit-loadable alt="" width="720" height="417" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABKAAIAAAABAAACGgAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAFQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABUAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAZm1kYXQKCDgVI6NICGgBMj4VwAggggSIQADrlE7afICQtApILRfYnIvWieyonup0BZqQcvARUT1Rfyd5EarD31jDrIm2WCNXKWnWyWfw8AoGGBUjo0qAMgoVwAABIAAGNODm" type="image/avif"><img src="//:0" alt="cover" width="720" height="417" decoding="sync"></picture></div><p>在通过编辑器菜单添加多个背景的时候，可能并不方便，在<code>Resources/Naninovel/Backgrounds</code>目录下直接拖入资源，将其用ID命名的文件夹分类，这样添加也是可以的。比如添加&quot;MainBackground&quot; ID的元素背景，就需要放在<code>Resources/Naninovel/Backgrounds/MainBackground</code>目录下，他们就会被自动被注册至脚本。</p><p>你也可以通过子文件夹来管理相应资源。脚本中需要使用(<code>/</code>)调用。比如<code>Resources/Naninovel/Backgrounds/MainBackground/Events/CG251</code>的资源，脚本中的调用为：<code>Events/CG251</code>。</p><p>使用<a href="/naninovel-docs/zh/guide/resource-providers#寻址资源系统" class="vp-link">可寻址资源系统</a> 来手动公开资源也是可以的。公开资源地址和上述相同，但是需要省略&quot;Resources/&quot;部分。比如将&quot;Beach&quot;注册到&quot;MainBackground&quot;背景下，地址为<code>Naninovel/Backgrounds/MainBackground/Beach</code>。注意，该系统默认不启用你可以通过资源配置菜单的<code>Enable Addressable In Editor</code>属性来启用。</p><p>在naninovel脚本中，背景大部分由<a href="/zh/api/#back" target="_blank"><code>@back</code></a> 命令控制：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 将 \`River\` 设为主背景外观</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> River</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 同上，但是使用\`RadialBlur\`（径向模糊）特效</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> River.RadialBlur</span></span></code></pre></div><p>背景处理和角色有略微不同以适应传统VN游戏流程。多数情况，都只需要一个背景元素显示，然后由其变化至两外一张。为了避免在脚本中使用相同的元素ID的麻烦，在使用<code>MainBackground</code> ID下的元素的时候，可以只用外观名称和过渡效果类型（可选），来调用背景。而其他ID下的背景，则<code>id</code> 必须定义了，如下所示：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 给定\`CityVideo\`背景元素下的\`Night\`和\`Day\`背景（影片剪辑）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 显示视频背景，播放白天的影片剪辑</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">CityVideo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 变化至晚上的影片剪辑，使用波浪效果</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Night.Ripple</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">CityVideo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 隐藏视频背景</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@hide</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CityVideo</span></span></code></pre></div><p>资源管理器中的主背景元素条目是不能被重命名或删除的。但其中的参数（实现，锚点，PPU等）可以任意修改。</p><h2 id="姿态" tabindex="-1">姿态 <a class="header-anchor vp-link" href="#姿态" aria-label="Permalink to &quot;姿态&quot;">​</a></h2><p>每个背景都有<code>Poses</code>属性允许指定特定命名状态（姿势）。</p><p>姿态使用通过<a href="/zh/api/#back" target="_blank"><code>@back</code></a>命令直接调用，如此就可以将姿态的所有设置参数应用于背景上，而非通过单个背景设置其参数，如下所示：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; \`Day\`的姿态配置用于主背景，</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 将该姿态的所有参数应用于背景。pose state.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 同上，但是为\`City\` ID下的背景，</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 使用3s的\`DropFade\`过渡效果。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">City</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> transition:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">DropFade</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> time:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">3</span></span></code></pre></div><p>请注意，将姿态用作外观时，仍然可以覆盖各个参数，例如：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; \`Day\`的姿态配置用于主背景，</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 将该姿态的所有参数应用于背景，</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; 除了着色，由下面的命令来覆写控制。</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Day</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> tint:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">#ff45cb</span></span></code></pre></div><h2 id="图片精灵背景" tabindex="-1">图片精灵背景 <a class="header-anchor vp-link" href="#图片精灵背景" aria-label="Permalink to &quot;图片精灵背景&quot;">​</a></h2><p>精灵背景是最通用也是最简单的，使用单个<a href="https://docs.unity3d.com/Manual/Sprites" class="vp-link" target="_blank" rel="noreferrer">精灵<span class="external-link-icon"> ↗</span></a> 作为背景。资源类型可为<code>.jpg</code> 或 <code>.png</code>图像文件。</p><h2 id="影片背景" tabindex="-1">影片背景 <a class="header-anchor vp-link" href="#影片背景" aria-label="Permalink to &quot;影片背景&quot;">​</a></h2><p>硬盘背景使用<a href="https://docs.unity3d.com/Manual/class-VideoClip" class="vp-link" target="_blank" rel="noreferrer">影片剪辑<span class="external-link-icon"> ↗</span></a> 来表现背景。</p><p>影片背景可以通过编辑器GUI来管理。</p><p>各个平台支持的视频格式参考<a href="https://docs.unity3d.com/Manual/VideoSources-FileCompatibility.html" class="vp-link" target="_blank" rel="noreferrer">Unity视频资源格式说明<span class="external-link-icon"> ↗</span></a> 。</p><p>作为参考，以下为我们在WebGL的demo上使用的视频详细参数：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span>Container : MPEG-4</span></span>
<span class="line"><span>Container profile : Base Media</span></span>
<span class="line"><span>Container codec ID : isom (isom/iso2/avc1/mp41)</span></span>
<span class="line"><span>Format : AVC</span></span>
<span class="line"><span>Format/Info : Advanced Video Codec</span></span>
<span class="line"><span>Format profile : High@L4</span></span>
<span class="line"><span>Format settings, CABAC : Yes</span></span>
<span class="line"><span>Format settings, RefFrames : 4 frames</span></span>
<span class="line"><span>Codec ID : avc1</span></span>
<span class="line"><span>Codec ID/Info : Advanced Video Coding</span></span>
<span class="line"><span>Bit rate : 3 196 kb/s</span></span>
<span class="line"><span>Width : 1 920 pixels</span></span>
<span class="line"><span>Height : 1 080 pixels</span></span>
<span class="line"><span>Display aspect ratio : 16:9</span></span>
<span class="line"><span>Frame rate mode : Constant</span></span>
<span class="line"><span>Frame rate : 25.000 FPS</span></span>
<span class="line"><span>Color space : YUV</span></span>
<span class="line"><span>Chroma subsampling : 4:2:0</span></span>
<span class="line"><span>Bit depth : 8 bits</span></span>
<span class="line"><span>Scan type : Progressive</span></span>
<span class="line"><span>Writing library : x264 core 148 r2795 aaa9aa8</span></span>
<span class="line"><span>Encoding settings : cabac=1 / ref=3 / deblock=1:0:0 / analyse=0x3:0x113 / me=hex / subme=7 / psy=1 / psy_rd=1.00:0.00 / mixed_ref=1 / me_range=16 / chroma_me=1 / trellis=1 / 8x8dct=1 / cqm=0 / deadzone=21,11 / fast_pskip=1 / chroma_qp_offset=-2 / threads=12 / lookahead_threads=2 / sliced_threads=0 / nr=0 / decimate=1 / interlaced=0 / bluray_compat=0 / constrained_intra=0 / bframes=3 / b_pyramid=2 / b_adapt=1 / b_bias=0 / direct=1 / weightb=1 / open_gop=0 / weightp=2 / keyint=250 / keyint_min=25 / scenecut=40 / intra_refresh=0 / rc_lookahead=40 / rc=crf / mbtree=1 / crf=23.0 / qcomp=0.60 / qpmin=0 / qpmax=69 / qpstep=4 / ip_ratio=1.40 / aq=1:1.00</span></span></code></pre></div><p>以下为Unity的视频导入设置图：</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+B+'" type="image/avif"><source srcset="'+y+`"><img data-imgit-loadable alt="" width="447" height="377" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABEAAIAAAABAAACFAAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAWAAAAEwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAFgAAABMAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAX21kYXQKCDgRKyaQENACMjgVwAggggSEBAC8gQnzGkC/a6ti1jrKwXcOr/ZZZAwBCYI+4QpU9dh7WqpwIYM72BXa/nIWdit2zQoFGBErJpUyChXAAAEgAAPHhDo=" type="image/avif"><img src="//:0" alt="cover" width="447" height="377" decoding="sync"></picture></div><p>视发布平台不同，需要看情况勾选转码设置：</p><div class="tip custom-block"><p class="custom-block-title">EXAMPLE</p><p>如果不能无缝循环，请保证视频最后一帧和第一张是相同的，并且编码格式正确；参考我们的<a href="https://github.com/Naninovel/Video" class="vp-link" target="_blank" rel="noreferrer">视频循环示例<span class="external-link-icon"> ↗</span></a> 。</p></div><p>注意，在WebGL下视频播放只能使用流模式，所以发布至WebGL时，所有视频资源都会被拷贝至<code>Assets/StreamingAssets/Backgrounds</code>文件夹。<strong>StreamingAssets</strong>也会出现在项目输出目录；请确保保留由该文件夹，并检查你的web服务器允许读取该目录。</p><h2 id="多图层背景" tabindex="-1">多图层背景 <a class="header-anchor vp-link" href="#多图层背景" aria-label="Permalink to &quot;多图层背景&quot;">​</a></h2><p>多图层背景允许组合不同层背景，在运行时通过Naninovel独立切换。</p><p>要创建该类型背景，使用 To create a layered background prefab, use <code>Create -&gt; Naninovel -&gt; Background -&gt; Layered</code> 菜单，进入<a href="https://docs.unity3d.com/Manual/EditingInPrefabMode.html" class="vp-link" target="_blank" rel="noreferrer">预制体编辑模式<span class="external-link-icon"> ↗</span></a> 来组合图层。默认会创建有多个图层，你可以使用或直接删除这些添加自己的。</p><p>多图层背景和<a href="/naninovel-docs/zh/guide/characters#分层式人物" class="vp-link">多图层人物</a> 类似。关于如何设置和通过脚本调用，可以参考上述链接。</p><p>不要忘了<a href="/zh/api/#back" target="_blank"><code>@back</code></a>命令的无名参数是默认为外观和过渡效果类型（而非和<a href="/zh/api/#char" target="_blank"><code>@char</code></a>命令一样的ID和外观），所以如下所示的方式来指定相应资源表现：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">;  &quot;LayeredForest&quot; 的多图层背景调用</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Group&gt;Layer,Other/Group+Layer,-RootLayer.TransitionType</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">LayeredForest</span></span></code></pre></div><h2 id="传统模型背景" tabindex="-1">传统模型背景 <a class="header-anchor vp-link" href="#传统模型背景" aria-label="Permalink to &quot;传统模型背景&quot;">​</a></h2><p>传统背景是最灵活的背景元素实现。在根物体上关联有<code>BackgroundActorBehaviour</code>组件。外观改变或其他参数修改都通过<a href="https://docs.unity3d.com/Manual/UnityEvents.html" class="vp-link" target="_blank" rel="noreferrer">Unity事件<span class="external-link-icon"> ↗</span></a> 实现，你可以借此实现任何你想要的表现。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+b+'" type="image/avif"><source srcset="'+C+'"><img data-imgit-loadable alt="" width="478" height="338" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA1AAIAAAABAAACBQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAXAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAFwAAABAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUG1kYXQKCDgQ7e0gIaAEMikVwAggggSBBADFYc8iXslN50fAo9svIiZ2NlxZQsIA2aUBcJbMLEIaqAoFGBDt7SoyChXAAAEgAAJrDuE=" type="image/avif"><img src="//:0" alt="cover" width="478" height="338" decoding="sync"></picture></div><p>通过菜单<code>Create -&gt; Naninovel -&gt; Background -&gt; Generic</code>来创建模板预制体。</p><p>传统背景和传统人物类似，观看视频教程了解如何设置有动作的3D模型为传统人物。</p>',43),w=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=HPxhR0I1u2Q",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:v,type:"image/avif"}),A("source",{srcset:_}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABPAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABXbWRhdAoJGBUjm0QICBQQMkIVwAAASFAQtwW+s3Qs6qk4XRIYbcCLR8VkERSZYm5MnFVYFToD+yOqUfz4OtqjwzonBUfQOr5oxVXOqiqXoBlbNts=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/HPxhR0I1u2Q?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),F=a('<h2 id="场景背景" tabindex="-1">场景背景 <a class="header-anchor vp-link" href="#场景背景" aria-label="Permalink to &quot;场景背景&quot;">​</a></h2><p>你可以使用<a href="https://docs.unity3d.com/Manual/CreatingScenes" class="vp-link" target="_blank" rel="noreferrer">Unity场景<span class="external-link-icon"> ↗</span></a> 作为背景来表现场景。</p><p>场景背景仅可以通过编辑器GUI来管理；场景资源存储于<code>Assets/Scenes</code>目录。</p><p>首先，创建一个（或是移动已有）场景到<code>Assets/Scenes</code>目录下，确保场景中至少有一个<a href="https://docs.unity3d.com/ScriptReference/Camera.html" class="vp-link" target="_blank" rel="noreferrer">摄像机<span class="external-link-icon"> ↗</span></a>。 加载场景背景时，Naninobel会自动为第一个找到的摄像机绑定render texture，之后会将其绑定到背景精灵上，再现到相应场景的背景图层。这样，场景背景就能够和其他背景角色元素共存，并能支持各种过渡效果，和各种显示比例。</p><p>确保场景中物体在合适位置，以避免和其他同时加载的场景的物体相互遮挡（比如，在同一个脚本中调用时）。此外，请注意，如果场景背景对象位于全局空间原点（x0 y0 z0）附近，则由Naninovel的主摄像头渲染该对象。为避免这一情况，调整物体偏移远离原点，或是<code>Configuration -&gt; Engine -&gt; Override Objects Layer</code>菜单中调整相关物体<a href="https://docs.unity3d.com/Manual/Layers.html" class="vp-link" target="_blank" rel="noreferrer">层级<span class="external-link-icon"> ↗</span></a>。</p><p>在场景完成后，通过<code>Naninovel -&gt; Configuration -&gt; Backgrounds</code>菜单创建新背景元素，选择<code>SceneBackground</code>将其添加到此。</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+E+'" type="image/avif"><source srcset="'+f+'"><img data-imgit-loadable alt="" width="720" height="348" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABaAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABibWRhdAoIOBUjg0gIaAEyThXABBBBBIAQAODTflfqTW5UWfzEsXqNdEvgCKNJLY/WBH/FwBE3I3WxeQGtWWIaE2wHE4bSkeM0/2CKIX9t8SZbWWUEW9Ee7511SuxuQA==" type="image/avif"><img src="//:0" alt="cover" width="720" height="348" decoding="sync"></picture></div><p>在注册场景背景资源时，<a href="https://docs.unity3d.com/Manual/BuildSettings.html" class="vp-link" target="_blank" rel="noreferrer">build settings<span class="external-link-icon"> ↗</span></a> 应该会自动添加该场景，如果报错提示未添加，请检查并手动添加。</p><p>你可以使用<a href="/zh/api/#back" target="_blank"><code>@back</code></a>来控制创建场景背景元素，如下：</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@back</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> SceneName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> id:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">ActorId</span></span></code></pre></div>',10),G=[D,w,F];function Q(I,Y,x,W,X,M){return i(),e("div",null,G)}const Z=s(k,[["render",Q]]);export{R as __pageData,Z as default};
