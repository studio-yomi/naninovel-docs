import{_ as e,c as s,o as t,f as a,D as A,a as i,aJ as l,aK as c,aL as o,aM as n,aN as p,aO as r,aP as d,aQ as h,aR as g,aS as m,av as u,aw as y,aT as k,aU as b,aX as B,aY as v,ge as w,gf as C,gg as Q,gh as _,b7 as Y,b8 as G,b9 as E,ba as f,bb as D,bc as W,bd as I,be as F,gi as X,gj as x,bh as M,bi as Z,bl as V,bm as R,gk as U,gl as S,gm as q,gn as H,bt as T,bu as N}from"./chunks/framework.BG74BkEs.js";const la=JSON.parse('{"title":"Персонажи","description":"","frontmatter":{},"headers":[],"relativePath":"ru/guide/characters.md","filePath":"ru/guide/characters.md","lastUpdated":1706881550000}'),j={name:"ru/guide/characters.md"},P=B+" 1x",O=v+" 1x",L=w+" 1x",z=C+" 1x",K=Q+" 1x",J=_+" 1x",$=l+" 1x",AA=c+" 1x",aA=Y+" 1x",iA=G+" 1x",eA=E+" 1x",sA=f+" 1x",tA=o+" 1x",lA=n+" 1x",cA=p+" 1x",oA=r+" 1x",nA=D+" 1x",pA=W+" 1x",rA=I+" 1x",dA=F+" 1x",hA=X+" 1x",gA=x+" 1x",mA=d+" 1x",uA=h+" 1x",yA=M+" 1x",kA=Z+" 1x",bA=g+" 1x",BA=m+" 1x",vA=V+" 1x",wA=R+" 1x",CA=U+" 1x",QA=S+" 1x",_A=q+" 1x",YA=H+" 1x",GA=u+" 1x",EA=y+" 1x",fA=T+" 1x",DA=N+" 1x",WA=k+" 1x",IA=b+" 1x",FA=a('<h1 id="персонажи" tabindex="-1">Персонажи <a class="header-anchor vp-link" href="#персонажи" aria-label="Permalink to &quot;Персонажи&quot;">​</a></h1><p>Персонажи – это акторы, используемые для показа элементов сцены, размещённых поверх <a href="/naninovel-docs/ru/guide/backgrounds" class="vp-link">фонов</a>.</p><p>Актор персонажа определяется именем, внешностью, видимостью, трансформацией (что включает в себя положение, поворот, масштаб) и направлением взгляда. Он может изменять внешность, видимость, трансформацию и направление взгляда с течением времени.</p><p>Поведение персонажей может быть настроено с помощью контекстного меню <code>Naninovel -&gt; Configuration -&gt; Characters</code>; доступные варианты см. в <a href="/naninovel-docs/ru/guide/configuration#персонажи" class="vp-link">руководстве по конфигурации</a>. Доступ к менеджеру ресурсов персонажей можно получить с помощью контекстного меню <code>Naninovel -&gt; Resources -&gt; Characters</code>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+P+'" type="image/avif"><source srcset="'+O+`"><img data-imgit-loadable alt="Добавление персонажа" width="720" height="365" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABEAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABMbWRhdAoIOBUji0gIaAEyOBXACCCCBIRBAMaQNA5VnT4S2aw/UzApdDUPhBZYrXPXxMpNxsiI639/7JKGVPs2c96MsNA/p68Q" type="image/avif"><img src="//:0" alt="cover" width="720" height="365" decoding="sync"></picture></div><p>В случае, если у вас есть много персонажей и/или внешностей для каждого персонажа, и вам неудобно назначать их все через меню редактора, вы можете просто поместить их в папку <code>Resources/Naninovel/Characters</code>, сгруппированными в папки, соответствующие ID их акторов. Например, чтобы добавить внешнность для актора персонажа с ID &quot;Kohaku&quot;, сохраните текстуры (спрайты) в папке <code>Resources/Naninovel/Characters/Kohaku</code>, и они автоматически будут доступны в сценариях.</p><p>Вы можете дополнительно организовать ресурсы внешностей с помощью подпапок, если хотите; в этом случае используйте прямой слеш (<code>/</code>) при ссылке на них в скриптах Naninovel. Например, текстура внешности, сохранённая как <code>Resources/Naninovel/Characters/Kohaku/Casual/Angry</code>, может быть объявлена в сценариях как <code>Casual/Angry</code>.</p><p>Также можно использовать <a href="/naninovel-docs/ru/guide/resource-providers#адресация" class="vp-link">систему адресируемых ассетов</a>, чтобы вручную распределить ресурсы. Чтобы предоставить доступ к ассету, назначьте адрес, равный пути, который вы использовали бы для его объявления с помощью метода, описанного выше, за исключением опущенной части &quot;Resources/&quot;. Например, для объявления внешности &quot;Happy&quot; для персонажа &quot;Kohaku&quot; назначьте ассету следующий адрес: <code>Naninovel/Characters/Kohaku/Happy</code>. Имейте в виду, что адресируемый провайдер по умолчанию не используется в редакторе; вы можете разрешить его, включив свойство <code>Enable Addressable In Editor</code> в меню конфигурации провайдера ресурсов.</p><p>В сценариях Naninovel персонажи в основном контролируются с помощью команды <a href="/ru/api/#char" target="_blank"><code>@char</code></a>:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Вывод персонажа с именем \`Sora\` с внешностью по умолчанию.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Sora</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; То же, что и выше, но с применением внешности \`Happy\`.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Sora.Happy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; То же, что и выше, но также размещая персонажа на расстоянии 45% от левой границы</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; экрана и на 10% от нижней границы; также заставляя его смотреть влево.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Sora.Happy</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> look:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">left</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> pos:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">45,10</span></span></code></pre></div><h2 id="позы" tabindex="-1">Позы <a class="header-anchor vp-link" href="#позы" aria-label="Permalink to &quot;Позы&quot;">​</a></h2><p>Каждый персонаж имеет свойство <code>Poses</code>, позволяющее задавать различные именованные состояния (&quot;позы&quot;).</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="`+L+'" type="image/avif"><source srcset="'+z+'"><img data-imgit-loadable alt="" width="720" height="541" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABNAAIAAAABAAACHQAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAGwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABsAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAaW1kYXQKCDgVI9NICGgBMkEVwAQQQgSBBQDg041pJbQfjT85f+S5UHJ4s7pUkMCYkCYWgWWdBZR9fpPPvb2jLaVIpcaOEqCkw/ikbvVq2+6W0AoGGBUj00qAMgoVwAABIAAGNODm" type="image/avif"><img src="//:0" alt="cover" width="720" height="541" decoding="sync"></picture></div><p>Название позы может быть использовано в качестве внешности в команде <a href="/ru/api/#char" target="_blank"><code>@char</code></a> для применения всех параметров, указанных в позе сразу, вместо того, чтобы указывать их по отдельности с помощью команд параметров.</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Данная поза `SuperAngry` определена для персонажа `Kohaku`,</span></span>\n<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; применяет все параметры, указанные в состоянии позы.</span></span>\n<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Kohaku.SuperAngry</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; То же, что и выше, но с использованием перехода `DropFade` длительностью в 3 секунды.</span></span>\n<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Kohaku.SuperAngry</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> transition:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">DropFade</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> time:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">3</span></span></code></pre></div><p>Обратите внимание, что когда поза используется в качестве внешности, вы все еще можете переопределить отдельные параметры, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Данная поза `SuperAngry` определена для персонажа `Kohaku`,</span></span>\n<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; применяет все параметры, указанные в состоянии позы,</span></span>\n<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; за исключением оттенка, который переопределён отдельной командой.</span></span>\n<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Kohaku.SuperAngry</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> tint:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">#ff45cb</span></span></code></pre></div><h2 id="отображаемые-имена" tabindex="-1">Отображаемые имена <a class="header-anchor vp-link" href="#отображаемые-имена" aria-label="Permalink to &quot;Отображаемые имена&quot;">​</a></h2><p>В конфигурации персонажей вы можете установить <code>Display Name</code> для определенных персонажей. При установке отображаемое имя будет выводиться в метке имени в принтере вместо ID персонажа. Это позволяет использовать составные имена персонажей, содержащие пробелы и специальные символы (что не допускается для ID).</p><p>Для локализации используйте <a href="/naninovel-docs/ru/guide/managed-text" class="vp-link">управляемый текстовый</a> документ &quot;CharacterNames&quot;, который автоматически создается при запуске задачи генерировать управляемые текстовые ресурсы. Значения из документа &quot;CharacterNames&quot; не будут переопределять значения, заданные в метаданных персонажей, пока они находятся в исходной локали.</p><p>Можно привязать отображаемое имя к пользовательской переменной, чтобы динамически изменять его на протяжении всей игры с помощью сценариев Naninovel. Чтобы связать отображаемое имя, укажите имя пользовательской переменной, заключенной в фигурные скобки, в меню конфигурации персонажей.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+K+'" type="image/avif"><source srcset="'+J+`"><img data-imgit-loadable alt="" width="720" height="324" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABfAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABnbWRhdAoIOBTj9pAQ0AIyUxXABBABBIAAAO5NvmblvrIUmk2Q9YNh4GMg4jmQuXgTd2MObso5FEJpTcDTbvSOilnP4EnTecJR099Y4DEfVPbSURjQ73uVNbP9wOwuo+hH2LTo" type="image/avif"><img src="//:0" alt="cover" width="720" height="324" decoding="sync"></picture></div><p>После этого вы можете изменять значение переменной в сценариях, и это будет также изменять отображаемое имя:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@set</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> PlayerName=&quot;Mistery Man&quot;</span></span>
<span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Player:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@set</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> PlayerName=&quot;Dr. Stein&quot;</span></span>
<span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Player:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> You can call me Dr. Stein.</span></span></code></pre></div><p>Также можно использовать функцию привязки имени, чтобы позволить игроку выбрать свое отображаемое имя с помощью команды <a href="/ru/api/#input" target="_blank"><code>@input</code></a>:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@input</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> PlayerName</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> summary:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;Choose your name.&quot;</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@stop</span></span>
<span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Player:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> You can call me </span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;">{PlayerName}</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">.</span></span></code></pre></div><h2 id="цвета-сообщении" tabindex="-1">Цвета сообщений <a class="header-anchor vp-link" href="#цвета-сообщении" aria-label="Permalink to &quot;Цвета сообщений&quot;">​</a></h2><p>Если в конфигурации персонажей включена функция <code>Use Character Color</code>, текстовые сообщения принтера и метки имен будут окрашены в указанные цвета, если соответствующий ID персонажа указан в команде <a href="/ru/api/#print" target="_blank"><code>@print</code></a> или общей текстовой строке.</p><p>В этом видео показано, как использовать отображаемые имена и цвета персонажей.</p>`,29),XA=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=u5B5s-X2Bw0",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:$,type:"image/avif"}),A("source",{srcset:AA}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABcAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABkbWRhdAoJGBUjm0QICBQQMk8VwBBAAQSAAAC1yW017p+S8T795eTW5c009vdxqN5kN/Ym+BqPhzos3nKgoP0H858oxUrRlKNDz7wL/fB7TqGhCd5qSSgLagyu9Hm0vXKA",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/u5B5s-X2Bw0?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),xA=a('<h2 id="текстуры-аватаров" tabindex="-1">Текстуры аватаров <a class="header-anchor vp-link" href="#текстуры-аватаров" aria-label="Permalink to &quot;Текстуры аватаров&quot;">​</a></h2><p>Вы можете назначать текстуры аватаров персонажам, используя параметр <code>avatar</code> команды <a href="/ru/api/#char" target="_blank"><code>@char</code></a>. Аватары будут отображаться совместимыми текстовыми принтерами, когда они выводят текстовое сообщение, связанное с этим персонажем. В настоящее время функцию аватаров поддерживают только текстовые принтеры <code>Wide</code> и <code>Chat</code>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+aA+'" type="image/avif"><source srcset="'+iA+'"><img data-imgit-loadable alt="" width="720" height="404" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAClAAIAAAABAAACdQAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABQAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAwW1kYXQKCDgVI5tICGgBMpgBFcAUUQUEgQQA410EIDEqvj9Zht6SL8BfVDP47cOqDaosiM8jBogH5X0lFA1+kVa7VdcLO77KsDLKG7IckVbRCSKe3lj0lwvwwCt60cJdfha9uneIzc1zbqlRmjv8cUeGL0FPmQSbJIFpth+PhGBTokxoqLQS+JuC+/iGhWWGXmiS2EqA6+y1TKlWOqGle8LFDQ6/0ZxUjkAKBhgVI5tKgDIKFcAAASAABjTg5g==" type="image/avif"><img src="//:0" alt="cover" width="720" height="404" decoding="sync"></picture></div><p>Чтобы использовать любой заданный аватар, вы должны сначала добавить его в ресурсы аватара и дать ему имя. Вы можете сделать это с помощью свойства <code>Avatar Resources</code> в меню конфигурации персонажей.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+eA+'" type="image/avif"><source srcset="'+sA+'"><img data-imgit-loadable alt="" width="720" height="361" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABbAAIAAAABAAACKwAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAEgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABIAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAd21kYXQKCDgVI4tICGgBMk8VwAIIAgSABADg041LFcaWlX5nEJYrxOrrpRMbEdKSt+ZwW/WaZ7wjxxLd7HheeMKJqTW1/UWAozb1fR32gLH1QbPkHZMmPgRSz7YtWrCACgYYFSOLSoAyChXAAAEgAAY04OY=" type="image/avif"><img src="//:0" alt="cover" width="720" height="361" decoding="sync"></picture></div><div class="info custom-block"><p class="custom-block-title">NOTE</p><p>Имена аватаров могут быть произвольными и не обязаны содержать существующий ID персонажа или внешность. Это требуется только в том случае, если вы хотите связать аватар с персонажем, чтобы он отображался автоматически.</p></div><p>Теперь вы можете показать определенную текстуру аватара следующим образом:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CharacterId</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> avatar:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">AvatarName</span></span></code></pre></div><p>Чтобы установить аватар по умолчанию для персонажа, дайте имя ресурсу текстуры аватара, который равен <code>CharacterID/Default</code>; например, чтобы установить аватар по умолчанию для персонажа с ID <code>Kohaku</code>, дайте имя ресурсу аватара <code>Kohaku/Default</code>. Заданные аватары по умолчанию будут отображаться автоматически, даже если параметр <code>avatar</code> не указан в командах <a href="/ru/api/#char" target="_blank"><code>@char</code></a>.</p><p>Кроме того, можно связать аватары с определенными внешностями персонажа, так что когда персонаж будет менять внешность, аватар также автоматически будет меняться. Для этого назовите ресурсы аватара в следующем формате: <code>CharacterID/CharacterAppearance</code>, где <code>CharacterAppearance</code> – это имя внешности, которой сопоставляется ресурс аватара.</p><p>Обратите внимание, что <strong>аватары не связаны напрямую с внешностью персонажа</strong> и не должны рассматриваться как способ показать персонажа в сцене. Внешность, указанная в диспетчере ресурсов персонажа, является фактическим представлением персонажа в сцене. Аватары – это автономная функция, которая &quot;вводит&quot; произвольное изображение в совместимый текстовый принтер.</p><p>Можно показать только аватар персонажа внутри текстового принтера, но скрыть самого персонажа, установив параметр <code>visible</code> команды <a href="/ru/api/#char" target="_blank"><code>@char</code></a> в значение <code>false</code>, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CharacaterId</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> visible:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span></span></code></pre></div><p>Если вы постоянно меняете аватары, в то время как сам персонаж должен оставаться скрытым, вы можете отключить <code>Auto Show On Modify</code> в меню конфигурации персонажей; когда он отключен, вам не нужно будет указывать <code>visible:false</code>, чтобы изменить какие-либо параметры персонажа, пока он скрыт.</p><h2 id="подсветка-говорящего" tabindex="-1">Подсветка говорящего <a class="header-anchor vp-link" href="#подсветка-говорящего" aria-label="Permalink to &quot;Подсветка говорящего&quot;">​</a></h2><p>Если этот параметр включен в конфигурации персонажей, он будет окрашивать персонажа в зависимости от того, связано ли с тем последнее напечатанное сообщение.</p>',16),MA=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=gobowgagdyE",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:tA,type:"image/avif"}),A("source",{srcset:lA}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABnAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABvbWRhdAoJGBUjm0QICBQQMloVwAggggSAAAC3Rmq/+0w5/C4M5IBXVhUrf57TOdV4z4oVXz8KEuQC6CbqFXRvyovHHGw9XPK2lxagb7AoytPlxI9uBCQ7RU00aTHL3BlVYyVq4XxkwhCp2TY=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/gobowgagdyE?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),ZA=A("h2",{id:"синхронизация-движении-губ-со-звуком",tabindex:"-1"},[i("Синхронизация движений губ со звуком "),A("a",{class:"header-anchor vp-link",href:"#синхронизация-движении-губ-со-звуком","aria-label":'Permalink to "Синхронизация движений губ со звуком"'},"​")],-1),VA=A("p",null,[A("a",{href:"/naninovel-docs/ru/guide/characters#универсальные-персонажи",class:"vp-link"},"Универсальные"),i(" и "),A("a",{href:"/naninovel-docs/ru/guide/characters#персонажи-Live2D",class:"vp-link"},"Live2D"),i('-реализации персонажей поддерживают так называемую функцию "синхронизации движений губ со звуком", позволяя управлять анимацией рта персонажа, пока от его имени печатается сообщение, для чего отправляя соответствующие события.')],-1),RA=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=fx_YS2ZQGHI",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:cA,type:"image/avif"}),A("source",{srcset:oA}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABrAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABzbWRhdAoJGBUjm0QICBQQMl4VwBRQAASEIQDW9/P3A9G6hcaphSnC0FPmvjjnXbZvoO+j+aP7zKEj1sdI2WviKWG2xm3U5zWGJe2ye/VG17CZZe/yqp6UZqY67q21aaAX+FnmHfTTvtOr8bWoReGw",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/fx_YS2ZQGHI?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),UA=a('<p>Когда включена функция [автоозвучивания](/ru/guide/voicing#автоматическое озвучивание), события синхронизации губ будут управляться озвучкой; в противном случае печатные текстовые сообщения активируют события. В последнем случае вам, вероятно, иногда захочется вручную запустить или остановить синхронизацию губ (например, чтобы предотвратить движение рта при печати знаков препинания); в таких случаях используйте команду <a href="/ru/api/#lipsync" target="_blank"><code>@lipSync</code></a>.</p><p>См. документацию по реализации <a href="/naninovel-docs/ru/guide/characters#универсальные-персонажи" class="vp-link">универсальных</a> и <a href="/naninovel-docs/ru/guide/characters#персонажи-Live2D" class="vp-link">Live2D-</a>персонажей ниже для получения подробной информации о том, как настроить функцию синхронизации губ.</p><h2 id="привязанныи-принтер" tabindex="-1">Привязанный принтер <a class="header-anchor vp-link" href="#привязанныи-принтер" aria-label="Permalink to &quot;Привязанный принтер&quot;">​</a></h2><p>Существует возможность привязать <a href="/naninovel-docs/ru/guide/text-printers" class="vp-link">текстоый принтер</a> с персонажем, используя параметр <code>Linked Printer</code>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+nA+'" type="image/avif"><source srcset="'+pA+'"><img data-imgit-loadable alt="" width="541" height="145" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAACQAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAbAAAABwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAACYbWRhdAoIOBC1mkBDQAgygwEVwAQQcQSBIQD5Bi/d/Pld3HhlgJfLn0BeoV8obhUeaUsS8LS4ZiouRdkDnAnwEQyPHRqM8V2bQ0eEVA7azG+PJls2yJ6LqsOebkVvtsXHvp00KAatjrqIjLDN8+yr8AGnbFZ88pDRaMYGoEYe3OUr6DqDwmEzN/1qkPeqD0fF+5t/8A==" type="image/avif"><img src="//:0" alt="cover" width="541" height="145" decoding="sync"></picture></div><p>При подключении принтер будет автоматически использоваться для обработки сообщений, выводимых от имени этого персонажа.</p><p>Имейте в виду, что команды <a href="/ru/api/#print" target="_blank"><code>@print</code></a> (которые также используются при печати общих текстовых строк) по умолчанию используют привязанные принтеры по умолчанию и скрывают другие видимые принтеры. Когда принтеры привязаны к персонажам, команды печати автоматически изменят текущий видимый и стандартный текстовый принтер, одновременно печатая текст, связанный с соответствующим персонажем. Такое поведение можно предотвратить, отключив свойство <code>Auto Default</code> в меню конфигурации принтера актора; если оно отключено, вам придется вручную показывать/скрывать и переключать принтеры по умолчанию с помощью команд <a href="/ru/api/#printer" target="_blank"><code>@printer</code></a>.</p><h2 id="спраитовые-персонажи" tabindex="-1">Спрайтовые персонажи <a class="header-anchor vp-link" href="#спраитовые-персонажи" aria-label="Permalink to &quot;Спрайтовые персонажи&quot;">​</a></h2><p>Спрайтовая реализация акторов персонажей является наиболее распространенной и простой; она использует набор ассетов <a href="https://docs.unity3d.com/Manual/Sprites" class="vp-link" target="_blank" rel="noreferrer">спрайтов<span class="external-link-icon"> ↗</span></a> для представления внешности персонажа. Источником спрайтов могут быть изображения (текстуры) любых форматов, <a href="https://docs.unity3d.com/Manual/ImportingTextures" class="vp-link" target="_blank" rel="noreferrer">поддерживаемых Unity<span class="external-link-icon"> ↗</span></a>.</p><h2 id="нарезанные-спраиты-персонажеи" tabindex="-1">Нарезанные спрайты персонажей <a class="header-anchor vp-link" href="#нарезанные-спраиты-персонажеи" aria-label="Permalink to &quot;Нарезанные спрайты персонажей&quot;">​</a></h2><p>Основанная на пакете <a href="https://github.com/Elringus/SpriteDicing" class="vp-link" target="_blank" rel="noreferrer">Sprite Dicing<span class="external-link-icon"> ↗</span></a> с открытым исходным кодом реализация <code>DicedSpriteCharacter</code> позволяет значительно уменьшить размер сборки и занимаемую текстурами память за счет повторного использования текстурных областей спрайтов персонажей.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+rA+'" type="image/avif"><source srcset="'+dA+'"><img data-imgit-loadable alt="Нарезка спрайта" width="720" height="436" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAACsAAIAAAABAAACfAAAAFsAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAFgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABYAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAABD21kYXQKCDgVI6tICGgBMp8BFcAQQUEEgAAA4NOTbOnkIjVCwMtZjG67v8EXwhBqdiGmHBNpYHIaeUe2gUtu1d3eIfAZ7wKUZxO9kz8l+4QCaQR5EYRp7p6879FurLKKNVc1Dqu5TfCzWJ5UkGoyNNb1TGDvKC/3oZpHOFnDhf2bb4N9CgNJ0CrtM1mrvn08mAh2ryisNql17xIgkllmc1qH7mLwC0bgQutHGriu4asgCgYYFSOrSoAyURXAAAEgQN8YGQMjog6kZT4Gv6HRTO5qhl9d4Dpq4tHoZsU+FmH8IB2gH1mscKP2KbRZiu55Iyu9jhQyi9tAhNLcT8vvEkmaweAoL2n3ohGpeQ==" type="image/avif"><img src="//:0" alt="cover" width="720" height="436" decoding="sync"></picture></div><p>Установите пакет через <a href="https://docs.unity3d.com/Manual/upm-ui.html" class="vp-link" target="_blank" rel="noreferrer">менеджер пакетов Unity<span class="external-link-icon"> ↗</span></a>: откройте окно менеджера пакетов (Window -&gt; Package Manager), нажмите кнопку &quot;+&quot;, выберите &quot;Add package from git URL&quot;, введите <code>https://github.com/Elringus/SpriteDicing.git#package</code> в поле ввода и нажмите кнопку &quot;Add&quot;.</p>',13),SA=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"696",height:"416"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-b54e9daa9a483d9bf7f74f0e94b2d38a.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-b54e9daa9a483d9bf7f74f0e94b2d38a.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAAtAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAiAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAA1bWRhdAoGGBUhm0AQMiMVwAQQQQSBBQDgh8KXLRRjo2TEmFiVKsE5pnQ35v85//uK2g==",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"696",height:"416",decoding:"sync"})])],-1),qA=a('<p>Ассеты <code>DicedSpriteAtlas</code>, содержащие внешности персонажей, используются в качестве ресурсов для нарезанных спрайтов персонажей. Каждая внешность сопоставляется по имени с нарезкой спрайтов, содержащихся в атласе.</p><p>Имейте в виду, что некоторые свойства метаданных нарезанных спрайтов (например, пиксели на единицу, pivot) управляются ассетом атласа, в то время как значения в конфигурации персонажей применяются к создаваемой текстуре, используемой для представления фактического спрайта. При изменении свойств атласа не забудьте перестроить его, чтобы изменения вступили в силу.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+hA+'" type="image/avif"><source srcset="'+gA+'"><img data-imgit-loadable alt="" width="497" height="367" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABTAAIAAAABAAACIwAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAEgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAABIAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAbm1kYXQKCDgRLxaQENACMkcVwAYYwcSAAQC8gQztVPMHfgraX/RpE5Osf/MeblE/pZpgqxgMlXqAhH2dqKV5MvuOTUSoeV/mfI2jdJ8WIz5+ogz9/Eo4zQoFGBEvFpUyChXAAAEgAAPHhDo=" type="image/avif"><img src="//:0" alt="cover" width="497" height="367" decoding="sync"></picture></div><p>Следующий видеогайд охватывает создание и настройку атласа нарезанного спрайта, добавление нового нарезанного персонажа на основе созданного атласа и управление персонажем из сценария Naninovel.</p>',4),HA=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=6PdOAOsnhio",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:mA,type:"image/avif"}),A("source",{srcset:uA}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABIAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABQbWRhdAoJGAz+GiBAQKCAMjsVwAYYAASQAADQBs/4hTxn2iwXUzNsJ4INGe+qcJoNiMJFmGcu6LlonMNIr8pHadMYabcS0tpLF2w7oA==",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/6PdOAOsnhio?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),TA=a('<h2 id="послоиные-персонажи" tabindex="-1">Послойные персонажи <a class="header-anchor vp-link" href="#послоиные-персонажи" aria-label="Permalink to &quot;Послойные персонажи&quot;">​</a></h2><p>Послойная реализация позволяет создавать персонажей из нескольких спрайтов (слоев), а затем переключать их по отдельности или группами с помощью сценариев Naninovel во время выполнения.</p><p>Чтобы создать префаб послойного персонажа, используйте контекстное меню <code>Create -&gt; Naninovel -&gt; Character -&gt; Layered</code>. Войдите в <a href="https://docs.unity3d.com/Manual/EditingInPrefabMode.html" class="vp-link" target="_blank" rel="noreferrer">режим редактирования префаба<span class="external-link-icon"> ↗</span></a> для составления слоев. По умолчанию будет создано несколько слоев и групп. Вы можете использовать их или удалить и добавить свои собственные.</p><p>Каждый дочерний игровой объект корневого объекта префаба с компонентом <a href="https://docs.unity3d.com/Manual/class-SpriteRenderer.html" class="vp-link" target="_blank" rel="noreferrer">спрайтового рендерера<span class="external-link-icon"> ↗</span></a> считается <em>слоем</em>; другие объекты считаются <em>группами</em>. Помимо организации и трансформации, размещение слоев внутри групп позволит вам выбрать один слой или отключить/включить все слои внутри группы с помощью одного выражения в сценарии Naninovel (подробнее об этом позже).</p><p>Чтобы скрыть некоторые слои от просмотра по умолчанию, отключите компоненты рендерера спрайтов (а не игровые объекты).</p><p>Белая рамка поверх префаба используется для описания холста актера, который будет визуализирован в готовую текстуру во время выполнения. Убедитесь, что вы минимизировали пустые области внутри кадра, перемещая слои и группы, чтобы предотвратить потерю памяти на текстуры и обеспечить правильную работу якорей.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+yA+'" type="image/avif"><source srcset="'+kA+`"><img data-imgit-loadable alt="" width="571" height="508" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAACLAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAcAAAAGQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAACTbWRhdAoIOBE3hpAQ0AIyfxXADDDChIEEAJj41wl2kvmcGqJuJ0BYKVyioxo1jM5/AQHM91Enlaa8/qmEGZnpswOg2FBpoKZ79niWhC7hgmh9HTrUd1I4mC0e7ZxEFqU4kSll9IweTHR0p7eY5rolG0XLvDD9j/4TiSedgKcElhFss3yJcFGYAKLpARecOhA=" type="image/avif"><img src="//:0" alt="cover" width="571" height="508" decoding="sync"></picture></div><p>Вы можете масштабировать корневой игровой объект, чтобы точно настроить размер актора по умолчанию.</p><p>При создании послойных изображений персонажей в Photoshop вы можете использовать <a href="https://docs.unity3d.com/Packages/com.unity.2d.psdimporter@3.0/manual/index.html" class="vp-link" target="_blank" rel="noreferrer">пакет Unity для импорта PSD<span class="external-link-icon"> ↗</span></a>, чтобы автоматически генерировать префаб персонажа с сохранением всех слоев и их положений. Чтобы сохранить иерархию слоев, обязательно включите опцию <code>Use Layer Grouping</code> в настройках импорта.</p><p>Не забудьте добавить созданный послойный префаб к ресурсам персонажей (<code>Naninovel -&gt; Resources -&gt; Characters</code>). Выберите &quot;Naninovel.LayeredCharacter&quot; и перетащите префаб в поле &quot;Resource&quot; при настройке записи ресурса.</p><p>Для управления послойными персонажами в сценариях Naninovel используйте команду <a href="/ru/api/#char" target="_blank"><code>@char</code></a> так же, как и в других реализациях персонажей. Единственное отличие заключается в том, как вы объявляете внешность: вместо одного ID используйте <em>выражение композиции слоёв</em>. Существует три типа выражений:</p><ul><li>Включить один слой в группе: <code>group&gt;layer</code></li><li>Включить слой: <code>group+layer</code></li><li>Отключить слой: <code>group-layer</code></li></ul><p>Например, рассмотрим персонажа &quot;Miho&quot;, который имеет группу &quot;Body&quot; с тремя слоями: &quot;Uniform&quot;, &quot;SportSuit&quot; и &quot;Pajama&quot;. Чтобы включить слой &quot;Uniform&quot; и отключить все остальные, используйте следующую команду:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Miho.Body&gt;Uniform</span></span></code></pre></div><p>Чтобы включить или отключить слой, не затрагивая другие слои в группе, используйте &quot;+&quot; и &quot;-&quot; соответственно вместо &quot;&gt;&quot;. Вы также можете указать несколько композиционных выражений, разделив их запятыми:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Добавить очки, убрать шляпу, выбрать эмоцию &quot;Cool&quot;.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CharId.Head/Accessories+BlackGlasses,Head-Hat,Head/Emotions&gt;Cool</span></span></code></pre></div><p>Чтобы выбрать слой вне каких-либо групп (дочерний объект корневого объекта префаба), просто пропустите группу, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Дан слой &quot;Halo&quot; – дочерний объект корневого объекта префаба, убрать его</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CharId.-Halo</span></span></code></pre></div><p>Кроме того, можно воздействовать на все слои внутри группы (а также на ее соседей при использовании выборного выражения), опуская имя слоя в выражении композиции:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Убрать все слои из группы &quot;Body/Decoration&quot;.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CharId.Body/Decoration-</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Добавить все существующие слои.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CharId.+</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Даны группы \`Poses/Light\` и \`Poses/Dark\` (each containing multiple layers),</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; добавить все спрайты из группы \`Light\` и убрать все из группы \`Dark\`.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> CharId.Poses/Light&gt;</span></span></code></pre></div><p>Приведенные выше выражения будут рекурсивно воздействовать не только на прямых потомков выбранных групп, но и на все слои, содержащиеся в нижележащих группах.</p><p>Если внешность не задана (например, <code>@char CharId</code> без предварительной настройки внешности), будет использоваться внешность умолчанию; внешность послойных персонажей по умолчанию равна тому, как выглядит послойный префаб в редакторе.</p><p>Видео ниже демонстрирует, как настраивать послойного персонажа и управлять им с помощью команд Naninovel.</p>`,23),NA=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=Bl3kXrg8tiI",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:bA,type:"image/avif"}),A("source",{srcset:BA}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABaAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABibWRhdAoJGBUjm0QICBQQMk0VwAggAASBAAC4f8zOw29Sr3OnQpix4CNquANw4uLzXcsv3CXnHSvfz2uM28jtJ+7D8bgJ+pfjx6zXGVA71g6TX5W+MTlBk2DKZ80ZEA==",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/Bl3kXrg8tiI?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),jA=a('<div class="info custom-block"><p class="custom-block-title">NOTE</p><p>Команда <code>@char Miho.Shoes&gt;</code>, показанная в видео, выбирает группу &quot;Shoes&quot; (отключая все соседние группы), но не скрывает её. Правильная команда для скрытия группы – <code>@char Miho.Shoes-</code>.</p></div><p>Можно сопоставить композиционные выражения для ключей с помощью свойства <code>Composition Map</code> компонента <code>Layered Actor Behaviour</code>:</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+vA+'" type="image/avif"><source srcset="'+wA+'"><img data-imgit-loadable alt="" width="496" height="532" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA1AAIAAAABAAACBQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAAGgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAABoAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAUG1kYXQKCDgRL5aQENACMikVwAAASFBQq1cYsiQj5hzk4EQWx6RlK5Gsg3AxpZYhj4lc0tviJt0IMgoFGBEvlpUyChXAAAEgAAPHhDo=" type="image/avif"><img src="//:0" alt="cover" width="496" height="532" decoding="sync"></picture></div><p>– после этого ключи могут быть использованы для определения внешности послойного персонажа:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Соответствует `Body&gt;Uniform,Hair/Back&gt;Straight,Hair/Front&gt;Straight,Shoes&gt;Grey`.</span></span>\n<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Miho.Uniform</span></span>\n<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Соответствует `Hair/Back&gt;Straight,Hair/Front&gt;Straight`.</span></span>\n<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Miho.StraightHair</span></span></code></pre></div><p>При редактировании префаба послойного персонажа можно предварительно просмотреть заданные композиционные выражения, щелкнув правой кнопкой мыши по записи выражения и выбрав пункт &quot;Preview Composition&quot;.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+CA+'" type="image/avif"><source srcset="'+QA+'"><img data-imgit-loadable alt="" width="602" height="316" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABdAAIAAAABAAACLQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAeAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAHgAAABAAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAeG1kYXQKCDgQ++0gIaAEMlEVwAggQQSABADFYR5EPtUYP0g28aBLxdRkrXcigZqjfScTz1K6LL8viOd+PAYU6luKYrGMs+Lyu9cQMyQau3UQ5ObUwBUwMfBnbgTSvptWwkQKBRgQ++0qMgoVwAABIAACaw7h" type="image/avif"><img src="//:0" alt="cover" width="602" height="316" decoding="sync"></picture></div><p>Имейте в виду, что объекты слоёв не визуализируются непосредственно камерами Unity во время выполнения; вместо этого они визуализируются один раз при каждом изменении композиции (внешности) во временную собранную текстуру, которая затем подается в сетку, видимую для камеры Naninovel. Эта настройка необходима для предотвращения проблем с прорисовкой полупрозрачных элементов и поддержки эффектов анимации перехода.</p><h2 id="универсальные-персонажи" tabindex="-1">Универсальные персонажи <a class="header-anchor vp-link" href="#универсальные-персонажи" aria-label="Permalink to &quot;Универсальные персонажи&quot;">​</a></h2><p>Универсальный персонаж – это наиболее гибкая реализация актора персонажа. Он основан на сборке с компонентом <code>CharacterActorBehaviour</code>, прикрепленным к корневому объекту. Изменения внешности и все остальные параметры персонажей маршрутизируются как <a href="https://docs.unity3d.com/Manual/UnityEvents.html" class="vp-link" target="_blank" rel="noreferrer">события Unity<span class="external-link-icon"> ↗</span></a>, позволяя реализовать поведение базового объекта любым удобным вам способом.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+_A+'" type="image/avif"><source srcset="'+YA+'"><img data-imgit-loadable alt="" width="529" height="545" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAAxAAIAAAABAAACAQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAaAAAAGwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGgAAABsAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAATG1kYXQKCDgRM6aQENACMiUVwAAASBBAe+rq6yInIFSdew+bEkb/p/ZDQLhCuLlTpgmWlQT6CgUYETOmlTIKFcAAASAAA8eEOg==" type="image/avif"><img src="//:0" alt="cover" width="529" height="545" decoding="sync"></picture></div><p>Чтобы создать префаб универсального персонажа по шаблону, используйте контекстное меню <code>Create -&gt; Naninovel -&gt; Character -&gt; Generic</code>.</p><p>Для настройки функции синхронизации губ для универсальных персонажей, используйте события Unity <code>On Started Speaking</code> и <code>On Finished Speaking</code> компонента <code>CharacterActorBehaviour</code>. Когда персонаж становится или перестает быть автором любого печатного сообщения (или, скорее, когда сообщение полностью раскрывается), эти события будут вызваны, позволяя вам вызвать любую логику, такую как запуск или остановка анимации рта контролируемого персонажа. Это подобно тому, как работают события пользовательского интерфейса <code>On Show</code> и <code>On Hide</code>; найти, как они могут быть использованы для управления анимацией, можно в <a href="/naninovel-docs/ru/guide/user-interface#добавление-пользовательских-UI" class="vp-link">руководстве по настройке UI</a>.</p><p>Ознакомьтесь со следующим видеоуроком как с примером по настройке 3D-модели в качестве универсального персонажа и внесению изменений внешности в анимацию модели с помощью компонента <a href="https://docs.unity3d.com/Manual/class-AnimatorController.html" class="vp-link" target="_blank" rel="noreferrer">Animator<span class="external-link-icon"> ↗</span></a> компонент.</p>',14),PA=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=HPxhR0I1u2Q",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:GA,type:"image/avif"}),A("source",{srcset:EA}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABPAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABXbWRhdAoJGBUjm0QICBQQMkIVwAAASFAQtwW+s3Qs6qk4XRIYbcCLR8VkERSZYm5MnFVYFToD+yOqUfz4OtqjwzonBUfQOr5oxVXOqiqXoBlbNts=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/HPxhR0I1u2Q?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),OA=a('<h2 id="персонажи-live2d" tabindex="-1">Персонажи Live2D <a class="header-anchor vp-link" href="#персонажи-live2d" aria-label="Permalink to &quot;Персонажи Live2D&quot;">​</a></h2><p>Реализация персонажей Live2D использует ассеты, созданные с помощью софта для 2D-моделирования и анимации <a href="https://www.live2d.com" class="vp-link" target="_blank" rel="noreferrer">Live2D Cubism<span class="external-link-icon"> ↗</span></a>.</p><p>Чтобы иметь возможность использовать эту реализацию, необходимо сначала установить <a href="https://live2d.github.io/#unity" class="vp-link" target="_blank" rel="noreferrer">Live2D Cubism SDK для Unity<span class="external-link-icon"> ↗</span></a>. Обратитесь к официальной документации Live2D для получения инструкций по установке и использованию.</p><p>После этого скачайте и импортируйте <a href="https://github.com/naninovel/samples/raw/main/unity/live2d/NaninovelLive2D.unitypackage" class="vp-link" target="_blank" rel="noreferrer">пакет расширения Live2D<span class="external-link-icon"> ↗</span></a>.</p><p>Префаб модели Live2D, используемый в качестве ресурса для реализации, должен иметь компонент <code>Live2DController</code>, прикрепленный к корневому объекту. Изменения внешности направляются в компонент аниматора как команды <a href="https://docs.unity3d.com/ScriptReference/Animator.SetTrigger.html" class="vp-link" target="_blank" rel="noreferrer">SetTrigger<span class="external-link-icon"> ↗</span></a>, используя внешность как имя триггера. Например, если у вас есть Live2D-префаб персонажа &quot;Kaori&quot;, и вы хотите вызвать триггер с именем &quot;Surprise&quot;, используйте следующую команду:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Kaori.Surprise</span></span></code></pre></div><p>Обратите внимание, что приведенная выше команда будет только пытаться вызвать <a href="https://docs.unity3d.com/ScriptReference/Animator.SetTrigger.html" class="vp-link" target="_blank" rel="noreferrer">SetTrigger<span class="external-link-icon"> ↗</span></a> с аргументом &quot;Surprise&quot; на контроллере аниматора, прикрепленного к префабу; вы должны самостоятельно составить нижележащую систему <a href="https://docs.unity3d.com/Manual/Animator" class="vp-link" target="_blank" rel="noreferrer">аниматора<span class="external-link-icon"> ↗</span></a>.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Последняя версия Cubism SDK для Unity работает непосредственно с компонентом <code>Animator</code>; выражения и позы (экспортированные как expression.json и pose.json), которые ранее использовались в Cubism 2.x, теперь <a href="https://docs.live2d.com/cubism-sdk-tutorials/blendexpression" class="vp-link" target="_blank" rel="noreferrer">устарели<span class="external-link-icon"> ↗</span></a> и не поддерживаются расширением Naninovel для Live2D.</p></div><p>Когда компоненты Live2D <code>CubismLookController</code> и <code>CubismMouthController</code> присутствуют и настроены на префаб модели Live2D, <code>Live2DController</code> может дополнительно использовать их для управления направлением взгляда и анимацией рта (функцией синхронизации губ) персонажа.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+fA+'" type="image/avif"><source srcset="'+DA+'"><img data-imgit-loadable alt="" width="483" height="111" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABBAAIAAAABAAACEQAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAABgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAAAYAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAXG1kYXQKCDgQr1pAQ0AIMjUVwAAASQRQ8FyohdCkVWJHWrPV2yZT88IcQt+BaGvIwSP/libi6WhJfxEyzwGNdjqZH+EvIAoFGBCvWlQyChXAAAEgAAJrDuE=" type="image/avif"><img src="//:0" alt="cover" width="483" height="111" decoding="sync"></picture></div><p>Обратитесь к документации Live2D по <a href="https://docs.live2d.com/cubism-sdk-tutorials/lookat" class="vp-link" target="_blank" rel="noreferrer">трекингу глаз<span class="external-link-icon"> ↗</span></a> и <a href="https://docs.live2d.com/cubism-sdk-tutorials/lipsync" class="vp-link" target="_blank" rel="noreferrer">синхронизации губ<span class="external-link-icon"> ↗</span></a> для получения подробной информации о настройке.</p><p>Имейте в виду, что <code>Live2DController</code> ожидает игровой объект &quot;Drawables&quot; внутри префаба модели Live2D (создается автоматически при импорте моделей Live2D в Unity); контроллер будет масштабировать этот объект во время выполнения в соответствии с параметром &quot;scale&quot; команд <a href="/ru/api/#char" target="_blank"><code>@char</code></a>. Следовательно, любые локальные значения, заданные в редакторе, будут проигнорированы. Чтобы установить начальный масштаб для префабов Live2D, пожалуйста, используйте масштаб корневого игрового объекта, как <a href="https://youtu.be/rw_Z69z0pAg?t=353" class="vp-link" target="_blank" rel="noreferrer">показано в видеогайде<span class="external-link-icon"> ↗</span></a>.</p><p>Следующий видеогайд охватывает экспорт персонажа Live2D из Cubism Editor, настройку префаба, создание простого аниматора и управление персонажем из сценария Naninovel.</p>',13),LA=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=rw_Z69z0pAg",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:WA,type:"image/avif"}),A("source",{srcset:IA}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAA9AAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABFbWRhdAoJGAz+GiBAQKCAMjAVwAQQAASEAADKEMSZg+ZDVpE+rtbtXxnemtXCMdfa0i1Gn0z7qBXB3uOFsA4UWg4=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/rw_Z69z0pAg?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),zA=A("div",{class:"tip custom-block"},[A("p",{class:"custom-block-title"},"EXAMPLE"),A("p",null,[i("Ознакомьтесь с "),A("a",{href:"https://github.com/Naninovel/Live2D",class:"vp-link",target:"_blank",rel:"noreferrer"},[i("примером проекта на GitHub"),A("span",{class:"external-link-icon"}," ↗")]),i(", где персонаж Live2D используется в Naninovel. Имейте в виду, что ни пакеты Naninovel, ни пакеты Live2D SDK не поставляются вместе с проектом, поэтому после его первого открытия появятся ошибки компиляции; импортируйте Naninovel из Asset Store и Live2D Cubism SDK с их веб-сайта, чтобы решить эти проблемы.")])],-1),KA=[FA,XA,xA,MA,ZA,VA,RA,UA,SA,qA,HA,TA,NA,jA,PA,OA,LA,zA];function JA($A,Aa,aa,ia,ea,sa){return t(),s("div",null,KA)}const ca=e(j,[["render",JA]]);export{la as __pageData,ca as default};
