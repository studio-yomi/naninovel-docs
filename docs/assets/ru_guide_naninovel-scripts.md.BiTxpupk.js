import{_ as s,c as i,o as e,f as a,D as A,a as t,dC as n,dD as l,gG as p,gH as d,cD as h,cE as o,gS as c,gT as r,dI as k,dJ as g,dK as m,dL as u,dM as B,dN as y}from"./chunks/framework.BG74BkEs.js";const sA=JSON.parse('{"title":"Сценарии Naninovel","description":"","frontmatter":{},"headers":[],"relativePath":"ru/guide/naninovel-scripts.md","filePath":"ru/guide/naninovel-scripts.md","lastUpdated":1698833889000}'),C={name:"ru/guide/naninovel-scripts.md"},v=h+" 1x",b=o+" 1x",E=c+" 1x",D=r+" 1x",w=n+" 1x",f=l+" 1x",F=k+" 1x",_=g+" 1x",Y=m+" 1x",G=u+" 1x",Q=p+" 1x",I=d+" 1x",x=B+" 1x",q=y+" 1x",W=a('<h1 id="сценарии-naninovel" tabindex="-1">Сценарии Naninovel <a class="header-anchor vp-link" href="#сценарии-naninovel" aria-label="Permalink to &quot;Сценарии Naninovel&quot;">​</a></h1><p>Скрипты Naninovel – это текстовые документы (c расширениеv <code>.nani</code>), где вы контролируете то, что происходит в сценах. Ассеты сценариев создаются с помощью контекстного меню ассета <code>Create -&gt; Naninovel -&gt; Naninovel Script</code>. Вы можете открывать и редактировать их с помощью встроенного <a href="#visual-editor" class="vp-link">визуального редактора</a> или с помощью внешнего текстового редактора, например блокнот, TextEdit или <a href="https://code.visualstudio.com" class="vp-link" target="_blank" rel="noreferrer">VS Code<span class="external-link-icon"> ↗</span></a>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+v+'" type="image/avif"><source srcset="'+b+`"><img data-imgit-loadable alt="" width="720" height="297" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABDAAIAAAABAAACEwAAABYAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAADwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAQACAACAAAAAFGlzcGUAAAAAAAAAJAAAAA8AAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAYW1kYXQKCDgU4+aQENACMjcVwAQQggSEAQD4/kZM3pGoKDItzN4A+pPydmmxL0eFNh5wy5DaIcqtsQCoYFj0wrvxXib1Y4GACggYFOPmmAgQFTIKFcAAASAABjTg5g==" type="image/avif"><img src="//:0" alt="cover" width="720" height="297" decoding="sync"></picture></div><p>Каждая строка в сценарии Naninovel представляет собой инструкцию, которая может быть командой, обычным текстом, меткой или комментарием. Тип оператора определяется литералом, который помещается в начале строки:</p><table><thead><tr><th>Литерал</th><th>Тип инструкции</th></tr></thead><tbody><tr><td>@</td><td><a href="#командные-строки" class="vp-link">Команда</a></td></tr><tr><td>#</td><td><a href="#строки-метки" class="vp-link">Метка</a></td></tr><tr><td>;</td><td><a href="#строки-комментарии" class="vp-link">Комментарий</a></td></tr></tbody></table><p>Если в начале строки нет ни одного из вышеуказанных литералов, она воспринимается как строка <a href="#generic-text-lines" class="vp-link">общего текста</a>.</p><h2 id="командные-строки" tabindex="-1">Командные строки <a class="header-anchor vp-link" href="#командные-строки" aria-label="Permalink to &quot;Командные строки&quot;">​</a></h2><p>Строка воспринимается как командная, если начинается с литерала <code>@</code>. Команда представляет собой одиночную операцию, которая управляет тем, что происходит в сцене; например, она может быть использована для изменения фона, перемещения персонажа или загрузки другого сценария Naninovel.</p><h3 id="идентификатор-команды" tabindex="-1">Идентификатор команды <a class="header-anchor vp-link" href="#идентификатор-команды" aria-label="Permalink to &quot;Идентификатор команды&quot;">​</a></h3><p>Сразу после литерала команды ожидается идентификатор команды. Это может быть либо имя класса C#, реализующего команду, либо псевдоним команды (если он применяется через атрибут <code>CommandAlias</code>).</p><p>Например, команда <a href="/ru/api/#save" target="_blank"><code>@save</code></a> (используемая для автоматического сохранения игры) реализуется через C# класс <code>AutoSave</code>. Реализующий класс также имеет атрибут <code>[CommandAlias(&quot;save&quot;)]</code>, поэтому для вызова этой команды в скрипте можно использовать операторы <code>@save</code> и <code>@AutoSave</code>.</p><p>Идентификаторы команд не чувствительны к регистру; все следующие операторы действительны и вызовут одну и ту же команду <code>AutoSave</code>:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@save</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@Save</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@AutoSave</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@autosave</span></span></code></pre></div><h3 id="параметры-команд" tabindex="-1">Параметры команд <a class="header-anchor vp-link" href="#параметры-команд" aria-label="Permalink to &quot;Параметры команд&quot;">​</a></h3><p>Большинство команд имеют ряд параметров, определяющих действие команды. Параметр – это выражение типа &quot;ключ-значение&quot;, определяемое после командного литерала, разделенного столбцом (<code>:</code>). Идентификатор параметра (ключ) может быть либо именем соответствующего поля параметра класса реализации команды, либо псевдонимом параметра (если он определен через свойство <code>alias</code> атрибута <code>CommandParameter</code>).</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@commandId</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> paramId:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">paramValue</span></span></code></pre></div><p>Рассмотрим команду <a href="/ru/api/#hidechars" target="_blank"><code>@hideChars</code></a>, которая используется для скрытия всех видимых персонажей в сцене. Её можно использовать следующим образом:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@hideChars</span></span></code></pre></div><p>Вы можете здесь использовать параметр <code>time</code> типа <em>Decimal</em> для того, чтобы указать, как долго персонажи будут растворяться, прежде чем полностью скроются (исчезнут из сцены):</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@hideChars</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> time:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">5.5</span></span></code></pre></div><p>Так персонажи будут угасать в течение 5.5 секунд до того, как полностью исчезнут из сцены.</p><p>Вы также можете использовать параметр <code>wait</code> типа <em>Boolean</em>, чтобы указать, следует ли выполнять следующую команду сразу после завершения текущей команды или дождаться ее завершения:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@hideChars</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> time:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">5.5</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> wait:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@hidePrinter</span></span></code></pre></div><p>Так текстовый принтер скроется сразу после того, как персонажи начнут исчезать. Если <code>wait</code> будет иметь значение <code>true</code> (или значение не будет указано), принтер будет скрыт только тогда, когда <a href="/ru/api/#hidechars" target="_blank"><code>@hideChars</code></a> завершит выполнение.</p><h3 id="типы-значении-параметров" tabindex="-1">Типы значений параметров <a class="header-anchor vp-link" href="#типы-значении-параметров" aria-label="Permalink to &quot;Типы значений параметров&quot;">​</a></h3><p>В зависимости от собственного типа параметры могут ожидать один из следующих типов значений:</p><table><thead><tr><th>Тип</th><th>Описание</th></tr></thead><tbody><tr><td>String</td><td>Простое строковое значение, например: <code>LoremIpsum</code>. Не забудьте заключить строку в двойные кавычки, если она содержит пробелы, например: <code>&quot;Lorem ipsum dolor sit amet.&quot;</code>.</td></tr><tr><td>Integer</td><td>Число без дробей; целочисленное значение, например: <code>1</code>, <code>150</code>, <code>-25</code>.</td></tr><tr><td>Decimal</td><td>Десятичное число с дробью, отделённой точкой, например: <code>1.0</code>, <code>12.08</code>, <code>-0.005</code>.</td></tr><tr><td>Boolean</td><td>Имеет два доступных значения: <code>true</code> or <code>false</code> (нечуствительна к регистру).</td></tr><tr><td>Named&lt;&gt;</td><td>Строка имени, связанная со значением одного из вышеперечисленных типов. Часть имени отделена точкой. Например, для <em>Named&lt;Integer&gt;</em>: <code>foo.8</code>, <code>bar.-20</code>.</td></tr><tr><td>List&lt;&gt;</td><td>Список из значений одного из вышеперечисленных типов, разделённых точками. Например, для <em>List&lt;String&gt;</em>: <code>foo,bar,&quot;Lorem ipsum.&quot;</code>, для <em>List&lt;Decimal&gt;</em>: <code>12,-8,0.105,2</code></td></tr></tbody></table><h3 id="безымянные-параметры" tabindex="-1">Безымянные параметры <a class="header-anchor vp-link" href="#безымянные-параметры" aria-label="Permalink to &quot;Безымянные параметры&quot;">​</a></h3><p>Большинство команд имеют безымянный параметр. Параметр считается безымянным, если может быть использован без указания его имени.</p><p>Например, команда <a href="/ru/api/#bgm" target="_blank"><code>@bgm</code></a> ожидает безымянный параметр, указывающий имя музыкального трека, который нужно проиграть:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@bgm</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> PianoTheme</span></span></code></pre></div><p>&quot;PianoTheme&quot; здесь – это значение типа <em>String</em> параметра &quot;BgmPath&quot;.</p><p>В каждой команде может быть только один безымянный параметр, и он всегда должен указываться перед любыми другими параметрами.</p><h3 id="опциональные-и-обязательные-параметры" tabindex="-1">Опциональные и обязательные параметры <a class="header-anchor vp-link" href="#опциональные-и-обязательные-параметры" aria-label="Permalink to &quot;Опциональные и обязательные параметры&quot;">​</a></h3><p>Большинство параметров команды являются <em>опциональными</em>. Это означает, что они либо имеют предопределенное значение, либо просто не требуют никакого значения для выполнения команды. Например, если команда <a href="/ru/api/#resettext" target="_blank"><code>@resetText</code></a> используется без указания каких-либо параметров, она сбросит текст в принтере по умолчанию, но вы также можете установить определенный ID принтера следующим образом: <code>@resetText printer:Dialogue</code>.</p><p>Однако некоторые параметры являются <em>обязательными</em> для выполнения команды и всегда должны быть указаны.</p><h3 id="справочик-команд-api" tabindex="-1">Справочик команд API <a class="header-anchor vp-link" href="#справочик-команд-api" aria-label="Permalink to &quot;Справочик команд API&quot;">​</a></h3><p>Для списка всех доступных сейчас команд с описанием, параметрами и примерами использования см. <a href="/naninovel-docs/ru/api/" class="vp-link">справочник команд API</a>.</p><h2 id="универсальные-текстовые-строки" tabindex="-1">Универсальные текстовые строки <a class="header-anchor vp-link" href="#универсальные-текстовые-строки" aria-label="Permalink to &quot;Универсальные текстовые строки&quot;">​</a></h2><p>Чтобы сделать написание скриптов с большим объемом текста более удобным, используются универсальные текстовые строки. Строка считается универсальным текстовым оператором, если она не начинается ни с одного из вышеуказанных литералов операторов:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span></span></code></pre></div><p>ID говорящего можно указать в начале универсальной текстовой строки, отделив их двоеточием (<code>:</code>), чтобы связать печатный текст с <a href="/naninovel-docs/ru/guide/characters" class="vp-link">актором персонажа</a>:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span></span></code></pre></div><p>Чтобы сэкономить время и текст при постоянном изменении внешности персонажей, связанных с печатным текстом, вы также можете указать внешность после ID персонажа:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix.Happy:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Lorem ipsum dolor sit amet.</span></span></code></pre></div><p>Строка выше аналогична следующим двум:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Felix.Happy</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> wait:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span></span>
<span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Lorem ipsum dolor sit amet.</span></span></code></pre></div><h3 id="встраивание-команд" tabindex="-1">Встраивание команд <a class="header-anchor vp-link" href="#встраивание-команд" aria-label="Permalink to &quot;Встраивание команд&quot;">​</a></h3><p>Иногда вам может потребоваться выполнить команду во время отображения (печати) текстового сообщения, сразу после или перед определенным символом. Например, актор изменил бы свою внешность (выражение) при выведении определенного слова; или воспроизведение определенного звукового эффекта в ответ на какое-то событие, описанное в середине печатного сообщения. Функция встраивания команд позволяет обрабатывать подобные ситуации.</p><p>Все команды, (как <a href="/naninovel-docs/ru/api/" class="vp-link">встроенные</a> и <a href="/naninovel-docs/ru/guide/custom-commands" class="vp-link">пользовательские</a>) могут быть встроены в универсальные текстовые строки с использованием квадратных скобок (<code>[</code>,<code>]</code>):</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">Felix:</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Lorem ipsum</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Felix.Happy</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> pos:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">0.75</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> wait:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> dolor sit amet, consectetur adipiscing elit.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[i]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Aenean tempus eleifend ante, ac molestie metus condimentum quis.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[i][br</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> 2</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> Morbi nunc magna, consequat posuere consectetur in, dapibus consectetur lorem. Duis consectetur semper augue nec pharetra.</span></span></code></pre></div><p>Обратите внимание, что синтаксис встроенной команды остаётся точно таким же, за исключением того, что литерал <code>@</code> опущен, а тело команды заключено в квадратные скобки. Вы можете взять любую командную строку, встроить ее в общую текстовую строку, и она будет иметь точно такой же эффект, но в другой момент, в зависимости от позиции внутри текстового сообщения.</p><p>Под капотом универсальные текстовые строки разбираются на отдельные команды, идентифицируемые встроенным индексом; текст печатается с помощью команды <a href="/ru/api/#print" target="_blank"><code>@print</code></a>. Например, следующая универсальная текстовая строка в скрипте Naninovel:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Lorem ipsum</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Felix.Happy</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> pos:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">75</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> wait:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;"> dolor sit amet.</span></span></code></pre></div><p>— в действительности обрабатывается движком как последовательность отдельных команд:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@print</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Lorem ipsum&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> waitInput:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@char</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Felix.Happy</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> pos:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">75</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> wait:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">false</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@print</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;dolor sit amet.&quot;</span></span></code></pre></div><p>Чтобы напечатать квадратные скобки через универсальную текстовую строку, экранируйте их с помощью обратного слэша, например:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Some text \\[ text inside brackets \\]</span></span></code></pre></div><p>— напечатает &quot;Some text [ text inside brackets ]&quot; в игре.</p><h2 id="строки-метки" tabindex="-1">Строки-метки <a class="header-anchor vp-link" href="#строки-метки" aria-label="Permalink to &quot;Строки-метки&quot;">​</a></h2><p>Метки используются в качестве &quot;якорей&quot; при навигации по сценариям Naninovel с помощью команд <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a>. Чтобы объявить метку, используйте литерал <code>#</code> в начале строки, за которым следует имя метки:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#51A612;--shiki-dark:#9BC37C;"># Epilogue</span></span></code></pre></div><p>Теперь можно использовать команду <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a>, чтобы &quot;прыгнуть&quot; к этой строке:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> ScriptName.Epilogue</span></span></code></pre></div><p>В случае, если вы используете команду <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a> из того же сценария, в котором находится искомая метка, вы можете опустить имя сценария:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .Epilogue</span></span></code></pre></div><h2 id="строки-комментарии" tabindex="-1">Строки-комментарии <a class="header-anchor vp-link" href="#строки-комментарии" aria-label="Permalink to &quot;Строки-комментарии&quot;">​</a></h2><p>Когда строка начинается с литерала точки с запятой (<code>;</code>), она считается оператором комментария. Строки комментариев полностью игнорируются движком при выполнении сценариев. Вы можете использовать строки комментариев для добавления заметок или аннотаций для себя или других членов команды, работающих со сценариями Naninovel.</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Следующая команда выполнит автосохранение игры.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@save</span></span></code></pre></div><h2 id="условия-исполнения" tabindex="-1">Условия исполнения <a class="header-anchor vp-link" href="#условия-исполнения" aria-label="Permalink to &quot;Условия исполнения&quot;">​</a></h2><p>Хотя сценарий по умолчанию выполняется линейно, вы можете ввести ветвление, используя параметры <code>if</code>, поддерживаемые всеми командами.</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Если значение \`level\` – это номер, и он больше 9000, добавить выбор.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;It&#39;s over 9000!&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">level&gt;9000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Ессли переменная \`dead\` – булева и имеет значение \`false\`, выполнить команду вывода текста.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@print</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> text:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;I&#39;m still alive.&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">!dead</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Если переменная \`glitch\`– булева и имеет значение \`true\`, или функция вывода случайного числа в диапазоне от 1 до 10</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; возвращает 5 или больше, выполнить команду \`@spawn\`.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@spawn</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> GlitchCamera</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;glitch || Random(1, 10) &gt;= 5&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Если \`score\` имеет значение от 7 до 13, или переменная \`lucky\`– булева</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; и возвращает \`true\`, загрузить скрипт \`LuckyEnd\`.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> LuckyEnd</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">&quot;(score &gt;= 7 &amp;&amp; score &lt;= 13) || lucky&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Вы также можете использовать условия во встроенных командах.</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Lorem sit amet. </span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[style</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> bold</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">score&gt;=10</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Consectetur elit.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[style</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> default</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; Если в самом выражении используются двойные кавычки,</span></span>
<span class="line"><span style="--shiki-light:#ACB5C6;--shiki-dark:#5D6470;">; не забывайте дважды экранировать их.</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@print</span><span style="--shiki-light:#3ABFB3;--shiki-dark:#62B8C1;"> {remark}</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> if:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">remark==&quot;Saying \\\\&quot;Stop the car\\\\&quot; was a mistake.&quot;</span></span></code></pre></div><p>Также возможно указывать многострочные условные блоки с помощью команд <a href="/ru/api/#if" target="_blank"><code>@if</code></a>, <a href="/ru/api/#else" target="_blank"><code>@else</code></a>, <a href="/ru/api/#elseif" target="_blank"><code>@elseif</code></a> и <a href="/ru/api/#endif" target="_blank"><code>@endif</code></a>.</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> score&gt;10</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">	Good job, you&#39;ve passed the test!</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@bgm</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Victory</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@spawn</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> Fireworks</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@elseif</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> attempts&gt;100</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">	You&#39;re hopeless... Need help?</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;Yeah, please!&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> goto:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">.GetHelp</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@choice</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> &quot;I&#39;ll keep trying.&quot;</span><span style="--shiki-light:#C642A5;--shiki-dark:#CD9769;"> goto:</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;">.BeginTest</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@stop</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@else</span></span>
<span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">	You&#39;ve failed. Try again!</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">	@goto</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> .BeginTest</span></span>
<span class="line"><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">@endif</span></span></code></pre></div><p>Обратите внимание, что табуляции полностью опциональны и используются здесь только для лучшей читаемости.</p><p>То же самое работает и для универсальных текстовых строк:</p><div class="language-nani vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nani</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Lorem ipsum dolor sit amet. </span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[if</span><span style="--shiki-light:#9250BF;--shiki-dark:#E2BE7F;"> score&gt;10</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Duis efficitur imperdiet nunc. </span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[else]</span><span style="--shiki-light:#4B5871;--shiki-dark:#ACB2BE;">Vestibulum sit amet dolor non dolor placerat vehicula.</span><span style="--shiki-light:#257DC8;--shiki-dark:#6CB2ED;">[endif]</span></span></code></pre></div><p>Для дополнительной информации о форматах условных выражений и доступных операторах см. гайд по <a href="/naninovel-docs/ru/guide/script-expressions" class="vp-link">выражениям сценариев</a>.</p><h2 id="визуальныи-редактор" tabindex="-1">Визуальный редактор <a class="header-anchor vp-link" href="#визуальныи-редактор" aria-label="Permalink to &quot;Визуальный редактор&quot;">​</a></h2><p>Вы можете использовать визуальный редактор сценариев для редактирования сценариев Naninovel. Выберите ресурс сценария, и вы увидите, что визуальный редактор автоматически откроется в окне инспектора.</p>`,80),X=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"396"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-ba57b9f78116e57408125325bdf66be9.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-ba57b9f78116e57408125325bdf66be9.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABAAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABIbWRhdAoGGBUjm0AQMjYVwAggQQSAAQDx2hr87E1E/GOxnVSsQ+Z9TfvDmCVc5hWEwk4khutpiCvnZOzWKkUKfo5txhI=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"396",decoding:"sync"})])],-1),M=a("<p>Чтобы добавить новую строку в сценарий, щелкните правой кнопкой мыши в месте, куда вы хотите вставить строку, или же нажмите <code>Ctrl+Space</code> (вы можете изменить привязки клавиш по умолчанию в меню конфигурации ввода) и выберите нужную строку или тип команды. Чтобы изменить порядок строк, перетащите их за номерные метки. Чтобы удалить строку, щелкните ее правой кнопкой мыши и выберите пункт &quot;Удалить&quot;.</p><p>Когда вы изменили сценарий с помощью визуального редактора, вы увидите звездочку (<code>*</code>) над именем сценария в заголовке инспектора. Это означает, что ассет был изменён и должен быть сохранен; нажмите <code>Ctrl+S</code>, чтобы сохранить ассет. Если вы попытаетесь выбрать другой ассет после изменения сценария, появится диалоговое окно, позволяющее либо сохранить, либо отменить изменения.</p><p>Визуальный редактор автоматически синхронизирует отредактированный сценарий, если вы обновите его внешне, так что вы можете легко работать со сценариями как в текстовых, так и в визуальных редакторах. В случае, если автосинхронизация не работает, убедитесь, что функция <code>Auto Refresh</code> включена в меню редактора Unity <code>Edit -&gt; Preferences -&gt; General</code>.</p><p>В режиме воспроизведения вы можете использовать визуальный редактор, чтобы отслеживать, какая строка сценария воспроизводится в данный момент, и щелкнуть правой кнопкой мыши строку, чтобы перемотать сценарий назад. Эта функция требует, чтобы сценарий имел одинаковый ID ресурса (при назначении в меню менеджера ресурсов) и имя ассета.</p>",4),S=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"389"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-b6e04d664ce4b513296b378b7c25be03.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-b6e04d664ce4b513296b378b7c25be03.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAACAAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEwAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAACIbWRhdAoGGBUjk0AQMnYVwCaYwgSBBADpVI33UqSUhLbE6A8Ov4WU71otcdhzH/yuiy+A0v2Hgn4bPfXHuOTzy4GP7sqsis83FQknxsHXmwYkMJqYi2SqS1KuT8X3bLq4xy1Z4xHJgddnhoBNrqdT2QPZl2GT1hZxxfi96RFvUNfhLSpq",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"389",decoding:"sync"})])],-1),V=a('<p>Строка, воспроизводимая в настоящее время, будет выделена зеленым цветом; когда воспроизведение скрипта будет остановлено при ожидании ввода пользователем, воспроизводимая строка будет выделена желтым цветом.</p><p>Вы можете настроить поведение редактора и внешний вид в меню конфигурации сценариев.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+E+'" type="image/avif"><source srcset="'+D+'"><img data-imgit-loadable alt="" width="720" height="565" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABaAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAHAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABibWRhdAoIOBUj20gIaAEyThXAAgiBBIAEAMaQLVYmOG31+UuGcf65e0JdfDAq886UBXUtuwalEk9Iycvnvl+21SdNrrDI0FFP9JHMmtyEF5l6S5RDszVaSWYD/mBtoA==" type="image/avif"><img src="//:0" alt="cover" width="720" height="565" decoding="sync"></picture></div>',3),R=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=9UmccF9R9xI",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:w,type:"image/avif"}),A("source",{srcset:f}),A("img",{"data-imgit-loadable":"",alt:"",width:"720",height:"405",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABIAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABQbWRhdAoJGBUjm0QICBQQMjsVwAggQgSAEADjLFiVgPjtRy4GQJVE9X6FjfStzEYkFMbaNUZm3kY/Jgj8oMT3sYAPPCxEN5OJ7ksRYA==",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"405",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/9UmccF9R9xI?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),T=A("h2",{id:"схемы-сценариев",tabindex:"-1"},[t("Схемы сценариев "),A("a",{class:"header-anchor vp-link",href:"#схемы-сценариев","aria-label":'Permalink to "Схемы сценариев"'},"​")],-1),Z=A("p",null,"При работе с большим количеством сценариев и нелинейных историй, удобным может быть наличие визуального представления развития истории. Здесь вам может пригодиться инструмент сценарных схем.",-1),N=A("div",{class:"imgit-video",style:{display:"flex"},"data-imgit-container":""},[A("div",{style:{width:"100%"}},[A("video",{"data-imgit-loadable":"",preload:"none",loop:"",autoplay:"",muted:"",playsinline:"",width:"720",height:"432"},[A("source",{"data-imgit-src":"/imgit/encoded/i.gyazo.com-0dd3ec2393807fb03d501028e1526895.mp4@main.mp4",type:"video/mp4; codecs=av01.0.04M.08"}),A("source",{"data-imgit-src":"/imgit/fetched/i.gyazo.com-0dd3ec2393807fb03d501028e1526895.mp4"})])]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAAmAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAFgAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAIAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAAubWRhdAoGGBUjq0AQMhwVwAQQAASEAADeWOH6+zKNPp40STIKQrwsMgFQ",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"720",height:"432",decoding:"sync"})])],-1),U=a('<p>Чтобы открыть окно схемы, испольуйте меню редактора <code>Naninovel -&gt; Script Graph</code>. Вы можете закрепить это окно как любую другую панель редактора, если хотите.</p><p>Инструмент автоматически построит графическое представление всех сценариев Naninovel (в виде узлов), назначенных через ресурсы редактора (<code>Naninovel -&gt; Resources -&gt; Scripts</code>), и связей между ними.</p><p>Соединения генерируются на основе команд <a href="/ru/api/#goto" target="_blank"><code>@goto</code></a> и <a href="/ru/api/#gosub" target="_blank"><code>@gosub</code></a>. Если команде назначено условное выражение (параметр <code>if</code>), соответствующий порт в узле будет выделен желтым цветом, и вы сможете увидеть выражение при наведении курсора на порт.</p><p>Вы можете выбрать ассет сценария и открыть визуальный редактор, дважды щелкнув по узлу или порту. Щелчок по портам также приведет к прокрутке визуального редактора до строки, содержащей метку (в случае, если была указана метка).</p><p>Вы можете изменять положение узлов по своему усмотрению, и их позиции будут автоматически сохранены при закрытии окна схемы или выходе из Unity; затем позиции будут восстановлены при повторном открытии окна. Вы также можете сохранить положения вручную, нажав кнопку &quot;Save&quot;. Нажатие кнопки &quot;Auto Align&quot; приведет к сбросу всех позиций.</p><p>При изменении сценариев или добавлении новых нажмите кнопку &quot;Rebuild Graph&quot;, чтобы синхронизировать изменения.</p><h2 id="горячая-перезагрузка" tabindex="-1">Горячая перезагрузка <a class="header-anchor vp-link" href="#горячая-перезагрузка" aria-label="Permalink to &quot;Горячая перезагрузка&quot;">​</a></h2><p>Можно редактировать сценарии в режиме воспроизведения (как с помощью визуальных, так и внешних редакторов) и сразу же применять изменения, не перезапуская игру. Эта функция управляется через свойство <code>Hot Reload Scripts</code> в конфигурации сценариев и включена по умолчанию.</p><p>При изменении, добавлении или удалении строки перед воспроизводимой в данный момент, откат состояния автоматически произойдет с измененной строкой, чтобы предотвратить несоответствие состояния.</p><p>В случае, если горячая перезагрузка не работает, убедитесь, что включено свойство <code>Auto Refresh</code>, а <code>Script Changes While Playing</code> установлено на <code>Recompile And Continue Playing</code>. Оба свойства можно найти в меню редактора Unity <code>Edit -&gt; Preferences -&gt; General</code>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+F+'" type="image/avif"><source srcset="'+_+'"><img data-imgit-loadable alt="" width="720" height="311" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAABJAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAkAAAAEAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAABRbWRhdAoIOBTj9pAQ0AIyPRXABBBBBIABAMvOA/gD8HAjMgU1F7QU3P7IJ++Mu10xy7w2kcjawFGAGSbERZJQNpceckvPPeaHKBYle3w=" type="image/avif"><img src="//:0" alt="cover" width="720" height="311" decoding="sync"></picture></div><p>Чтобы вручную инициировать горячую перезагрузку текущего сценария Naninovel (например, при редактировании файла скрипта вне проекта Unity), используйте <a href="/naninovel-docs/ru/guide/development-console" class="vp-link">консольную команду</a> <code>reload</code>. Команда предназначена только для редактора (не будет работать в сборках).</p><h2 id="поддержка-ide" tabindex="-1">Поддержка IDE <a class="header-anchor vp-link" href="#поддержка-ide" aria-label="Permalink to &quot;Поддержка IDE&quot;">​</a></h2><p>Такие функции IDE, как подсветка синтаксиса, проверка ошибок, автозавершение и интерактивная документация, могут значительно повысить производительность при написании сценариев. Мы сделали расширение для бесплатного open-source <a href="https://code.visualstudio.com" class="vp-link" target="_blank" rel="noreferrer">VS Code<span class="external-link-icon"> ↗</span></a> (доступен для Windows, MacOS и Linux), которое обеспечивает существенную поддержку IDE для синтаксиса NaniScript.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+Y+'" type="image/avif"><source srcset="'+G+'"><img data-imgit-loadable alt="" width="720" height="480" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAABrAAIAAAABAAACOwAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAGAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABgAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAh21kYXQKCDgVI7tICGgBMl8VwAQQggSIAQDrlGeXXMk+ADbU3BnwSud9H6HoMUlKRwoCKPaLT8IPNC35mdxnuN/KRMh7dcgCmy09JmyUVKqO2JhAOjtBgoG2ODhj7IUxQqvsCnZTEgsOhYHt5dhzwAoGGBUju0qAMgoVwAABIAAGNODm" type="image/avif"><img src="//:0" alt="cover" width="720" height="480" decoding="sync"></picture></div><p>Посмотрите следующий видеогайд по активации и использованию расширения.</p>',16),P=A("div",{class:"imgit-youtube","data-imgit-container":""},[A("button",{class:"imgit-youtube-banner",title:"Watch video on YouTube","data-href":"https://www.youtube.com/watch?v=y87wd5jHfFw",style:{position:"absolute"}},"Watch on"),A("div",{class:"imgit-youtube-poster",title:"Play YouTube video"},[A("div",{class:"imgit-youtube-play",title:"Play YouTube video"}),A("div",{class:"imgit-picture",style:{display:"flex"},"data-imgit-container":""},[A("picture",{style:{width:"100%"}},[A("source",{srcset:Q,type:"image/avif"}),A("source",{srcset:I}),A("img",{"data-imgit-loadable":"",alt:"",width:"320",height:"180",loading:"lazy",decoding:"async"})]),A("picture",{class:"imgit-cover",style:{width:"100%","margin-left":"-100%"}},[A("source",{srcset:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAAD5bWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAAHmlsb2MAAAAARAAAAQABAAAAAQAAASEAAAArAAAAKGlpbmYAAAAAAAEAAAAaaW5mZQIAAAAAAQAAYXYwMUNvbG9yAAAAAGppcHJwAAAAS2lwY28AAAAUaXNwZQAAAAAAAAAQAAAACQAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EADAAAAAATY29scm5jbHgAAgACAAUAAAAAF2lwbWEAAAAAAAAAAQABBAECgwQAAAAzbWRhdAoJGAz+GiBAQKCAMh4VwAIIAASBAAB71mwm8XU1+Eg7SsSXDM1CS9iYMfc=",type:"image/avif"}),A("img",{src:"//:0",alt:"cover",width:"320",height:"180",decoding:"sync"})])])]),A("div",{class:"imgit-youtube-player",hidden:""},[A("iframe",{title:"","data-src":"https://www.youtube-nocookie.com/embed/y87wd5jHfFw?autoplay=1&playsinline=1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})])],-1),H=a('<p>Поддержка других редакторов возможна в будущем; проверьте <a href="https://github.com/Naninovel/Documentation/issues/56#issuecomment-492987029" class="vp-link" target="_blank" rel="noreferrer">тему на GitHub<span class="external-link-icon"> ↗</span></a> для получения дополнительной информации.</p><h2 id="отладка-сценариев" tabindex="-1">Отладка сценариев <a class="header-anchor vp-link" href="#отладка-сценариев" aria-label="Permalink to &quot;Отладка сценариев&quot;">​</a></h2><p>При работе с большими сценариями Naninovel может стать утомительным всегда воспроизводить их с самого начала, чтобы проверить, как все работает в определенных частях скрипта.</p><p>С помощью <a href="/naninovel-docs/ru/guide/development-console" class="vp-link">консоли разработчика</a> вы можете мгновенно &quot;перемотать&quot; воспроизводимый в данный момент сценарий на произвольную строку:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span>rewind 12</span></span></code></pre></div><p>— начнёт воспроизведение текущего скрипта с 12-й строки; вы можете перемотать его вперед и назад таким же образом. Чтобы открыть консоль во время работы игры, убедитесь, что консоль включена в конфигурации движка, и нажмите клавишу <code>~</code> (может быть изменена в конфигурации) или выполните мультитач (3 или более одновременных касаний) в случае, если сборка проигрывается на устройстве с сенсорным экраном.</p><p>Чтобы узнать, какой сценарий и какая строка воспроизводятся в данный момент, используйте окно отладки: введите <code>debug</code> в консоли разработки и нажмите <code>Enter</code>, чтобы открыть окно.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+x+'" type="image/avif"><source srcset="'+q+'"><img data-imgit-loadable alt="Отладка сценариев" width="720" height="404" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAADAAAIAAAABAAACkAAAABQAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAkAAAAFAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAJAAAABQAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAA3G1kYXQKCDgVI5tICGgBMrMBFcAAAEgQUNbbXm39UXs+FDnI4uLoOTYTHWPkx+5OKmb7vIgA0mqwvhDLrslI5tpOigR8VPH+/Ks7T1ZLCTUZQMGifMiahwzeb8LVgK9EAKeNId9uWhWc6f80RidlAd25jBx0S1m/S1C+AOdl9gn+XHgsVCAVVWXqJPGjgkefnCAOEz0Zrarwfr3xnjn9PsGW3diMb97NsbxKE/f9mEMx8cN4xKpRmtLstRx7Ab5ROb+W7gYKBhgVI5tKgDIKFcAAASAABjTg5g==" type="image/avif"><img src="//:0" alt="cover" width="720" height="404" decoding="sync"></picture></div><p>В заголовке окна отображаются имя текущего воспроизводимого сценария, номер строки и индекс команды. Если включена функция [автоозвучивания](/ru/guide/voicing#автоматическое озвучивание), то также будет отображаться имя соответствующего голосового клипа. Вы можете изменить положение окна, перетащив его по заголовку. Кнопка &quot;Stop&quot; остановит выполнение скрипта; когда проигрыватель скриптов остановлен, кнопка &quot;Play&quot; возобновит выполнение. Вы можете закрыть окно отладки, нажав кнопку &quot;Close&quot;.</p><p>Окно отладки доступно как в редакторе, так и в сборках.</p>',10),j=[W,X,M,S,V,R,T,Z,N,U,P,H];function O(z,L,J,K,$,AA){return e(),i("div",null,j)}const iA=s(C,[["render",O]]);export{sA as __pageData,iA as default};
