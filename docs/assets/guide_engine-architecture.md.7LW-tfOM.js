import{_ as e,c as i,o as n,f as t,cj as a,ck as s}from"./chunks/framework.BG74BkEs.js";const f=JSON.parse('{"title":"Engine Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"guide/engine-architecture.md","filePath":"guide/engine-architecture.md","lastUpdated":1698833889000}'),A={name:"guide/engine-architecture.md"},o=a+" 1x",c=s+" 1x",r=t('<h1 id="engine-architecture" tabindex="-1">Engine Architecture <a class="header-anchor vp-link" href="#engine-architecture" aria-label="Permalink to &quot;Engine Architecture&quot;">​</a></h1><p>The engine is designed with the following principles in mind: <strong>scene independence</strong> and <strong>service-orientation</strong>.</p><h2 id="scene-independent" tabindex="-1">Scene Independent <a class="header-anchor vp-link" href="#scene-independent" aria-label="Permalink to &quot;Scene Independent&quot;">​</a></h2><p>While Unity design promotes using scenes and prefabs composition, it&#39;s not very practical when developing visual novels. Naninovel systems either not directly bound to a <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.html" class="vp-link" target="_blank" rel="noreferrer">MonoBehaviour<span class="external-link-icon"> ↗</span></a> or attached to a <a href="https://docs.unity3d.com/ScriptReference/Object.DontDestroyOnLoad.html" class="vp-link" target="_blank" rel="noreferrer">persistent<span class="external-link-icon"> ↗</span></a> root <a href="https://docs.unity3d.com/ScriptReference/GameObject.html" class="vp-link" target="_blank" rel="noreferrer">GameObject<span class="external-link-icon"> ↗</span></a>.</p><div class="imgit-picture" style="display:flex;" data-imgit-container><picture style="width:100%;"><source srcset="'+o+'" type="image/avif"><source srcset="'+c+`"><img data-imgit-loadable alt="" width="488" height="251" loading="lazy" decoding="async"></picture><picture class="imgit-cover" style="width:100%;margin-left:-100%;"><source srcset="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUEAAAGobWV0YQAAAAAAAAAvaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAFBpY3R1cmVIYW5kbGVyAAAAAA5waXRtAAAAAAABAAAALGlsb2MAAAAARAAAAgABAAAAAQAAAdAAAAA0AAIAAAABAAACBAAAABMAAABCaWluZgAAAAAAAgAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAGmluZmUCAAAAAAIAAGF2MDFBbHBoYQAAAAAaaXJlZgAAAAAAAAAOYXV4bAACAAEAAQAAANdpcHJwAAAAsWlwY28AAAAUaXNwZQAAAAAAAAAYAAAADAAAABBwaXhpAAAAAAMICAgAAAAMYXYxQ4EgAAAAAAATY29scm5jbHgAAgACAACAAAAAFGlzcGUAAAAAAAAAGAAAAAwAAAAOcGl4aQAAAAABCAAAAAxhdjFDgQAcAAAAADhhdXhDAAAAAHVybjptcGVnOm1wZWdCOmNpY3A6c3lzdGVtczphdXhpbGlhcnk6YWxwaGEAAAAAHmlwbWEAAAAAAAAAAgABBAECgwQAAgQFBocIAAAAT21kYXQKCDgQ720gIaAEMigVwAQQQQSBBQDeWLlTygf5BnaFX6WPymBR2bondSG83gUc4lhKo/nQCgUYEO9tKjIKFcAAASAAAmsO4Q==" type="image/avif"><img src="//:0" alt="cover" width="488" height="251" decoding="sync"></picture></div><p>The following root objects are used, depending on the environment:</p><ul><li><code>Naninovel&lt;Runtime&gt;</code> for runtime (builds and editor play mode);</li><li><code>Naninovel&lt;Editor&gt;</code> for editor (outside of play mode).</li></ul><p>All the required game objects are created on engine initialization, which is executed automatically and asynchronously when the application starts (right after entering play mode or running a build) via a <a href="https://docs.unity3d.com/ScriptReference/RuntimeInitializeOnLoadMethodAttribute.html" class="vp-link" target="_blank" rel="noreferrer">RuntimeInitializeOnLoadMethod<span class="external-link-icon"> ↗</span></a> method. To customize the initialization scenario, see <a href="/naninovel-docs/guide/integration-options#manual-initialization" class="vp-link">manual initialization guide</a>.</p><div class="info custom-block"><p class="custom-block-title">NOTE</p><p>In case the scene independent design is not working for you, just disable <code>Scene Independent</code> option in the engine configuration menu and all the Naninovel-related objects will become part of the Unity scene where the engine was initialized and will be destroyed when the scene is unloaded.</p></div><h2 id="service-oriented" tabindex="-1">Service-Oriented <a class="header-anchor vp-link" href="#service-oriented" aria-label="Permalink to &quot;Service-Oriented&quot;">​</a></h2><p>Most of the engine features are implemented via engine services. Engine service is an implementation of an <code>IEngineService</code> interface, which handles a specific job, like executing naninovel scripts, managing actors or saving-loading the game state.</p><p>In case you wish to interact with an engine system, you&#39;ll most likely want to use an engine service. You can get a reference to an engine service using <code>Engine.GetService&lt;TService&gt;()</code> static method, where <code>TService</code> is the type (interface) of service you wish to reference; e.g., to get a <code>IScriptPlayer</code> service:</p><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes theme-light theme-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> player</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Engine.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IScriptPlayer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">player.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>You can find list of all the currently available engine services and information on how to override/add custom ones in the <a href="/naninovel-docs/guide/engine-services" class="vp-link">engine services guide</a>.</p><h2 id="high-level-concept" tabindex="-1">High-Level Concept <a class="header-anchor vp-link" href="#high-level-concept" aria-label="Permalink to &quot;High-Level Concept&quot;">​</a></h2><p>The following UML diagram illustrates a high-level concept of the engine architecture. Note that all the class and interface names in the diagram are organized under <code>Naninovel</code> namespace. Eg, to reference <code>Engine</code> class, use <code>Naninovel.Engine</code> or <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/namespaces/using-namespaces" class="vp-link" target="_blank" rel="noreferrer">include the namespace<span class="external-link-icon"> ↗</span></a>.</p><p><object class="engine-design-dark" data="/assets/img/engine-design-dark.svg" type="image/svg+xml"></object><object class="engine-design-light" data="/assets/img/engine-design-light.svg" type="image/svg+xml"></object></p>`,17),l=[r];function d(h,p,g,m,u,v){return n(),i("div",null,l)}const y=e(A,[["render",d]]);export{f as __pageData,y as default};
